{"version":3,"sources":["webpack:///./app/components/problem-edit.js","webpack:///./app/components/common/image-upload/image-upload.js","webpack:///./app/components/common/user-selector/user-selector.js"],"names":["_react","__webpack_require__","o","g","l","_reactRouter","i","_reactBootstrap","_reactGoogleMaps","d","c","f","h","p","m","e","__esModule","default","GettingStartedGoogleMap","withGoogleMap","props","_react2","createElement","GoogleMap","defaultZoom","defaultCenter","defaultMapTypeId","google","maps","MapTypeId","TERRAIN","onClick","bind","markers","ProblemEdit","_this2","this","document","title","_config2","getTitle","_superagent2","get","getUrl","getRegion","end","err","res","setState","error","grades","body","types","match","params","problemId","id","visibility","name","comment","originalGrade","fa","faDate","convertFromDateToString","Date","nr","location","query","lat","lng","newMedia","withCredentials","typeId","t","target","value","parseInt","parseFloat","newFaDate","event","_this3","preventDefault","isSaving","state","map","file","replace","photographer","inPhoto","req","post","field","JSON","stringify","sectorId","idSector","find","set","forEach","attach","pushUrl","latLng","newUsers","u","String","firstname","label","surname","window","history","back","_this4","_reactFontawesome2","icon","spin","size","status","toString","Redirect","to","push","yesterday","setDate","getDate","visibilityText","selectedType","getDefaultCenter","getDefaultZoom","Well","onSubmit","save","FormGroup","controlId","ControlLabel","FormControl","type","placeholder","onChange","onNameChanged","_reactInputCalendar2","format","computableFormat","date","onFaDateChanged","ButtonGroup","Button","DropdownButton","subType","MenuItem","key","eventKey","onSelect","onTypeIdChanged","onOriginalGradeChanged","grade","_userSelector2","users","onUsersUpdated","onVisibilityChanged","_auth2","isSuperAdmin","onNrChanged","style","height","componentClass","onCommentChanged","_imageUpload2","onMediaChanged","onNewMediaChanged","containerElement","mapElement","onMapClick","Marker","position","onLatChanged","onLngChanged","bsStyle","onCancel","disabled","r","TypeError","ReferenceError","prototype","Object","create","constructor","enumerable","writable","configurable","setPrototypeOf","__proto__","Text","_classCallCheck","_this","_possibleConstructorReturn","getPrototypeOf","call","searchResults","nextProps","onValueChanged","length","console","log","sr","filter","toUpperCase","user","rows","href","menuItemSelect","className","display","width","inputChange","ImageUpload","media","files","allMedia","toRemove","_this5","_reactDropzone2","onDrop","padding","borderWidth","borderColor","borderStyle","borderRadius","accept","Grid","Row","Col","xs","sm","md","lg","Thumbnail","src","preview","onInPhotoChanged","onPhotographerChanged","onRemove","a","s","UserSelector","_createReactClass2","displayName","propTypes","_propTypes2","string","getInitialState","options","multiValue","handleOnChange","render","_reactSelect2","Creatable","multi","module","exports"],"mappings":"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","file":"15.index.js","sourcesContent":["import React, {Component} from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { Redirect } from 'react-router'\r\nimport Request from 'superagent';\r\nimport { FormGroup, ControlLabel, FormControl, ButtonGroup, Button, DropdownButton, MenuItem, Well } from 'react-bootstrap';\r\nimport {withGoogleMap, GoogleMap, Marker} from \"react-google-maps\";\r\nimport UserSelector from './common/user-selector/user-selector';\r\nimport ImageUpload from './common/image-upload/image-upload';\r\nimport config from '../utils/config.js';\r\nimport auth from '../utils/auth.js';\r\nimport Calendar from 'react-input-calendar';\r\nimport FontAwesomeIcon from '@fortawesome/react-fontawesome';\r\nimport { faSpinner } from '@fortawesome/fontawesome-free-solid';\r\n\r\nconst GettingStartedGoogleMap = withGoogleMap(props => (\r\n  <GoogleMap\r\n    defaultZoom={props.defaultZoom}\r\n    defaultCenter={props.defaultCenter}\r\n    defaultMapTypeId={google.maps.MapTypeId.TERRAIN}\r\n    onClick={props.onClick.bind(this)}>\r\n    {props.markers}\r\n  </GoogleMap>\r\n));\r\n\r\nexport default class ProblemEdit extends Component {\r\n  componentDidMount() {\r\n    document.title=config.getTitle() + \" | Problem edit\";\r\n    Request.get(config.getUrl(\"grades?regionId=\" + config.getRegion())).end((err, res) => {\r\n      this.setState({\r\n        error: err? err : null,\r\n        grades: err? null : res.body\r\n      });\r\n    });\r\n    Request.get(config.getUrl(\"types?regionId=\" + config.getRegion())).end((err, res) => {\r\n      this.setState({\r\n        error: err? err : null,\r\n        types: err? null : res.body\r\n      });\r\n    });\r\n    if (this.props.match.params.problemId==-1) {\r\n      this.setState({\r\n        id: -1,\r\n        visibility: 0,\r\n        name: \"\",\r\n        comment: \"\",\r\n        originalGrade: \"n/a\",\r\n        fa: [],\r\n        faDate: config.convertFromDateToString(new Date()),\r\n        nr: this.props.location.query.nr,\r\n        lat: 0,\r\n        lng: 0,\r\n        newMedia: []\r\n      });\r\n    } else {\r\n      Request.get(config.getUrl(\"problems?regionId=\" + config.getRegion() + \"&id=\" + this.props.match.params.problemId)).withCredentials().end((err, res) => {\r\n        if (err) {\r\n          this.setState({error: err});\r\n        } else {\r\n          this.setState({\r\n            id: res.body[0].id,\r\n            visibility: res.body[0].visibility,\r\n            name: res.body[0].name,\r\n            comment: res.body[0].comment,\r\n            originalGrade: res.body[0].originalGrade,\r\n            fa: res.body[0].fa,\r\n            faDate: res.body[0].faDate,\r\n            nr: res.body[0].nr,\r\n            typeId: res.body[0].t.id,\r\n            lat: res.body[0].lat,\r\n            lng: res.body[0].lng,\r\n            newMedia: []\r\n          });\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  onNameChanged(e) {\r\n    this.setState({name: e.target.value});\r\n  }\r\n\r\n  onNrChanged(e) {\r\n    this.setState({nr: parseInt(e.target.value)});\r\n  }\r\n\r\n  onLatChanged(e) {\r\n    this.setState({lat: parseFloat(e.target.value)});\r\n  }\r\n\r\n  onLngChanged(e) {\r\n    this.setState({lng: parseFloat(e.target.value)});\r\n  }\r\n\r\n  onVisibilityChanged(visibility, e) {\r\n    this.setState({visibility: visibility});\r\n  }\r\n\r\n  onCommentChanged(e) {\r\n    this.setState({comment: e.target.value});\r\n  }\r\n\r\n  onFaDateChanged(newFaDate) {\r\n    this.setState({faDate: newFaDate});\r\n  }\r\n\r\n  onOriginalGradeChanged(originalGrade, e) {\r\n    this.setState({originalGrade: originalGrade});\r\n  }\r\n\r\n  onTypeIdChanged(typeId, e) {\r\n    this.setState({typeId: typeId});\r\n  }\r\n\r\n  onNewMediaChanged(newMedia) {\r\n    this.setState({newMedia: newMedia});\r\n  }\r\n\r\n  save(event) {\r\n    event.preventDefault();\r\n    this.setState({isSaving: true});\r\n    const newMedia = this.state.newMedia.map(m => {return {name: m.file.name.replace(/[^-a-z0-9.]/ig,'_'), photographer: m.photographer, inPhoto: m.inPhoto}});\r\n    var req = Request.post(config.getUrl(\"problems?regionId=\" + config.getRegion()))\r\n    .withCredentials()\r\n    .field('json', JSON.stringify({sectorId: this.props.location.query.idSector, id: this.state.id, visibility: this.state.visibility, name: this.state.name, comment: this.state.comment, originalGrade: this.state.originalGrade, fa: this.state.fa, faDate: this.state.faDate, nr: this.state.nr, t: this.state.typeId? this.state.types.find(t => t.id === this.state.typeId) : this.state.types[0], lat: this.state.lat, lng: this.state.lng, newMedia: newMedia}))\r\n    .set('Accept', 'application/json');\r\n    this.state.newMedia.forEach(m => req.attach(m.file.name.replace(/[^-a-z0-9.]/ig,'_'), m.file));\r\n    req.end((err, res) => {\r\n      if (err) {\r\n        this.setState({error: err});\r\n      } else {\r\n        this.setState({pushUrl: \"/problem/\" + res.body.id});\r\n      }\r\n    });\r\n  }\r\n\r\n  onMapClick(event) {\r\n    this.setState({lat: event.latLng.lat(), lng: event.latLng.lng()});\r\n  }\r\n\r\n  onUsersUpdated(newUsers) {\r\n    const fa = newUsers.map(u => {\r\n      return {id: (typeof u.value === 'string' || u.value instanceof String)? -1 : u.value, firstname: u.label, surname: null};\r\n    });\r\n    this.setState({fa: fa});\r\n  }\r\n\r\n  onCancel() {\r\n    window.history.back();\r\n  }\r\n\r\n  render() {\r\n    if (!this.state || !this.state.id || !this.state.types || !this.state.grades) {\r\n      return <center><FontAwesomeIcon icon=\"spinner\" spin size=\"3x\" /></center>;\r\n    }\r\n    else if (this.state.error) {\r\n      return <span><h3>{this.state.error.status}</h3>{this.state.error.toString()}</span>;\r\n    }\r\n    else if (this.state.pushUrl) {\r\n      return (<Redirect to={this.state.pushUrl} push />);\r\n    }\r\n\r\n    const yesterday = new Date();\r\n    yesterday.setDate(yesterday.getDate()-1);\r\n\r\n    var visibilityText = 'Visible for everyone';\r\n    if (this.state.visibility===1) {\r\n      visibilityText = 'Only visible for administrators';\r\n    } else if (this.state.visibility===2) {\r\n      visibilityText = 'Only visible for super administrators';\r\n    }\r\n\r\n    const selectedType = this.state.typeId? this.state.types.find(t => t.id === this.state.typeId) : this.state.types[0];\r\n    var defaultCenter;\r\n    var defaultZoom;\r\n    if (this.state.lat!=0 && this.state.lng!=0) {\r\n      defaultCenter = {lat: this.state.lat, lng: this.state.lng};\r\n      defaultZoom = 15;\r\n    }\r\n    else if (this.props.location.query.lat && parseFloat(this.props.location.query.lat)>0) {\r\n      defaultCenter = {lat: parseFloat(this.props.location.query.lat), lng: parseFloat(this.props.location.query.lng)};\r\n      defaultZoom = 14;\r\n    }\r\n    else {\r\n      defaultCenter = config.getDefaultCenter();\r\n      defaultZoom = config.getDefaultZoom();\r\n    }\r\n    return (\r\n      <Well>\r\n        <form onSubmit={this.save.bind(this)}>\r\n          <FormGroup controlId=\"formControlsName\">\r\n            <ControlLabel>Problem name</ControlLabel>\r\n            <FormControl type=\"text\" value={this.state.name} placeholder=\"Enter name\" onChange={this.onNameChanged.bind(this)} />\r\n          </FormGroup>\r\n          <FormGroup controlId=\"formControlsFaDate\">\r\n            <ControlLabel>FA date (yyyy-mm-dd)</ControlLabel><br/>\r\n            <Calendar format='YYYY-MM-DD' computableFormat='YYYY-MM-DD' date={this.state.faDate} onChange={this.onFaDateChanged.bind(this)} />\r\n            <ButtonGroup>\r\n              <Button onClick={this.onFaDateChanged.bind(this, config.convertFromDateToString(yesterday))}>Yesterday</Button>\r\n              <Button onClick={this.onFaDateChanged.bind(this, config.convertFromDateToString(new Date()))}>Today</Button>\r\n            </ButtonGroup>\r\n          </FormGroup>\r\n          <FormGroup controlId=\"formControlsTypeId\">\r\n            <ControlLabel>Type</ControlLabel><br/>\r\n            <DropdownButton title={selectedType.type + (selectedType.subType? \" - \" + selectedType.subType : \"\")} id=\"bg-nested-dropdown\">\r\n              {this.state.types.map((t, i) => { return <MenuItem key={i} eventKey={i} onSelect={this.onTypeIdChanged.bind(this, t.id)}>{t.type} {t.subType? \" - \" + t.subType : \"\"}</MenuItem> })}\r\n            </DropdownButton>\r\n          </FormGroup>\r\n          <FormGroup controlId=\"formControlsGrade\">\r\n            <ControlLabel>Grade</ControlLabel><br/>\r\n            <DropdownButton title={this.state.originalGrade} id=\"bg-nested-dropdown\">\r\n              {this.state.grades.map((g, i) => { return <MenuItem key={i} eventKey={i} onSelect={this.onOriginalGradeChanged.bind(this, g.grade)}>{g.grade}</MenuItem> })}\r\n            </DropdownButton>\r\n          </FormGroup>\r\n          <FormGroup controlId=\"formControlsFA\">\r\n            <ControlLabel>FA</ControlLabel><br/>\r\n            <UserSelector users={this.state.fa? this.state.fa.map(u => {return {value: u.id, label: u.firstname + \" \" + u.surname}}) : []} onUsersUpdated={this.onUsersUpdated.bind(this)}/>\r\n          </FormGroup>\r\n          <FormGroup controlId=\"formControlsVisibility\">\r\n            <ControlLabel>Visibility</ControlLabel><br/>\r\n            <DropdownButton title={visibilityText} id=\"bg-nested-dropdown\">\r\n              <MenuItem eventKey=\"0\" onSelect={this.onVisibilityChanged.bind(this, 0)}>Visible for everyone</MenuItem>\r\n              <MenuItem eventKey=\"1\" onSelect={this.onVisibilityChanged.bind(this, 1)}>Only visible for administrators</MenuItem>\r\n              {auth.isSuperAdmin() && <MenuItem eventKey=\"2\" onSelect={this.onVisibilityChanged.bind(this, 2)}>Only visible for super administrators</MenuItem>}\r\n            </DropdownButton>\r\n          </FormGroup>\r\n          <FormGroup controlId=\"formControlsSectorNr\">\r\n            <ControlLabel>Sector number</ControlLabel>\r\n            <FormControl type=\"text\" value={this.state.nr} placeholder=\"Enter sector number\" onChange={this.onNrChanged.bind(this)} />\r\n          </FormGroup>\r\n          <FormGroup controlId=\"formControlsComment\">\r\n            <ControlLabel>Comment</ControlLabel>\r\n            <FormControl style={{height: '100px'}} componentClass=\"textarea\" placeholder=\"Enter comment\" value={this.state.comment} onChange={this.onCommentChanged.bind(this)} />\r\n          </FormGroup>\r\n          <FormGroup controlId=\"formControlsMedia\">\r\n            <ImageUpload onMediaChanged={this.onNewMediaChanged.bind(this)} />\r\n          </FormGroup>\r\n          <FormGroup controlId=\"formControlsMap\">\r\n            <ControlLabel>Click to mark problem on map</ControlLabel><br/>\r\n            <section style={{height: '600px'}}>\r\n              <GettingStartedGoogleMap\r\n                containerElement={<div style={{ height: `100%` }} />}\r\n                mapElement={<div style={{ height: `100%` }} />}\r\n                defaultZoom={defaultZoom}\r\n                defaultCenter={defaultCenter}\r\n                onClick={this.onMapClick.bind(this)}\r\n                markers={this.state.lat!=0 && this.state.lng!=0? <Marker position={{lat: this.state.lat, lng: this.state.lng}}/> : \"\"}\r\n              />\r\n            </section>\r\n            <ControlLabel>Latitude</ControlLabel>\r\n            <FormControl type=\"text\" value={this.state.lat} placeholder=\"Latitude\" onChange={this.onLatChanged.bind(this)} />\r\n            <ControlLabel>Longitude</ControlLabel>\r\n            <FormControl type=\"text\" value={this.state.lng} placeholder=\"Longitude\" onChange={this.onLngChanged.bind(this)} />\r\n          </FormGroup>\r\n          <ButtonGroup><Button bsStyle=\"danger\" onClick={this.onCancel.bind(this)}>Cancel</Button><Button type=\"submit\" bsStyle=\"success\" disabled={this.state.isSaving}>{this.state.isSaving? 'Saving...' : 'Save problem'}</Button></ButtonGroup>\r\n        </form>\r\n      </Well>\r\n    );\r\n  }\r\n}\r\n","import React, {Component} from 'react';\r\nimport Dropzone from 'react-dropzone';\r\nimport Request from 'superagent';\r\nimport { Grid, Row, Col, Thumbnail, MenuItem, Button, FormControl, FormGroup, ControlLabel } from 'react-bootstrap';\r\nimport config from '../../../utils/config.js';\r\n\r\nclass Text extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {searchResults: [], value: ''};\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n    this.setState({value: nextProps.value});\r\n  }\r\n\r\n  inputChange(e) {\r\n    const value = e.target.value;\r\n    this.props.onValueChanged(this.props.m, value);\r\n    if (value.length>0) {\r\n      Request.get(config.getUrl(\"users/search?value=\" + value)).withCredentials().end((err, res) => {\r\n        if (err) {\r\n          console.log(err);\r\n        }\r\n        const sr = res.body.filter(u => u.name.toUpperCase() !== value.toUpperCase());\r\n        this.setState({searchResults: sr});\r\n      });\r\n    }\r\n    else {\r\n      this.setState({searchResults: []});\r\n    }\r\n  }\r\n\r\n  menuItemSelect(user, event) {\r\n    this.setState({searchResults: []});\r\n    this.props.onValueChanged(this.props.m, user.name);\r\n  }\r\n\r\n  render() {\r\n    var searchResults = null;\r\n    if (this.state.searchResults.length>0) {\r\n      const rows = this.state.searchResults.map((u, i) => <MenuItem key={i} href=\"#\" onSelect={this.menuItemSelect.bind(this, u)}>{u.name}</MenuItem>);\r\n      searchResults=(\r\n        <div>\r\n          <ul className=\"dropdown-menu open\" style={{position: 'absolute', display: 'inline'}}>\r\n            {rows}\r\n          </ul>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <div style={{position: 'relative', width: '100%'}}>\r\n        <div style={{width: '100%'}}>\r\n          <FormControl style={{display: 'inline-block'}} type=\"text\" placeholder={this.props.placeholder} value={this.state.value} onChange={this.inputChange.bind(this)} />\r\n        </div>\r\n        {searchResults}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default class ImageUpload extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {media: []};\r\n  }\r\n\r\n  onDrop(files) {\r\n    const allMedia = this.state.media;\r\n    files.forEach(f => allMedia.push({file: f}));\r\n    this.setState({media: allMedia});\r\n    this.props.onMediaChanged(allMedia);\r\n  }\r\n\r\n  onPhotographerChanged(m, name) {\r\n    m.photographer=name;\r\n    this.props.onMediaChanged(this.state.media);\r\n  }\r\n\r\n  onInPhotoChanged(m, name) {\r\n    m.inPhoto=name;\r\n    this.props.onMediaChanged(this.state.media);\r\n  }\r\n\r\n  onRemove(toRemove) {\r\n    const allMedia = this.state.media.filter(m => m!=toRemove);\r\n    this.setState({media: allMedia});\r\n    this.props.onMediaChanged(allMedia);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <FormGroup>\r\n        <ControlLabel>Upload image(s)</ControlLabel><br/>\r\n        <Dropzone\r\n          onDrop={this.onDrop.bind(this)}\r\n          style={{width: '220px', height: '75px', padding: '15px', borderWidth: '1px', borderColor: '#666', borderStyle: 'dashed', borderRadius: '5px'}}\r\n          accept={'image/*'}>\r\n          <i>Drop JPG-image(s) here or click to select files to upload.</i>\r\n        </Dropzone>\r\n        {this.state.media.length > 0 ?\r\n          <Grid>\r\n            <Row>\r\n              {this.state.media.map((m, i) =>\r\n                <Col key={i} xs={8} sm={6} md={4} lg={2}>\r\n                  <Thumbnail src={m.file.preview}>\r\n                    <Text m={m} placeholder='In photo' value={m? m.inPhoto : ''}  onValueChanged={this.onInPhotoChanged.bind(this)} />\r\n                    <Text m={m} placeholder='Photographer' value={m? m.photographer : ''} onValueChanged={this.onPhotographerChanged.bind(this)} />\r\n                    <Button style={{width: '100%'}} bsStyle='danger' onClick={this.onRemove.bind(this, m)}>Remove</Button>\r\n                  </Thumbnail>\r\n                </Col>\r\n              )}\r\n            </Row>\r\n          </Grid>\r\n          : null}\r\n      </FormGroup>\r\n    );\r\n  }\r\n}\r\n","import React from 'react';\r\nimport createClass from 'create-react-class';\r\nimport PropTypes from 'prop-types';\r\nimport Select from 'react-select';\r\nimport Request from 'superagent';\r\nimport config from '../../../utils/config.js';\r\n\r\nvar UserSelector = createClass({\r\n\tdisplayName: 'UserSelector',\r\n\tpropTypes: {\r\n\t\tlabel: PropTypes.string\r\n\t},\r\n\tgetInitialState() {\r\n    Request.get(config.getUrl(\"users/search?value=\")).withCredentials().end((err, res) => {\r\n      if (err) {\r\n        console.log(err);\r\n      } else {\r\n        this.setState({options: res.body.map(u => {return {value: u.id, label: u.name}})});\r\n      }\r\n    });\r\n    return {\r\n      multiValue: this.props.users,\r\n      options: []\r\n    };\r\n\t},\r\n\thandleOnChange(value) {\r\n    this.props.onUsersUpdated(value);\r\n\t\tthis.setState({multiValue: value});\r\n\t},\r\n\trender() {\r\n\t\treturn (\r\n      <div style={{position: 'relative', width: '100%'}}>\r\n        <div style={{width: '100%'}}>\r\n  \t\t\t\t<Select.Creatable\r\n  \t\t\t\t\tmulti={true}\r\n  \t\t\t\t\toptions={this.state.options}\r\n  \t\t\t\t\tonChange={this.handleOnChange}\r\n  \t\t\t\t\tvalue={this.state.multiValue}\r\n  \t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n});\r\n\r\nmodule.exports = UserSelector;\r\n"],"sourceRoot":""}