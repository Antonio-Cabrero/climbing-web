{"version":3,"sources":["webpack:///./app/components/logout.js","webpack:///./app/utils/config.js","webpack:///./app/utils/auth.js","webpack:///./app/utils/cookie-helper.js"],"names":["_react","__webpack_require__","i","l","r","a","_reactBootstrap","e","__esModule","default","Logout","_auth2","logout","_react2","createElement","Panel","bsStyle","n","module","exports","getUrl","str","window","location","hostname","getTitle","getRegion","getDefaultCenter","lat","lng","getDefaultZoom","convertFromDateToString","date","d","getDate","m","getMonth","getFullYear","o","login","username","password","cb","_this","this","arguments","length","setTimeout","_superagent2","post","_config2","type","withCredentials","send","regionId","set","end","err","res","console","log","authenticated","admin","superadmin","lvl","parseInt","text","_cookieHelper2","setItem","onChange","getToken","getItem","_this2","get","removeItem","loggedIn","hasItem","isAdmin","isSuperAdmin","87","t","docCookies","sKey","decodeURIComponent","document","cookie","replace","RegExp","encodeURIComponent","sValue","vEnd","sPath","sDomain","bSecure","test","sExpires","constructor","Number","Infinity","String","Date","toUTCString","keys","aKeys","split","nLen","nIdx"],"mappings":"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","file":"19.index.js","sourcesContent":["import React, {Component} from 'react';\r\nimport auth from '../utils/auth.js';\r\nimport { Panel } from 'react-bootstrap';\r\n\r\nexport default class Logout extends Component {\r\n  componentDidMount() {\r\n    auth.logout();\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Panel bsStyle='success'>Logged out</Panel>\r\n    );\r\n  }\r\n}\r\n","module.exports = {\r\n  getUrl(str) {\r\n    if (window.location.hostname=='buldring.bergen-klatreklubb.no') {\r\n      return \"https://buldring.bergen-klatreklubb.no/com.buldreinfo.jersey.jaxb/v1/\" + str;\r\n    } else if (window.location.hostname=='buldring.fredrikstadklatreklubb.org') {\r\n      return \"https://buldring.fredrikstadklatreklubb.org/com.buldreinfo.jersey.jaxb/v1/\" + str;\r\n    } else if (window.location.hostname=='brattelinjer.no') {\r\n      return \"https://brattelinjer.no/com.buldreinfo.jersey.jaxb/v1/\" + str;\r\n    } else if (window.location.hostname=='dev.jossi.org') {\r\n      return \"https://dev.jossi.org/com.buldreinfo.jersey.jaxb/v1/\" + str;\r\n    } else {\r\n      return \"https://buldreinfo.com/com.buldreinfo.jersey.jaxb/v1/\" + str;\r\n    }\r\n  },\r\n\r\n  getTitle() {\r\n    if (window.location.hostname=='buldring.bergen-klatreklubb.no') {\r\n      return \"Buldring i Hordaland\";\r\n    } else if (window.location.hostname=='buldring.fredrikstadklatreklubb.org') {\r\n      return \"Buldring i Fredrikstad\";\r\n    } else if (window.location.hostname=='brattelinjer.no') {\r\n      return \"Bratte linjer\";\r\n    } else if (window.location.hostname=='dev.jossi.org') {\r\n      return \"Bratte linjer (dev)\";\r\n    } else {\r\n      return \"buldreinfo\";\r\n    }\r\n  },\r\n\r\n  getRegion() {\r\n    if (window.location.hostname=='buldring.bergen-klatreklubb.no') {\r\n      return \"2\";\r\n    } else if (window.location.hostname=='buldring.fredrikstadklatreklubb.org') {\r\n      return \"3\";\r\n    } else if (window.location.hostname=='brattelinjer.no') {\r\n      return \"4\";\r\n    } else if (window.location.hostname=='dev.jossi.org') {\r\n      return \"4\";\r\n    } else {\r\n      return \"1\";\r\n    }\r\n  },\r\n\r\n  getDefaultCenter() {\r\n    if (window.location.hostname=='buldring.bergen-klatreklubb.no') {\r\n      return {lat: 60.47521, lng: 6.83169};\r\n    } else if (window.location.hostname=='buldring.fredrikstadklatreklubb.org') {\r\n      return {lat: 59.22844, lng: 10.91722};\r\n    } else {\r\n      return {lat: 58.78119, lng: 5.86361};\r\n    }\r\n  },\r\n\r\n  getDefaultZoom() {\r\n    if (window.location.hostname=='brattelinjer.no') {\r\n      return 9;\r\n    } else if (window.location.hostname=='dev.jossi.org') {\r\n      return 9;\r\n    } else {\r\n      return 7;\r\n    }\r\n  },\r\n\r\n  convertFromDateToString(date) {\r\n    var d = date.getDate();\r\n    var m = date.getMonth() + 1;\r\n    var y = date.getFullYear();\r\n    return y + '-' + (m <= 9 ? '0' + m : m) + '-' + (d <= 9 ? '0' + d : d);\r\n  }\r\n}\r\n","import CookieHelper from './cookie-helper';\r\nimport Request from 'superagent';\r\nimport config from './config.js';\r\n\r\nmodule.exports = {\r\n  login(username, password, cb) {\r\n    cb = arguments[arguments.length - 1]\r\n    tryLogin(username, password, (res) => {\r\n      if (res.authenticated) {\r\n        CookieHelper.setItem('buldreinfo_is_admin', res.admin);\r\n        CookieHelper.setItem('buldreinfo_is_super_admin', res.superadmin);\r\n        if (cb) cb(true)\r\n        this.onChange(true)\r\n      } else {\r\n        if (cb) cb(false)\r\n        this.onChange(false)\r\n      }\r\n    })\r\n  },\r\n\r\n  getToken: function () {\r\n    return CookieHelper.getItem('buldreinfo');\r\n  },\r\n\r\n  logout: function (cb) {\r\n    Request.get(config.getUrl(\"logout\")).withCredentials().end((err, res) => {\r\n      if (err) {\r\n        console.log(err);\r\n      } else {\r\n        console.log(\"Logged out\");\r\n      }\r\n      CookieHelper.removeItem('buldreinfo');\r\n      if (cb) cb();\r\n      this.onChange(false);\r\n    });\r\n  },\r\n\r\n  loggedIn: function () {\r\n    return CookieHelper.hasItem('buldreinfo');\r\n  },\r\n\r\n  isAdmin: function () {\r\n    if (CookieHelper.hasItem('buldreinfo_is_admin')) {\r\n      return (CookieHelper.getItem('buldreinfo_is_admin')=='true');\r\n    }\r\n    return false;\r\n  },\r\n\r\n  isSuperAdmin: function () {\r\n    if (CookieHelper.hasItem('buldreinfo_is_super_admin')) {\r\n      return (CookieHelper.getItem('buldreinfo_is_super_admin')=='true');\r\n    }\r\n    return false;\r\n  },\r\n\r\n  onChange: function () {}\r\n}\r\n\r\nfunction tryLogin(username, password, cb) {\r\n  setTimeout(() => {\r\n    Request.post(config.getUrl(\"users/login\"))\r\n    .type('form')\r\n    .withCredentials()\r\n    .send({username: username})\r\n    .send({password: password})\r\n    .send({regionId: config.getRegion()})\r\n    .set('Accept', 'application/json')\r\n    .end((err, res) => {\r\n      if (err) {\r\n        console.log(err);\r\n        cb({ authenticated: false, admin: false, superadmin: false });\r\n      } else {\r\n        const lvl = parseInt(res.text);\r\n        cb({ authenticated: true, admin: lvl>=1, superadmin: lvl===2 });\r\n      }\r\n    });\r\n  }, 0)\r\n}\r\n","/*\\\r\n |*|\r\n |*|  :: cookies.js ::\r\n |*|\r\n |*|  A complete cookies reader/writer framework with full unicode support.\r\n |*|\r\n |*|  Revision #1 - September 4, 2014\r\n |*|\r\n |*|  https://developer.mozilla.org/en-US/docs/Web/API/document.cookie\r\n |*|  https://developer.mozilla.org/User:fusionchess\r\n |*|\r\n |*|  This framework is released under the GNU Public License, version 3 or later.\r\n |*|  http://www.gnu.org/licenses/gpl-3.0-standalone.html\r\n |*|\r\n |*|  Syntaxes:\r\n |*|\r\n |*|  * docCookies.setItem(name, value[, end[, path[, domain[, secure]]]])\r\n |*|  * docCookies.getItem(name)\r\n |*|  * docCookies.removeItem(name[, path[, domain]])\r\n |*|  * docCookies.hasItem(name)\r\n |*|  * docCookies.keys()\r\n |*|\r\n \\*/\r\n\r\nvar docCookies = {\r\n    getItem: function (sKey) {\r\n        if (!sKey) { return null; }\r\n        return decodeURIComponent(document.cookie.replace(new RegExp(\"(?:(?:^|.*;)\\\\s*\" + encodeURIComponent(sKey).replace(/[\\-\\.\\+\\*]/g, \"\\\\$&\") + \"\\\\s*\\\\=\\\\s*([^;]*).*$)|^.*$\"), \"$1\")) || null;\r\n    },\r\n    setItem: function (sKey, sValue, vEnd, sPath, sDomain, bSecure) {\r\n        if (!sKey || /^(?:expires|max\\-age|path|domain|secure)$/i.test(sKey)) { return false; }\r\n        var sExpires = \"\";\r\n        if (vEnd) {\r\n            switch (vEnd.constructor) {\r\n                case Number:\r\n                    sExpires = vEnd === Infinity ? \"; expires=Fri, 31 Dec 9999 23:59:59 GMT\" : \"; max-age=\" + vEnd;\r\n                    break;\r\n                case String:\r\n                    sExpires = \"; expires=\" + vEnd;\r\n                    break;\r\n                case Date:\r\n                    sExpires = \"; expires=\" + vEnd.toUTCString();\r\n                    break;\r\n            }\r\n        }\r\n        document.cookie = encodeURIComponent(sKey) + \"=\" + encodeURIComponent(sValue) + sExpires + (sDomain ? \"; domain=\" + sDomain : \"\") + (sPath ? \"; path=\" + sPath : \"\") + (bSecure ? \"; secure\" : \"\");\r\n        return true;\r\n    },\r\n    removeItem: function (sKey, sPath, sDomain) {\r\n        if (!this.hasItem(sKey)) { return false; }\r\n        document.cookie = encodeURIComponent(sKey) + \"=; expires=Thu, 01 Jan 1970 00:00:00 GMT\" + (sDomain ? \"; domain=\" + sDomain : \"\") + (sPath ? \"; path=\" + sPath : \"\");\r\n        return true;\r\n    },\r\n    hasItem: function (sKey) {\r\n        if (!sKey) { return false; }\r\n        return (new RegExp(\"(?:^|;\\\\s*)\" + encodeURIComponent(sKey).replace(/[\\-\\.\\+\\*]/g, \"\\\\$&\") + \"\\\\s*\\\\=\")).test(document.cookie);\r\n    },\r\n    keys: function () {\r\n        var aKeys = document.cookie.replace(/((?:^|\\s*;)[^\\=]+)(?=;|$)|^\\s*|\\s*(?:\\=[^;]*)?(?:\\1|$)/g, \"\").split(/\\s*(?:\\=[^;]*)?;\\s*/);\r\n        for (var nLen = aKeys.length, nIdx = 0; nIdx < nLen; nIdx++) { aKeys[nIdx] = decodeURIComponent(aKeys[nIdx]); }\r\n        return aKeys;\r\n    }\r\n};\r\n\r\nmodule.exports = docCookies;\r\n"],"sourceRoot":""}