{"version":3,"sources":["webpack:///./app/components/register.js"],"names":["_react","__webpack_require__","l","c","r","_reactRouterDom","_reactRouter","u","_reactBootstrap","d","e","__esModule","default","Register","props","this","_this","__proto__","Object","getPrototypeOf","call","document","title","config","getTitle","state","message","firstname","lastname","username","password","password2","Component","event","_this2","preventDefault","validateFirstname","setState","_react2","createElement","Panel","bsStyle","validateLastname","validateUsername","validatePassword","validatePassword2","Request","post","getUrl","withCredentials","send","set","end","err","res","toString","pushUrl","key","value","target","length","test","Redirect","to","push","Breadcrumb","Link","color","Well","onSubmit","register","bind","FormGroup","controlId","validationState","ControlLabel","FormControl","type","placeholder","onChange","onFirstnameChanged","Feedback","onLastnameChanged","onUsernameChanged","HelpBlock","onPasswordChanged","onConfirmPasswordChanged","ButtonGroup","Button","t"],"mappings":"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","file":"12.index.js","sourcesContent":["import React, {Component} from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { Redirect } from 'react-router';\r\nimport Request from 'superagent';\r\nimport { FormGroup, ControlLabel, FormControl, HelpBlock, ButtonGroup, Button, Panel, Breadcrumb, Well } from 'react-bootstrap';\r\nimport auth from '../utils/auth.js';\r\nimport config from '../utils/config.js';\r\n\r\nexport default class Register extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    document.title=config.getTitle(\"Register\");\r\n    this.state = {\r\n      message: null,\r\n      firstname: '',\r\n      lastname: '',\r\n      username: '',\r\n      password: '',\r\n      password2: ''\r\n    };\r\n  }\r\n\r\n  register(event) {\r\n    event.preventDefault();\r\n    if (this.validateFirstname(null)==='error') {\r\n      this.setState({message: <Panel bsStyle='danger'>Invalid firstname.</Panel>});\r\n    } else if (this.validateLastname(null)==='error') {\r\n      this.setState({message: <Panel bsStyle='danger'>Invalid lastname.</Panel>});\r\n    } else if (this.validateUsername(null)==='error') {\r\n      this.setState({message: <Panel bsStyle='danger'>Invalid username.</Panel>});\r\n    } else if (this.validatePassword(null)==='error' || this.validatePassword2(null)==='error') {\r\n      this.setState({message: <Panel bsStyle='danger'>Invalid password.</Panel>});\r\n    } else {\r\n      Request.post(config.getUrl(\"users/register\"))\r\n      .withCredentials()\r\n      .send({firstname: this.state.firstname, lastname: this.state.lastname, username: this.state.username, password: this.state.password})\r\n      .set('Accept', 'application/json')\r\n      .end((err, res) => {\r\n        if (err) {\r\n          this.setState({message: <Panel bsStyle='danger'>{err.toString()}</Panel>});\r\n        } else {\r\n          this.setState({message: <Panel bsStyle='success'>User registered</Panel>, pushUrl: \"/login\"});\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  onFirstnameChanged(e) {\r\n    this.setState({firstname: e.target.value});\r\n  }\r\n\r\n  onLastnameChanged(e) {\r\n    this.setState({lastname: e.target.value});\r\n  }\r\n\r\n  onUsernameChanged(e) {\r\n    this.setState({username: e.target.value});\r\n  }\r\n\r\n  onPasswordChanged(e) {\r\n    this.setState({password: e.target.value});\r\n  }\r\n\r\n  onConfirmPasswordChanged(e) {\r\n    this.setState({password2: e.target.value});\r\n  }\r\n\r\n  validateFirstname() {\r\n    if (this.state.firstname.length < 1) {\r\n      return 'error';\r\n    }\r\n    return 'success';\r\n  }\r\n\r\n  validateLastname() {\r\n    if (this.state.lastname.length < 1) {\r\n      return 'error';\r\n    }\r\n    return 'success';\r\n  }\r\n\r\n  validateUsername() {\r\n    var re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n    if (!re.test(this.state.username)) {\r\n      return 'error';\r\n    }\r\n    return 'success';\r\n  }\r\n\r\n  validatePassword() {\r\n    if (this.state.password.length < 8) {\r\n      return 'error';\r\n    }\r\n    return 'success';\r\n  }\r\n\r\n  validatePassword2() {\r\n    if (this.state.password2.length < 8 || this.state.password!=this.state.password2) {\r\n      return 'error';\r\n    }\r\n    return 'success';\r\n  }\r\n\r\n  render() {\r\n    if (this.state && this.state.pushUrl) {\r\n      return (<Redirect to={this.state.pushUrl} push />);\r\n    }\r\n    return (\r\n      <span>\r\n        <Breadcrumb>\r\n          <Link to={`/`}>Home</Link> / <font color='#777'>Register</font>\r\n        </Breadcrumb>\r\n        <Well>\r\n          {this.state.message}\r\n          <form onSubmit={this.register.bind(this)}>\r\n            <FormGroup controlId=\"formControlsFirstname\" validationState={this.validateFirstname()}>\r\n              <ControlLabel>Firstname</ControlLabel>\r\n              <FormControl type=\"text\" placeholder=\"Enter firstname\" onChange={this.onFirstnameChanged.bind(this)} />\r\n              <FormControl.Feedback />\r\n            </FormGroup>\r\n            <FormGroup controlId=\"formControlsLastname\" validationState={this.validateLastname()}>\r\n              <ControlLabel>Lastname</ControlLabel>\r\n              <FormControl type=\"text\" placeholder=\"Enter lastname\" onChange={this.onLastnameChanged.bind(this)} />\r\n              <FormControl.Feedback />\r\n            </FormGroup>\r\n            <FormGroup controlId=\"formControlsUsername\" validationState={this.validateUsername()}>\r\n              <ControlLabel>Username</ControlLabel>\r\n              <FormControl type=\"email\" placeholder=\"Enter username\" onChange={this.onUsernameChanged.bind(this)} />\r\n              <FormControl.Feedback />\r\n              <HelpBlock>You must enter a valid email address.</HelpBlock>\r\n            </FormGroup>\r\n            <FormGroup controlId=\"formControlsPassword\" validationState={this.validatePassword()}>\r\n              <ControlLabel>Password</ControlLabel>\r\n              <FormControl type=\"password\" placeholder=\"Enter password\" onChange={this.onPasswordChanged.bind(this)} />\r\n              <FormControl.Feedback />\r\n              <HelpBlock>At least 8 characters.</HelpBlock>\r\n            </FormGroup>\r\n            <FormGroup controlId=\"formControlsPassword2\" validationState={this.validatePassword2()}>\r\n              <ControlLabel>Confirm password</ControlLabel>\r\n              <FormControl type=\"password\" placeholder=\"Confirm password\" onChange={this.onConfirmPasswordChanged.bind(this)} />\r\n              <FormControl.Feedback />\r\n              <HelpBlock>Must match password field.</HelpBlock>\r\n            </FormGroup>\r\n            <ButtonGroup>\r\n              <Button type=\"submit\" bsStyle=\"success\">Register</Button>\r\n            </ButtonGroup>\r\n          </form>\r\n        </Well>\r\n      </span>\r\n    );\r\n  }\r\n}\r\n"],"sourceRoot":""}