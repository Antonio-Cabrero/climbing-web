{"version":3,"sources":["webpack:///./app/components/register.js"],"names":["_react","__webpack_require__","s","c","r","_reactRouterDom","_reactRouter","u","_reactBootstrap","d","e","__esModule","default","Register","props","this","_this","__proto__","Object","getPrototypeOf","call","document","title","_config2","getTitle","state","message","firstname","lastname","username","password","password2","event","_this2","preventDefault","validateFirstname","setState","_react2","createElement","Panel","bsStyle","validateLastname","validateUsername","validatePassword","validatePassword2","_superagent2","post","getUrl","withCredentials","send","set","end","err","res","toString","pushUrl","key","value","target","length","test","Redirect","to","push","Breadcrumb","Link","color","Well","onSubmit","register","bind","FormGroup","controlId","validationState","ControlLabel","FormControl","type","placeholder","onChange","onFirstnameChanged","Feedback","onLastnameChanged","onUsernameChanged","HelpBlock","onPasswordChanged","onConfirmPasswordChanged","ButtonGroup","Button","t"],"mappings":"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","file":"12.index.js","sourcesContent":["import React, {Component} from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { Redirect } from 'react-router';\r\nimport Request from 'superagent';\r\nimport { FormGroup, ControlLabel, FormControl, HelpBlock, ButtonGroup, Button, Panel, Breadcrumb, Well } from 'react-bootstrap';\r\nimport auth from '../utils/auth.js';\r\nimport config from '../utils/config.js';\r\n\r\nexport default class Register extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    document.title=config.getTitle() + \" | Register\";\r\n    this.state = {\r\n      message: null,\r\n      firstname: '',\r\n      lastname: '',\r\n      username: '',\r\n      password: '',\r\n      password2: ''\r\n    };\r\n  }\r\n\r\n  register(event) {\r\n    event.preventDefault();\r\n    if (this.validateFirstname(null)==='error') {\r\n      this.setState({message: <Panel bsStyle='danger'>Invalid firstname.</Panel>});\r\n    } else if (this.validateLastname(null)==='error') {\r\n      this.setState({message: <Panel bsStyle='danger'>Invalid lastname.</Panel>});\r\n    } else if (this.validateUsername(null)==='error') {\r\n      this.setState({message: <Panel bsStyle='danger'>Invalid username.</Panel>});\r\n    } else if (this.validatePassword(null)==='error' || this.validatePassword2(null)==='error') {\r\n      this.setState({message: <Panel bsStyle='danger'>Invalid password.</Panel>});\r\n    } else {\r\n      Request.post(config.getUrl(\"users/register\"))\r\n      .withCredentials()\r\n      .send({firstname: this.state.firstname, lastname: this.state.lastname, username: this.state.username, password: this.state.password})\r\n      .set('Accept', 'application/json')\r\n      .end((err, res) => {\r\n        if (err) {\r\n          this.setState({message: <Panel bsStyle='danger'>{err.toString()}</Panel>});\r\n        } else {\r\n          this.setState({message: <Panel bsStyle='success'>User registered</Panel>, pushUrl: \"/login\"});\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  onFirstnameChanged(e) {\r\n    this.setState({firstname: e.target.value});\r\n  }\r\n\r\n  onLastnameChanged(e) {\r\n    this.setState({lastname: e.target.value});\r\n  }\r\n\r\n  onUsernameChanged(e) {\r\n    this.setState({username: e.target.value});\r\n  }\r\n\r\n  onPasswordChanged(e) {\r\n    this.setState({password: e.target.value});\r\n  }\r\n\r\n  onConfirmPasswordChanged(e) {\r\n    this.setState({password2: e.target.value});\r\n  }\r\n\r\n  validateFirstname() {\r\n    if (this.state.firstname.length < 1) {\r\n      return 'error';\r\n    }\r\n    return 'success';\r\n  }\r\n\r\n  validateLastname() {\r\n    if (this.state.lastname.length < 1) {\r\n      return 'error';\r\n    }\r\n    return 'success';\r\n  }\r\n\r\n  validateUsername() {\r\n    var re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n    if (!re.test(this.state.username)) {\r\n      return 'error';\r\n    }\r\n    return 'success';\r\n  }\r\n\r\n  validatePassword() {\r\n    if (this.state.password.length < 8) {\r\n      return 'error';\r\n    }\r\n    return 'success';\r\n  }\r\n\r\n  validatePassword2() {\r\n    if (this.state.password2.length < 8 || this.state.password!=this.state.password2) {\r\n      return 'error';\r\n    }\r\n    return 'success';\r\n  }\r\n\r\n  render() {\r\n    if (this.state && this.state.pushUrl) {\r\n      return (<Redirect to={this.state.pushUrl} push />);\r\n    }\r\n    return (\r\n      <span>\r\n        <Breadcrumb>\r\n          <Link to={`/`}>Home</Link> / <font color='#777'>Register</font>\r\n        </Breadcrumb>\r\n        <Well>\r\n          {this.state.message}\r\n          <form onSubmit={this.register.bind(this)}>\r\n            <FormGroup controlId=\"formControlsFirstname\" validationState={this.validateFirstname()}>\r\n              <ControlLabel>Firstname</ControlLabel>\r\n              <FormControl type=\"text\" placeholder=\"Enter firstname\" onChange={this.onFirstnameChanged.bind(this)} />\r\n              <FormControl.Feedback />\r\n            </FormGroup>\r\n            <FormGroup controlId=\"formControlsLastname\" validationState={this.validateLastname()}>\r\n              <ControlLabel>Lastname</ControlLabel>\r\n              <FormControl type=\"text\" placeholder=\"Enter lastname\" onChange={this.onLastnameChanged.bind(this)} />\r\n              <FormControl.Feedback />\r\n            </FormGroup>\r\n            <FormGroup controlId=\"formControlsUsername\" validationState={this.validateUsername()}>\r\n              <ControlLabel>Username</ControlLabel>\r\n              <FormControl type=\"email\" placeholder=\"Enter username\" onChange={this.onUsernameChanged.bind(this)} />\r\n              <FormControl.Feedback />\r\n              <HelpBlock>You must enter a valid email address.</HelpBlock>\r\n            </FormGroup>\r\n            <FormGroup controlId=\"formControlsPassword\" validationState={this.validatePassword()}>\r\n              <ControlLabel>Password</ControlLabel>\r\n              <FormControl type=\"password\" placeholder=\"Enter password\" onChange={this.onPasswordChanged.bind(this)} />\r\n              <FormControl.Feedback />\r\n              <HelpBlock>At least 8 characters.</HelpBlock>\r\n            </FormGroup>\r\n            <FormGroup controlId=\"formControlsPassword2\" validationState={this.validatePassword2()}>\r\n              <ControlLabel>Confirm password</ControlLabel>\r\n              <FormControl type=\"password\" placeholder=\"Confirm password\" onChange={this.onConfirmPasswordChanged.bind(this)} />\r\n              <FormControl.Feedback />\r\n              <HelpBlock>Must match password field.</HelpBlock>\r\n            </FormGroup>\r\n            <ButtonGroup>\r\n              <Button type=\"submit\" bsStyle=\"success\">Register</Button>\r\n            </ButtonGroup>\r\n          </form>\r\n        </Well>\r\n      </span>\r\n    );\r\n  }\r\n}\r\n"],"sourceRoot":""}