{"version":3,"sources":["webpack:///./app/components/register.js"],"names":["_react","__webpack_require__","l","m","r","s","_reactRouterDom","_reactRouter","i","_reactBootstrap","c","e","__esModule","default","Register","props","this","_this","__proto__","Object","getPrototypeOf","call","state","message","firstname","lastname","username","password","password2","Component","event","_this2","preventDefault","validateFirstname","setState","_react2","createElement","Panel","bsStyle","validateLastname","validateUsername","validatePassword","validatePassword2","Request","post","config","getUrl","withCredentials","send","set","end","err","res","toString","pushUrl","key","value","target","length","test","Redirect","to","push","_reactMetaTags2","getTitle","Breadcrumb","Link","color","Well","onSubmit","register","bind","FormGroup","controlId","validationState","ControlLabel","FormControl","type","placeholder","onChange","onFirstnameChanged","Feedback","onLastnameChanged","onUsernameChanged","HelpBlock","onPasswordChanged","onConfirmPasswordChanged","ButtonGroup","Button","t"],"mappings":"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","file":"12.index.js","sourcesContent":["import React, {Component} from 'react';\r\nimport MetaTags from 'react-meta-tags';\r\nimport { Link } from 'react-router-dom';\r\nimport { Redirect } from 'react-router';\r\nimport Request from 'superagent';\r\nimport { FormGroup, ControlLabel, FormControl, HelpBlock, ButtonGroup, Button, Panel, Breadcrumb, Well } from 'react-bootstrap';\r\nimport auth from '../utils/auth.js';\r\nimport config from '../utils/config.js';\r\n\r\nexport default class Register extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      message: null,\r\n      firstname: '',\r\n      lastname: '',\r\n      username: '',\r\n      password: '',\r\n      password2: ''\r\n    };\r\n  }\r\n\r\n  register(event) {\r\n    event.preventDefault();\r\n    if (this.validateFirstname(null)==='error') {\r\n      this.setState({message: <Panel bsStyle='danger'>Invalid firstname.</Panel>});\r\n    } else if (this.validateLastname(null)==='error') {\r\n      this.setState({message: <Panel bsStyle='danger'>Invalid lastname.</Panel>});\r\n    } else if (this.validateUsername(null)==='error') {\r\n      this.setState({message: <Panel bsStyle='danger'>Invalid username.</Panel>});\r\n    } else if (this.validatePassword(null)==='error' || this.validatePassword2(null)==='error') {\r\n      this.setState({message: <Panel bsStyle='danger'>Invalid password.</Panel>});\r\n    } else {\r\n      Request.post(config.getUrl(\"users/register\"))\r\n      .withCredentials()\r\n      .send({firstname: this.state.firstname, lastname: this.state.lastname, username: this.state.username, password: this.state.password})\r\n      .set('Accept', 'application/json')\r\n      .end((err, res) => {\r\n        if (err) {\r\n          this.setState({message: <Panel bsStyle='danger'>{err.toString()}</Panel>});\r\n        } else {\r\n          this.setState({message: <Panel bsStyle='success'>User registered</Panel>, pushUrl: \"/login\"});\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  onFirstnameChanged(e) {\r\n    this.setState({firstname: e.target.value});\r\n  }\r\n\r\n  onLastnameChanged(e) {\r\n    this.setState({lastname: e.target.value});\r\n  }\r\n\r\n  onUsernameChanged(e) {\r\n    this.setState({username: e.target.value});\r\n  }\r\n\r\n  onPasswordChanged(e) {\r\n    this.setState({password: e.target.value});\r\n  }\r\n\r\n  onConfirmPasswordChanged(e) {\r\n    this.setState({password2: e.target.value});\r\n  }\r\n\r\n  validateFirstname() {\r\n    if (this.state.firstname.length < 1) {\r\n      return 'error';\r\n    }\r\n    return 'success';\r\n  }\r\n\r\n  validateLastname() {\r\n    if (this.state.lastname.length < 1) {\r\n      return 'error';\r\n    }\r\n    return 'success';\r\n  }\r\n\r\n  validateUsername() {\r\n    var re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n    if (!re.test(this.state.username)) {\r\n      return 'error';\r\n    }\r\n    return 'success';\r\n  }\r\n\r\n  validatePassword() {\r\n    if (this.state.password.length < 8) {\r\n      return 'error';\r\n    }\r\n    return 'success';\r\n  }\r\n\r\n  validatePassword2() {\r\n    if (this.state.password2.length < 8 || this.state.password!=this.state.password2) {\r\n      return 'error';\r\n    }\r\n    return 'success';\r\n  }\r\n\r\n  render() {\r\n    if (this.state && this.state.pushUrl) {\r\n      return (<Redirect to={this.state.pushUrl} push />);\r\n    }\r\n    return (\r\n      <span>\r\n        <MetaTags>\r\n          <title>{config.getTitle(\"Register\")}</title>\r\n        </MetaTags>\r\n        <Breadcrumb>\r\n          <Link to={`/`}>Home</Link> / <font color='#777'>Register</font>\r\n        </Breadcrumb>\r\n        <Well>\r\n          {this.state.message}\r\n          <form onSubmit={this.register.bind(this)}>\r\n            <FormGroup controlId=\"formControlsFirstname\" validationState={this.validateFirstname()}>\r\n              <ControlLabel>Firstname</ControlLabel>\r\n              <FormControl type=\"text\" placeholder=\"Enter firstname\" onChange={this.onFirstnameChanged.bind(this)} />\r\n              <FormControl.Feedback />\r\n            </FormGroup>\r\n            <FormGroup controlId=\"formControlsLastname\" validationState={this.validateLastname()}>\r\n              <ControlLabel>Lastname</ControlLabel>\r\n              <FormControl type=\"text\" placeholder=\"Enter lastname\" onChange={this.onLastnameChanged.bind(this)} />\r\n              <FormControl.Feedback />\r\n            </FormGroup>\r\n            <FormGroup controlId=\"formControlsUsername\" validationState={this.validateUsername()}>\r\n              <ControlLabel>Username</ControlLabel>\r\n              <FormControl type=\"email\" placeholder=\"Enter username\" onChange={this.onUsernameChanged.bind(this)} />\r\n              <FormControl.Feedback />\r\n              <HelpBlock>You must enter a valid email address.</HelpBlock>\r\n            </FormGroup>\r\n            <FormGroup controlId=\"formControlsPassword\" validationState={this.validatePassword()}>\r\n              <ControlLabel>Password</ControlLabel>\r\n              <FormControl type=\"password\" placeholder=\"Enter password\" onChange={this.onPasswordChanged.bind(this)} />\r\n              <FormControl.Feedback />\r\n              <HelpBlock>At least 8 characters.</HelpBlock>\r\n            </FormGroup>\r\n            <FormGroup controlId=\"formControlsPassword2\" validationState={this.validatePassword2()}>\r\n              <ControlLabel>Confirm password</ControlLabel>\r\n              <FormControl type=\"password\" placeholder=\"Confirm password\" onChange={this.onConfirmPasswordChanged.bind(this)} />\r\n              <FormControl.Feedback />\r\n              <HelpBlock>Must match password field.</HelpBlock>\r\n            </FormGroup>\r\n            <ButtonGroup>\r\n              <Button type=\"submit\" bsStyle=\"success\">Register</Button>\r\n            </ButtonGroup>\r\n          </form>\r\n        </Well>\r\n      </span>\r\n    );\r\n  }\r\n}\r\n"],"sourceRoot":""}