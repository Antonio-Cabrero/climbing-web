(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{589:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(1),r=h(l),i=a(18),o=h(a(17)),s=a(12),u=a(40),c=h(a(77)),d=h(a(76)),m=h(a(24)),f=h(a(13)),p=h(a(20));function h(e){return e&&e.__esModule?e:{default:e}}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function E(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}a(19);var g=function(e){function t(){return b(this,t),y(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return E(t,l.Component),n(t,[{key:"render",value:function(){var e="";if(this.props.sector.comment)if(this.props.sector.comment.length>100){var t=r.default.createElement(s.Tooltip,{id:this.props.sector.id},this.props.sector.comment);e=r.default.createElement(s.OverlayTrigger,{key:this.props.sector.id,placement:"top",overlay:t},r.default.createElement("span",null,this.props.sector.comment.substring(0,100)+"..."))}else e=this.props.sector.comment;return r.default.createElement("tr",null,r.default.createElement("td",null,r.default.createElement(i.Link,{to:"/sector/"+this.props.sector.id},this.props.sector.name)," ",1===this.props.sector.visibility&&r.default.createElement(p.default,{icon:"lock"}),2===this.props.sector.visibility&&r.default.createElement(p.default,{icon:"user-secret"})),r.default.createElement("td",null,e),r.default.createElement("td",null,this.props.sector.numProblems))}}]),t}(),v=function(e){function t(e){b(this,t);var a=y(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={tabIndex:1},a}return E(t,l.Component),n(t,[{key:"componentDidMount",value:function(){var e=this;o.default.get(f.default.getUrl("areas?id="+this.props.match.params.areaId)).withCredentials().end(function(t,a){t?e.setState({error:t}):(e.setState({id:a.body.id,visibility:a.body.visibility,name:a.body.name,media:a.body.media,comment:a.body.comment,lat:a.body.lat,lng:a.body.lng,sectors:a.body.sectors}),document.title=f.default.getTitle()+" | "+e.state.name)})}},{key:"handleTabsSelection",value:function(e){this.setState({tabIndex:e})}},{key:"onRemoveMedia",value:function(e){var t=this.state.media.filter(function(t){return t.id!=e});this.setState({media:t})}},{key:"render",value:function(){if(!this.state.id)return r.default.createElement("center",null,r.default.createElement(p.default,{icon:"spinner",spin:!0,size:"3x"}));if(this.state.error)return r.default.createElement("span",null,r.default.createElement("h3",null,this.state.error.status),this.state.error.toString());var e=this.state.sectors.map(function(e,t){return r.default.createElement(g,{sector:e,key:t})}),t=this.state.sectors.filter(function(e){return 0!=e.lat&&0!=e.lng}).map(function(e){return{lat:e.lat,lng:e.lng,title:e.name,icon:{url:"https://maps.google.com/mapfiles/kml/shapes/parking_lot_maps.png",scaledSize:new google.maps.Size(32,32)},url:"/sector/"+e.id}}),a=this.state.sectors.filter(function(e){return e.polygonCoords}).map(function(e){return{triangleCoords:e.polygonCoords.split(";").map(function(e,t){var a=e.split(",");return{lat:parseFloat(a[0]),lng:parseFloat(a[1])}}),url:"/sector/"+e.id}}),n=this.state.lat&&this.state.lat>0?{lat:this.state.lat,lng:this.state.lng}:f.default.getDefaultCenter(),l=this.state.lat&&this.state.lat>0?14:f.default.getDefaultZoom(),o=t.length>0||a.length>0?r.default.createElement(c.default,{markers:t,polygons:a,defaultCenter:n,defaultZoom:l}):null,h=this.state.media&&this.state.media.length>0?r.default.createElement(d.default,{media:this.state.media,showThumbnails:this.state.media.length>1,removeMedia:this.onRemoveMedia.bind(this)}):null,b=null;return o&&h?b=r.default.createElement(s.Tabs,{activeKey:this.state.tabIndex,animation:!1,onSelect:this.handleTabsSelection.bind(this),id:"area_tab",unmountOnExit:!0},r.default.createElement(s.Tab,{eventKey:1,title:"Topo"},1==this.state.tabIndex&&h),r.default.createElement(s.Tab,{eventKey:2,title:"Map"},2==this.state.tabIndex&&o)):o?b=o:h&&(b=h),r.default.createElement("span",null,r.default.createElement(s.Breadcrumb,null,m.default.isAdmin()?r.default.createElement("div",{style:{float:"right"}},r.default.createElement(s.ButtonGroup,null,r.default.createElement(s.OverlayTrigger,{placement:"top",overlay:r.default.createElement(s.Tooltip,{id:-1},"Add sector")},r.default.createElement(u.LinkContainer,{to:{pathname:"/sector/edit/-1",query:{idArea:this.state.id,lat:this.state.lat,lng:this.state.lng}}},r.default.createElement(s.Button,{bsStyle:"primary",bsSize:"xsmall"},r.default.createElement(p.default,{icon:"plus-square",inverse:!0})))),r.default.createElement(s.OverlayTrigger,{placement:"top",overlay:r.default.createElement(s.Tooltip,{id:this.state.id},"Edit area")},r.default.createElement(u.LinkContainer,{to:{pathname:"/area/edit/"+this.state.id,query:{lat:this.state.lat,lng:this.state.lng}}},r.default.createElement(s.Button,{bsStyle:"primary",bsSize:"xsmall"},r.default.createElement(p.default,{icon:"edit",inverse:!0})))))):null,r.default.createElement(i.Link,{to:"/"},"Home")," / ",r.default.createElement(i.Link,{to:"/browse"},"Browse")," / ",r.default.createElement("font",{color:"#777"},this.state.name)," ",1===this.state.visibility&&r.default.createElement(p.default,{icon:"lock"}),2===this.state.visibility&&r.default.createElement(p.default,{icon:"user-secret"})),b,this.state.comment?r.default.createElement(s.Well,null,r.default.createElement("div",{dangerouslySetInnerHTML:{__html:this.state.comment}})):null,r.default.createElement(s.Table,{striped:!0,condensed:!0,hover:!0},r.default.createElement("thead",null,r.default.createElement("tr",null,r.default.createElement("th",null,"Name"),r.default.createElement("th",null,"Description"),r.default.createElement("th",null,"#problems"))),r.default.createElement("tbody",null,e)))}}]),t}();t.default=v}}]);
//# sourceMappingURL=0.index.js.map