{"version":3,"sources":["webpack:///./app/components/problem-edit.js","webpack:///./app/components/common/user-selecter/user-selecter.js"],"names":["_react","__webpack_require__","r","y","l","_reactRouter","i","_reactBootstrap","_reactGoogleMaps","d","c","f","h","m","p","e","__esModule","default","GettingStartedGoogleMap","withGoogleMap","props","_react2","createElement","GoogleMap","defaultZoom","defaultCenter","defaultMapTypeId","google","maps","MapTypeId","TERRAIN","onClick","bind","markers","ProblemEdit","_this2","this","document","title","_config2","getTitle","_superagent2","get","getUrl","getRegion","end","err","res","setState","error","grades","body","types","match","params","problemId","id","visibility","name","comment","originalGrade","fa","faDate","convertFromDateToString","Date","nr","location","query","lat","lng","newMedia","withCredentials","typeId","t","target","value","parseInt","parseFloat","newFaDate","event","_this3","preventDefault","isSaving","state","map","file","replace","photographer","inPhoto","req","post","field","JSON","stringify","sectorId","idSector","find","set","forEach","attach","pushUrl","latLng","newUsers","u","firstname","surname","window","history","back","_this4","_reactFontawesome2","icon","spin","size","status","toString","Redirect","to","push","yesterday","setDate","getDate","visibilityText","selectedType","getDefaultCenter","getDefaultZoom","Well","onSubmit","save","FormGroup","controlId","ControlLabel","FormControl","type","placeholder","onChange","onNameChanged","_reactInputCalendar2","format","computableFormat","date","onFaDateChanged","ButtonGroup","Button","DropdownButton","subType","MenuItem","key","eventKey","onSelect","onTypeIdChanged","g","onOriginalGradeChanged","grade","_userSelecter2","users","onUsersUpdated","onVisibilityChanged","_auth2","isSuperAdmin","onNrChanged","style","height","componentClass","onCommentChanged","_imageUpload2","onMediaChanged","onNewMediaChanged","containerElement","mapElement","onMapClick","Marker","position","onLatChanged","onLngChanged","bsStyle","onCancel","disabled","o","s","UserSelecter","_this","__proto__","Object","getPrototypeOf","call","searchInputValue","length","console","log","sr","filter","v","toUpperCase","searchResults","idUser","user","rows","extra","href","menuItemSelect","className","display","removeUser","width","validationState","validateInput","inputChange","Feedback"],"mappings":"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","file":"14.index.js","sourcesContent":["import React, {Component} from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { Redirect } from 'react-router'\r\nimport Request from 'superagent';\r\nimport { FormGroup, ControlLabel, FormControl, ButtonGroup, Button, DropdownButton, MenuItem, Well } from 'react-bootstrap';\r\nimport {withGoogleMap, GoogleMap, Marker} from \"react-google-maps\";\r\nimport UserSelecter from './common/user-selecter/user-selecter';\r\nimport ImageUpload from './common/image-upload/image-upload';\r\nimport config from '../utils/config.js';\r\nimport auth from '../utils/auth.js';\r\nimport Calendar from 'react-input-calendar';\r\nimport FontAwesomeIcon from '@fortawesome/react-fontawesome';\r\nimport { faSpinner } from '@fortawesome/fontawesome-free-solid';\r\n\r\nconst GettingStartedGoogleMap = withGoogleMap(props => (\r\n  <GoogleMap\r\n    defaultZoom={props.defaultZoom}\r\n    defaultCenter={props.defaultCenter}\r\n    defaultMapTypeId={google.maps.MapTypeId.TERRAIN}\r\n    onClick={props.onClick.bind(this)}>\r\n    {props.markers}\r\n  </GoogleMap>\r\n));\r\n\r\nexport default class ProblemEdit extends Component {\r\n  componentDidMount() {\r\n    document.title=config.getTitle() + \" | Problem edit\";\r\n    Request.get(config.getUrl(\"grades?regionId=\" + config.getRegion())).end((err, res) => {\r\n      this.setState({\r\n        error: err? err : null,\r\n        grades: err? null : res.body\r\n      });\r\n    });\r\n    Request.get(config.getUrl(\"types?regionId=\" + config.getRegion())).end((err, res) => {\r\n      this.setState({\r\n        error: err? err : null,\r\n        types: err? null : res.body\r\n      });\r\n    });\r\n    if (this.props.match.params.problemId==-1) {\r\n      this.setState({\r\n        id: -1,\r\n        visibility: 0,\r\n        name: \"\",\r\n        comment: \"\",\r\n        originalGrade: \"n/a\",\r\n        fa: [],\r\n        faDate: config.convertFromDateToString(new Date()),\r\n        nr: this.props.location.query.nr,\r\n        lat: 0,\r\n        lng: 0,\r\n        newMedia: []\r\n      });\r\n    } else {\r\n      Request.get(config.getUrl(\"problems?regionId=\" + config.getRegion() + \"&id=\" + this.props.match.params.problemId)).withCredentials().end((err, res) => {\r\n        if (err) {\r\n          this.setState({error: err});\r\n        } else {\r\n          this.setState({\r\n            id: res.body[0].id,\r\n            visibility: res.body[0].visibility,\r\n            name: res.body[0].name,\r\n            comment: res.body[0].comment,\r\n            originalGrade: res.body[0].originalGrade,\r\n            fa: res.body[0].fa,\r\n            faDate: res.body[0].faDate,\r\n            nr: res.body[0].nr,\r\n            typeId: res.body[0].t.id,\r\n            lat: res.body[0].lat,\r\n            lng: res.body[0].lng,\r\n            newMedia: []\r\n          });\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  onNameChanged(e) {\r\n    this.setState({name: e.target.value});\r\n  }\r\n\r\n  onNrChanged(e) {\r\n    this.setState({nr: parseInt(e.target.value)});\r\n  }\r\n\r\n  onLatChanged(e) {\r\n    this.setState({lat: parseFloat(e.target.value)});\r\n  }\r\n\r\n  onLngChanged(e) {\r\n    this.setState({lng: parseFloat(e.target.value)});\r\n  }\r\n\r\n  onVisibilityChanged(visibility, e) {\r\n    this.setState({visibility: visibility});\r\n  }\r\n\r\n  onCommentChanged(e) {\r\n    this.setState({comment: e.target.value});\r\n  }\r\n\r\n  onFaDateChanged(newFaDate) {\r\n    this.setState({faDate: newFaDate});\r\n  }\r\n\r\n  onOriginalGradeChanged(originalGrade, e) {\r\n    this.setState({originalGrade: originalGrade});\r\n  }\r\n\r\n  onTypeIdChanged(typeId, e) {\r\n    this.setState({typeId: typeId});\r\n  }\r\n\r\n  onNewMediaChanged(newMedia) {\r\n    this.setState({newMedia: newMedia});\r\n  }\r\n\r\n  save(event) {\r\n    event.preventDefault();\r\n    this.setState({isSaving: true});\r\n    const newMedia = this.state.newMedia.map(m => {return {name: m.file.name.replace(/[^-a-z0-9.]/ig,'_'), photographer: m.photographer, inPhoto: m.inPhoto}});\r\n    var req = Request.post(config.getUrl(\"problems?regionId=\" + config.getRegion()))\r\n    .withCredentials()\r\n    .field('json', JSON.stringify({sectorId: this.props.location.query.idSector, id: this.state.id, visibility: this.state.visibility, name: this.state.name, comment: this.state.comment, originalGrade: this.state.originalGrade, fa: this.state.fa, faDate: this.state.faDate, nr: this.state.nr, t: this.state.typeId? this.state.types.find(t => t.id === this.state.typeId) : this.state.types[0], lat: this.state.lat, lng: this.state.lng, newMedia: newMedia}))\r\n    .set('Accept', 'application/json');\r\n    this.state.newMedia.forEach(m => req.attach(m.file.name.replace(/[^-a-z0-9.]/ig,'_'), m.file));\r\n    req.end((err, res) => {\r\n      if (err) {\r\n        this.setState({error: err});\r\n      } else {\r\n        this.setState({pushUrl: \"/problem/\" + res.body.id});\r\n      }\r\n    });\r\n  }\r\n\r\n  onMapClick(event) {\r\n    this.setState({lat: event.latLng.lat(), lng: event.latLng.lng()});\r\n  }\r\n\r\n  onUsersUpdated(newUsers) {\r\n    const fa = newUsers.map(u => {\r\n      return {id: u.id, firstname: u.name, surname: null};\r\n    });\r\n    this.setState({fa: fa});\r\n  }\r\n\r\n  onCancel() {\r\n    window.history.back();\r\n  }\r\n\r\n  render() {\r\n    if (!this.state || !this.state.id || !this.state.types || !this.state.grades) {\r\n      return <center><FontAwesomeIcon icon=\"spinner\" spin size=\"3x\" /></center>;\r\n    }\r\n    else if (this.state.error) {\r\n      return <span><h3>{this.state.error.status}</h3>{this.state.error.toString()}</span>;\r\n    }\r\n    else if (this.state.pushUrl) {\r\n      return (<Redirect to={this.state.pushUrl} push />);\r\n    }\r\n\r\n    const yesterday = new Date();\r\n    yesterday.setDate(yesterday.getDate()-1);\r\n\r\n    var visibilityText = 'Visible for everyone';\r\n    if (this.state.visibility===1) {\r\n      visibilityText = 'Only visible for administrators';\r\n    } else if (this.state.visibility===2) {\r\n      visibilityText = 'Only visible for super administrators';\r\n    }\r\n\r\n    const selectedType = this.state.typeId? this.state.types.find(t => t.id === this.state.typeId) : this.state.types[0];\r\n    var defaultCenter;\r\n    var defaultZoom;\r\n    if (this.state.lat!=0 && this.state.lng!=0) {\r\n      defaultCenter = {lat: this.state.lat, lng: this.state.lng};\r\n      defaultZoom = 15;\r\n    }\r\n    else if (this.props.location.query.lat && parseFloat(this.props.location.query.lat)>0) {\r\n      defaultCenter = {lat: parseFloat(this.props.location.query.lat), lng: parseFloat(this.props.location.query.lng)};\r\n      defaultZoom = 14;\r\n    }\r\n    else {\r\n      defaultCenter = config.getDefaultCenter();\r\n      defaultZoom = config.getDefaultZoom();\r\n    }\r\n    return (\r\n      <Well>\r\n        <form onSubmit={this.save.bind(this)}>\r\n          <FormGroup controlId=\"formControlsName\">\r\n            <ControlLabel>Problem name</ControlLabel>\r\n            <FormControl type=\"text\" value={this.state.name} placeholder=\"Enter name\" onChange={this.onNameChanged.bind(this)} />\r\n          </FormGroup>\r\n          <FormGroup controlId=\"formControlsFaDate\">\r\n            <ControlLabel>FA date (yyyy-mm-dd)</ControlLabel><br/>\r\n            <Calendar format='YYYY-MM-DD' computableFormat='YYYY-MM-DD' date={this.state.faDate} onChange={this.onFaDateChanged.bind(this)} />\r\n            <ButtonGroup>\r\n              <Button onClick={this.onFaDateChanged.bind(this, config.convertFromDateToString(yesterday))}>Yesterday</Button>\r\n              <Button onClick={this.onFaDateChanged.bind(this, config.convertFromDateToString(new Date()))}>Today</Button>\r\n            </ButtonGroup>\r\n          </FormGroup>\r\n          <FormGroup controlId=\"formControlsTypeId\">\r\n            <ControlLabel>Type</ControlLabel><br/>\r\n            <DropdownButton title={selectedType.type + (selectedType.subType? \" - \" + selectedType.subType : \"\")} id=\"bg-nested-dropdown\">\r\n              {this.state.types.map((t, i) => { return <MenuItem key={i} eventKey={i} onSelect={this.onTypeIdChanged.bind(this, t.id)}>{t.type} {t.subType? \" - \" + t.subType : \"\"}</MenuItem> })}\r\n            </DropdownButton>\r\n          </FormGroup>\r\n          <FormGroup controlId=\"formControlsGrade\">\r\n            <ControlLabel>Grade</ControlLabel><br/>\r\n            <DropdownButton title={this.state.originalGrade} id=\"bg-nested-dropdown\">\r\n              {this.state.grades.map((g, i) => { return <MenuItem key={i} eventKey={i} onSelect={this.onOriginalGradeChanged.bind(this, g.grade)}>{g.grade}</MenuItem> })}\r\n            </DropdownButton>\r\n          </FormGroup>\r\n          <FormGroup controlId=\"formControlsFA\">\r\n            <ControlLabel>FA</ControlLabel><br/>\r\n            <UserSelecter users={this.state.fa? this.state.fa.map(u => {return {id: u.id, name: u.firstname + \" \" + u.surname}}) : []} onUsersUpdated={this.onUsersUpdated.bind(this)}/>\r\n          </FormGroup>\r\n          <FormGroup controlId=\"formControlsVisibility\">\r\n            <ControlLabel>Visibility</ControlLabel><br/>\r\n            <DropdownButton title={visibilityText} id=\"bg-nested-dropdown\">\r\n              <MenuItem eventKey=\"0\" onSelect={this.onVisibilityChanged.bind(this, 0)}>Visible for everyone</MenuItem>\r\n              <MenuItem eventKey=\"1\" onSelect={this.onVisibilityChanged.bind(this, 1)}>Only visible for administrators</MenuItem>\r\n              {auth.isSuperAdmin() && <MenuItem eventKey=\"2\" onSelect={this.onVisibilityChanged.bind(this, 2)}>Only visible for super administrators</MenuItem>}\r\n            </DropdownButton>\r\n          </FormGroup>\r\n          <FormGroup controlId=\"formControlsSectorNr\">\r\n            <ControlLabel>Sector number</ControlLabel>\r\n            <FormControl type=\"text\" value={this.state.nr} placeholder=\"Enter sector number\" onChange={this.onNrChanged.bind(this)} />\r\n          </FormGroup>\r\n          <FormGroup controlId=\"formControlsComment\">\r\n            <ControlLabel>Comment</ControlLabel>\r\n            <FormControl style={{height: '100px'}} componentClass=\"textarea\" placeholder=\"Enter comment\" value={this.state.comment} onChange={this.onCommentChanged.bind(this)} />\r\n          </FormGroup>\r\n          <FormGroup controlId=\"formControlsMedia\">\r\n            <ImageUpload onMediaChanged={this.onNewMediaChanged.bind(this)} />\r\n          </FormGroup>\r\n          <FormGroup controlId=\"formControlsMap\">\r\n            <ControlLabel>Click to mark problem on map</ControlLabel><br/>\r\n            <section style={{height: '600px'}}>\r\n              <GettingStartedGoogleMap\r\n                containerElement={<div style={{ height: `100%` }} />}\r\n                mapElement={<div style={{ height: `100%` }} />}\r\n                defaultZoom={defaultZoom}\r\n                defaultCenter={defaultCenter}\r\n                onClick={this.onMapClick.bind(this)}\r\n                markers={this.state.lat!=0 && this.state.lng!=0? <Marker position={{lat: this.state.lat, lng: this.state.lng}}/> : \"\"}\r\n              />\r\n            </section>\r\n            <ControlLabel>Latitude</ControlLabel>\r\n            <FormControl type=\"text\" value={this.state.lat} placeholder=\"Latitude\" onChange={this.onLatChanged.bind(this)} />\r\n            <ControlLabel>Longitude</ControlLabel>\r\n            <FormControl type=\"text\" value={this.state.lng} placeholder=\"Longitude\" onChange={this.onLngChanged.bind(this)} />\r\n          </FormGroup>\r\n          <ButtonGroup><Button bsStyle=\"danger\" onClick={this.onCancel.bind(this)}>Cancel</Button><Button type=\"submit\" bsStyle=\"success\" disabled={this.state.isSaving}>{this.state.isSaving? 'Saving...' : 'Save problem'}</Button></ButtonGroup>\r\n        </form>\r\n      </Well>\r\n    );\r\n  }\r\n}\r\n","import React, {Component} from 'react';\r\nimport { LinkContainer } from 'react-router-bootstrap';\r\nimport Request from 'superagent';\r\nimport { MenuItem, ButtonGroup, Button, FormGroup, FormControl } from 'react-bootstrap';\r\nimport config from '../../../utils/config.js';\r\nimport FontAwesomeIcon from '@fortawesome/react-fontawesome';\r\nimport { faTimes } from '@fortawesome/fontawesome-free-solid';\r\n\r\nexport default class UserSelecter extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      users: props.users,\r\n      searchInputValue: ''\r\n    };\r\n  }\r\n\r\n  inputChange(e) {\r\n    var value = e.target.value;\r\n    if (value.length>0) {\r\n      this.setState({searchInputValue: value});\r\n      Request.get(config.getUrl(\"users/search?value=\" + value)).withCredentials().end((err, res) => {\r\n        if (err) {\r\n          console.log(err);\r\n        }\r\n        const sr = res.body.filter(u => this.state.users.filter(v => u.id==v.id).length==0);\r\n        if (sr.filter(u => u.name.toUpperCase()===value.toUpperCase()).length==0 && this.state.users.filter(u => u.name.toUpperCase()===value.toUpperCase()).length==0) {\r\n          sr.push({id: -1, name: value});\r\n        }\r\n        this.setState({searchResults: sr});\r\n      });\r\n    }\r\n    else {\r\n      this.setState({searchInputValue: value, searchResults: null});\r\n    }\r\n  }\r\n\r\n  validateInput() {\r\n    if (this.state.searchResults) {\r\n      return 'error';\r\n    }\r\n    return 'success';\r\n  }\r\n\r\n  removeUser(idUser) {\r\n    const users = this.state.users.filter(u => u.id!=idUser);\r\n    this.setState({users: users});\r\n    this.props.onUsersUpdated(users);\r\n  }\r\n\r\n  menuItemSelect(user, event) {\r\n    this.state.users.push(user);\r\n    this.setState({searchInputValue: '', searchResults: null});\r\n    this.props.onUsersUpdated(this.state.users);\r\n  }\r\n\r\n  render() {\r\n    var searchResults = null;\r\n    if (this.state && this.state.searchResults && this.state.searchResults.length>0) {\r\n      const rows = this.state.searchResults.map((u, i) => {\r\n        const extra = u.id==-1? <b> [New user]</b> : <b> [Existing user]</b>\r\n        return (\r\n          <MenuItem key={i} href=\"#\" onSelect={this.menuItemSelect.bind(this, u)}>{u.name} {extra}</MenuItem>\r\n        )\r\n      });\r\n      searchResults=(\r\n        <div>\r\n          <ul className=\"dropdown-menu open\" style={{position: 'absolute', display: 'inline'}}>\r\n            {rows}\r\n          </ul>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    const users = this.state.users.map((u, i) => (<Button key={i} onClick={this.removeUser.bind(this, u.id)}><FontAwesomeIcon icon=\"times\" /> {u.name}{u.id==-1? \" (new user)\" : \"\"}</Button>));\r\n\r\n    return (\r\n      <div style={{position: 'relative', width: '100%'}}>\r\n        <div style={{width: '100%'}}>\r\n          {users? <ButtonGroup>{users}</ButtonGroup> : null}\r\n          <FormGroup controlId=\"formControlsSearchInput\" validationState={this.validateInput()}>\r\n            <FormControl style={{display: \"inline-block\"}} type=\"text\" placeholder=\"Search users\" value={this.state.searchInputValue} onChange={this.inputChange.bind(this)} />\r\n            <FormControl.Feedback />\r\n          </FormGroup>\r\n        </div>\r\n        {searchResults}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n"],"sourceRoot":""}