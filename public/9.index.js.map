{"version":3,"sources":["webpack:///./app/components/user-edit.js","webpack:///./app/utils/config.js","webpack:///./app/utils/auth.js","webpack:///./app/utils/cookie-helper.js"],"names":["_react","__webpack_require__","o","f","r","_reactRouterDom","_reactRouter","i","_reactBootstrap","d","c","m","e","__esModule","default","UserEdit","props","t","TypeError","this","__proto__","Object","getPrototypeOf","call","_auth2","loggedIn","setState","pushUrl","key","value","_this2","_superagent2","get","_config2","getUrl","getRegion","match","params","userId","withCredentials","end","err","res","message","_react2","createElement","Panel","bsStyle","toString","id","body","username","firstname","lastname","currentPassword","newPassword","newPassword2","document","title","getTitle","event","_this3","preventDefault","validateFirstname","validateLastname","validateUsername","validateCurrentPassword","validateNewPassword","validateNewPassword2","post","send","regionId","state","set","window","history","back","target","length","test","Redirect","to","push","Breadcrumb","Link","color","Well","onSubmit","save","bind","FormGroup","controlId","validationState","ControlLabel","FormControl","type","placeholder","onChange","onFirstnameChanged","Feedback","onLastnameChanged","onUsernameChanged","HelpBlock","onCurrentPasswordChanged","onNewPasswordChanged","onConfirmNewPasswordChanged","ButtonGroup","Button","onClick","onCancel","_reactFontawesome2","icon","spin","size","module","exports","str","location","hostname","getDefaultCenter","lat","lng","getDefaultZoom","convertFromDateToString","date","getDate","getMonth","getFullYear","a","s","login","password","cb","_this","arguments","setTimeout","console","log","authenticated","admin","superadmin","lvl","parseInt","text","_cookieHelper2","setItem","getToken","getItem","logout","removeItem","hasItem","isAdmin","isSuperAdmin","87","n","docCookies","sKey","decodeURIComponent","cookie","replace","RegExp","encodeURIComponent","sValue","vEnd","sPath","sDomain","bSecure","sExpires","constructor","Number","Infinity","String","Date","toUTCString","keys","aKeys","split","nLen","nIdx"],"mappings":"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","file":"9.index.js","sourcesContent":["import React, {Component} from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { Redirect } from 'react-router';\r\nimport Request from 'superagent';\r\nimport { FormGroup, ControlLabel, FormControl, HelpBlock, ButtonGroup, Button, Panel, Breadcrumb, Well } from 'react-bootstrap';\r\nimport auth from '../utils/auth.js';\r\nimport config from '../utils/config.js';\r\nimport FontAwesomeIcon from '@fortawesome/react-fontawesome';\r\nimport { faSpinner } from '@fortawesome/fontawesome-free-solid';\r\n\r\nexport default class UserEdit extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n  }\r\n\r\n  componentWillMount() {\r\n    if (!auth.loggedIn()) {\r\n      this.setState({pushUrl: \"/login\"});\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    Request.get(config.getUrl(\"users/edit?regionId=\" + config.getRegion() + \"&id=\" + this.props.match.params.userId)).withCredentials().end((err, res) => {\r\n      if (err) {\r\n        this.setState({message: <Panel bsStyle='danger'>{err.toString()}</Panel>});\r\n      } else {\r\n        this.setState({\r\n          id: res.body.id,\r\n          username: res.body.username,\r\n          firstname: res.body.firstname,\r\n          lastname: res.body.lastname,\r\n          currentPassword: null,\r\n          newPassword: null,\r\n          newPassword2: null,\r\n          message: null\r\n        });\r\n        document.title=config.getTitle() + \" | Edit \" + res.body.firstname + \" \" + res.body.lastname;\r\n      }\r\n    });\r\n  }\r\n\r\n  save(event) {\r\n    event.preventDefault();\r\n    if (this.validateFirstname(null)==='error') {\r\n      this.setState({message: <Panel bsStyle='danger'>Invalid firstname.</Panel>});\r\n    } else if (this.validateLastname(null)==='error') {\r\n      this.setState({message: <Panel bsStyle='danger'>Invalid lastname.</Panel>});\r\n    } else if (this.validateUsername(null)==='error') {\r\n      this.setState({message: <Panel bsStyle='danger'>Invalid username.</Panel>});\r\n    } else if (this.validateCurrentPassword(null)==='error' || this.validateNewPassword(null)==='error' || this.validateNewPassword2(null)==='error') {\r\n      this.setState({message: <Panel bsStyle='danger'>Invalid password.</Panel>});\r\n    } else {\r\n      Request.post(config.getUrl(\"users/edit\"))\r\n      .withCredentials()\r\n      .send({regionId: config.getRegion(), id: this.state.id, username: this.state.username, firstname: this.state.firstname, lastname: this.state.lastname, currentPassword: this.state.currentPassword, newPassword: this.state.newPassword})\r\n      .set('Accept', 'application/json')\r\n      .end((err, res) => {\r\n        if (err) {\r\n          this.setState({message: <Panel bsStyle='danger'>{err.toString()}</Panel>});\r\n        } else {\r\n          this.setState({pushUrl: \"/user\"});\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  onCancel() {\r\n    window.history.back();\r\n  }\r\n\r\n  onFirstnameChanged(e) {\r\n    this.setState({firstname: e.target.value});\r\n  }\r\n\r\n  onLastnameChanged(e) {\r\n    this.setState({lastname: e.target.value});\r\n  }\r\n\r\n  onUsernameChanged(e) {\r\n    this.setState({username: e.target.value});\r\n  }\r\n\r\n  onCurrentPasswordChanged(e) {\r\n    this.setState({currentPassword: e.target.value});\r\n  }\r\n\r\n  onNewPasswordChanged(e) {\r\n    this.setState({newPassword: e.target.value});\r\n  }\r\n\r\n  onConfirmNewPasswordChanged(e) {\r\n    this.setState({newPassword2: e.target.value});\r\n  }\r\n\r\n  validateFirstname() {\r\n    if (this.state.firstname.length < 1) {\r\n      return 'error';\r\n    }\r\n    return 'success';\r\n  }\r\n\r\n  validateLastname() {\r\n    if (this.state.lastname.length < 1) {\r\n      return 'error';\r\n    }\r\n    return 'success';\r\n  }\r\n\r\n  validateUsername() {\r\n    var re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n    if (!re.test(this.state.username)) {\r\n      return 'error';\r\n    }\r\n    return 'success';\r\n  }\r\n\r\n  validateCurrentPassword() {\r\n    return 'success';\r\n  }\r\n\r\n  validateNewPassword() {\r\n    if ((this.state.currentPassword || this.state.newPassword2) && !this.state.newPassword) return 'error';\r\n    else if (this.state.newPassword && this.state.newPassword.length < 8) return 'error';\r\n    return 'success';\r\n  }\r\n\r\n  validateNewPassword2() {\r\n    if ((this.state.currentPassword || this.state.newPassword) && !this.state.newPassword2) return 'error';\r\n    else if (this.state.newPassword2 && this.state.newPassword2.length < 8) return 'error';\r\n    else if (this.state.newPassword2 && this.state.newPassword!=this.state.newPassword2) return 'error';\r\n    return 'success';\r\n  }\r\n\r\n  render() {\r\n    if (!this.state) {\r\n      return <center><FontAwesomeIcon icon=\"spinner\" spin size=\"3x\" /></center>;\r\n    }\r\n    else if (this.state.pushUrl) {\r\n      return (<Redirect to={this.state.pushUrl} push />);\r\n    }\r\n    return (\r\n      <span>\r\n        <Breadcrumb>\r\n          <Link to={`/`}>Home</Link> / <font color='#777'>User edit</font>\r\n        </Breadcrumb>\r\n        <Well>\r\n          {this.state.message}\r\n          <form onSubmit={this.save.bind(this)}>\r\n            <FormGroup controlId=\"formControlsFirstname\" validationState={this.validateFirstname()}>\r\n              <ControlLabel>Firstname</ControlLabel>\r\n              <FormControl type=\"text\" value={this.state.firstname} placeholder=\"Enter firstname\" onChange={this.onFirstnameChanged.bind(this)} />\r\n              <FormControl.Feedback />\r\n            </FormGroup>\r\n            <FormGroup controlId=\"formControlsLastname\" validationState={this.validateLastname()}>\r\n              <ControlLabel>Lastname</ControlLabel>\r\n              <FormControl type=\"text\" value={this.state.lastname} placeholder=\"Enter lastname\" onChange={this.onLastnameChanged.bind(this)} />\r\n              <FormControl.Feedback />\r\n            </FormGroup>\r\n            <FormGroup controlId=\"formControlsUsername\" validationState={this.validateUsername()}>\r\n              <ControlLabel>Username</ControlLabel>\r\n              <FormControl type=\"email\" value={this.state.username} placeholder=\"Enter username\" onChange={this.onUsernameChanged.bind(this)} />\r\n              <FormControl.Feedback />\r\n              <HelpBlock>You must enter a valid email address.</HelpBlock>\r\n            </FormGroup>\r\n            <hr/>\r\n            <h4>Only fill following fields if you want to change your password</h4>\r\n            <FormGroup controlId=\"formControlsCurrentPassword\" validationState={this.validateCurrentPassword()}>\r\n              <ControlLabel>Current password</ControlLabel>\r\n              <FormControl type=\"password\" placeholder=\"Enter current password\" onChange={this.onCurrentPasswordChanged.bind(this)} />\r\n            </FormGroup>\r\n            <FormGroup controlId=\"formControlsNewPassword\" validationState={this.validateNewPassword()}>\r\n              <ControlLabel>New password</ControlLabel>\r\n              <FormControl type=\"password\" placeholder=\"Enter new password\" onChange={this.onNewPasswordChanged.bind(this)} />\r\n              <FormControl.Feedback />\r\n              <HelpBlock>At least 8 characters.</HelpBlock>\r\n            </FormGroup>\r\n            <FormGroup controlId=\"formControlsNewPassword2\" validationState={this.validateNewPassword2()}>\r\n              <ControlLabel>Confirm new password</ControlLabel>\r\n              <FormControl type=\"password\" placeholder=\"Confirm new password\" onChange={this.onConfirmNewPasswordChanged.bind(this)} />\r\n              <FormControl.Feedback />\r\n              <HelpBlock>Must match new password.</HelpBlock>\r\n            </FormGroup>\r\n\r\n            <ButtonGroup>\r\n              <Button bsStyle=\"danger\" onClick={this.onCancel.bind(this)}>Cancel</Button>\r\n              <Button type=\"submit\" bsStyle=\"success\">Save</Button>\r\n            </ButtonGroup>\r\n          </form>\r\n        </Well>\r\n      </span>\r\n    );\r\n  }\r\n}\r\n","module.exports = {\r\n  getUrl(str) {\r\n    if (window.location.hostname=='buldring.bergen-klatreklubb.no') {\r\n      return \"https://buldring.bergen-klatreklubb.no/com.buldreinfo.jersey.jaxb/v1/\" + str;\r\n    } else if (window.location.hostname=='buldring.fredrikstadklatreklubb.org') {\r\n      return \"https://buldring.fredrikstadklatreklubb.org/com.buldreinfo.jersey.jaxb/v1/\" + str;\r\n    } else if (window.location.hostname=='brattelinjer.no') {\r\n      return \"https://brattelinjer.no/com.buldreinfo.jersey.jaxb/v1/\" + str;\r\n    } else if (window.location.hostname=='dev.jossi.org') {\r\n      return \"https://dev.jossi.org/com.buldreinfo.jersey.jaxb/v1/\" + str;\r\n    } else {\r\n      return \"https://buldreinfo.com/com.buldreinfo.jersey.jaxb/v1/\" + str;\r\n    }\r\n  },\r\n\r\n  getTitle() {\r\n    if (window.location.hostname=='buldring.bergen-klatreklubb.no') {\r\n      return \"Buldring i Hordaland\";\r\n    } else if (window.location.hostname=='buldring.fredrikstadklatreklubb.org') {\r\n      return \"Buldring i Fredrikstad\";\r\n    } else if (window.location.hostname=='brattelinjer.no') {\r\n      return \"Bratte linjer\";\r\n    } else if (window.location.hostname=='dev.jossi.org') {\r\n      return \"Bratte linjer (dev)\";\r\n    } else {\r\n      return \"buldreinfo\";\r\n    }\r\n  },\r\n\r\n  getRegion() {\r\n    if (window.location.hostname=='buldring.bergen-klatreklubb.no') {\r\n      return \"2\";\r\n    } else if (window.location.hostname=='buldring.fredrikstadklatreklubb.org') {\r\n      return \"3\";\r\n    } else if (window.location.hostname=='brattelinjer.no') {\r\n      return \"4\";\r\n    } else if (window.location.hostname=='dev.jossi.org') {\r\n      return \"4\";\r\n    } else {\r\n      return \"1\";\r\n    }\r\n  },\r\n\r\n  getDefaultCenter() {\r\n    if (window.location.hostname=='buldring.bergen-klatreklubb.no') {\r\n      return {lat: 60.47521, lng: 6.83169};\r\n    } else if (window.location.hostname=='buldring.fredrikstadklatreklubb.org') {\r\n      return {lat: 59.22844, lng: 10.91722};\r\n    } else {\r\n      return {lat: 58.78119, lng: 5.86361};\r\n    }\r\n  },\r\n\r\n  getDefaultZoom() {\r\n    if (window.location.hostname=='brattelinjer.no') {\r\n      return 9;\r\n    } else if (window.location.hostname=='dev.jossi.org') {\r\n      return 9;\r\n    } else {\r\n      return 7;\r\n    }\r\n  },\r\n\r\n  convertFromDateToString(date) {\r\n    var d = date.getDate();\r\n    var m = date.getMonth() + 1;\r\n    var y = date.getFullYear();\r\n    return y + '-' + (m <= 9 ? '0' + m : m) + '-' + (d <= 9 ? '0' + d : d);\r\n  }\r\n}\r\n","import CookieHelper from './cookie-helper';\r\nimport Request from 'superagent';\r\nimport config from './config.js';\r\n\r\nmodule.exports = {\r\n  login(username, password, cb) {\r\n    cb = arguments[arguments.length - 1]\r\n    tryLogin(username, password, (res) => {\r\n      if (res.authenticated) {\r\n        CookieHelper.setItem('buldreinfo_is_admin', res.admin);\r\n        CookieHelper.setItem('buldreinfo_is_super_admin', res.superadmin);\r\n        if (cb) cb(true)\r\n        this.onChange(true)\r\n      } else {\r\n        if (cb) cb(false)\r\n        this.onChange(false)\r\n      }\r\n    })\r\n  },\r\n\r\n  getToken: function () {\r\n    return CookieHelper.getItem('buldreinfo');\r\n  },\r\n\r\n  logout: function (cb) {\r\n    Request.get(config.getUrl(\"logout\")).withCredentials().end((err, res) => {\r\n      if (err) {\r\n        console.log(err);\r\n      } else {\r\n        console.log(\"Logged out\");\r\n      }\r\n      CookieHelper.removeItem('buldreinfo');\r\n      if (cb) cb();\r\n      this.onChange(false);\r\n    });\r\n  },\r\n\r\n  loggedIn: function () {\r\n    return CookieHelper.hasItem('buldreinfo');\r\n  },\r\n\r\n  isAdmin: function () {\r\n    if (CookieHelper.hasItem('buldreinfo_is_admin')) {\r\n      return (CookieHelper.getItem('buldreinfo_is_admin')=='true');\r\n    }\r\n    return false;\r\n  },\r\n\r\n  isSuperAdmin: function () {\r\n    if (CookieHelper.hasItem('buldreinfo_is_super_admin')) {\r\n      return (CookieHelper.getItem('buldreinfo_is_super_admin')=='true');\r\n    }\r\n    return false;\r\n  },\r\n\r\n  onChange: function () {}\r\n}\r\n\r\nfunction tryLogin(username, password, cb) {\r\n  setTimeout(() => {\r\n    Request.post(config.getUrl(\"users/login\"))\r\n    .type('form')\r\n    .withCredentials()\r\n    .send({username: username})\r\n    .send({password: password})\r\n    .send({regionId: config.getRegion()})\r\n    .set('Accept', 'application/json')\r\n    .end((err, res) => {\r\n      if (err) {\r\n        console.log(err);\r\n        cb({ authenticated: false, admin: false, superadmin: false });\r\n      } else {\r\n        const lvl = parseInt(res.text);\r\n        cb({ authenticated: true, admin: lvl>=1, superadmin: lvl===2 });\r\n      }\r\n    });\r\n  }, 0)\r\n}\r\n","/*\\\r\n |*|\r\n |*|  :: cookies.js ::\r\n |*|\r\n |*|  A complete cookies reader/writer framework with full unicode support.\r\n |*|\r\n |*|  Revision #1 - September 4, 2014\r\n |*|\r\n |*|  https://developer.mozilla.org/en-US/docs/Web/API/document.cookie\r\n |*|  https://developer.mozilla.org/User:fusionchess\r\n |*|\r\n |*|  This framework is released under the GNU Public License, version 3 or later.\r\n |*|  http://www.gnu.org/licenses/gpl-3.0-standalone.html\r\n |*|\r\n |*|  Syntaxes:\r\n |*|\r\n |*|  * docCookies.setItem(name, value[, end[, path[, domain[, secure]]]])\r\n |*|  * docCookies.getItem(name)\r\n |*|  * docCookies.removeItem(name[, path[, domain]])\r\n |*|  * docCookies.hasItem(name)\r\n |*|  * docCookies.keys()\r\n |*|\r\n \\*/\r\n\r\nvar docCookies = {\r\n    getItem: function (sKey) {\r\n        if (!sKey) { return null; }\r\n        return decodeURIComponent(document.cookie.replace(new RegExp(\"(?:(?:^|.*;)\\\\s*\" + encodeURIComponent(sKey).replace(/[\\-\\.\\+\\*]/g, \"\\\\$&\") + \"\\\\s*\\\\=\\\\s*([^;]*).*$)|^.*$\"), \"$1\")) || null;\r\n    },\r\n    setItem: function (sKey, sValue, vEnd, sPath, sDomain, bSecure) {\r\n        if (!sKey || /^(?:expires|max\\-age|path|domain|secure)$/i.test(sKey)) { return false; }\r\n        var sExpires = \"\";\r\n        if (vEnd) {\r\n            switch (vEnd.constructor) {\r\n                case Number:\r\n                    sExpires = vEnd === Infinity ? \"; expires=Fri, 31 Dec 9999 23:59:59 GMT\" : \"; max-age=\" + vEnd;\r\n                    break;\r\n                case String:\r\n                    sExpires = \"; expires=\" + vEnd;\r\n                    break;\r\n                case Date:\r\n                    sExpires = \"; expires=\" + vEnd.toUTCString();\r\n                    break;\r\n            }\r\n        }\r\n        document.cookie = encodeURIComponent(sKey) + \"=\" + encodeURIComponent(sValue) + sExpires + (sDomain ? \"; domain=\" + sDomain : \"\") + (sPath ? \"; path=\" + sPath : \"\") + (bSecure ? \"; secure\" : \"\");\r\n        return true;\r\n    },\r\n    removeItem: function (sKey, sPath, sDomain) {\r\n        if (!this.hasItem(sKey)) { return false; }\r\n        document.cookie = encodeURIComponent(sKey) + \"=; expires=Thu, 01 Jan 1970 00:00:00 GMT\" + (sDomain ? \"; domain=\" + sDomain : \"\") + (sPath ? \"; path=\" + sPath : \"\");\r\n        return true;\r\n    },\r\n    hasItem: function (sKey) {\r\n        if (!sKey) { return false; }\r\n        return (new RegExp(\"(?:^|;\\\\s*)\" + encodeURIComponent(sKey).replace(/[\\-\\.\\+\\*]/g, \"\\\\$&\") + \"\\\\s*\\\\=\")).test(document.cookie);\r\n    },\r\n    keys: function () {\r\n        var aKeys = document.cookie.replace(/((?:^|\\s*;)[^\\=]+)(?=;|$)|^\\s*|\\s*(?:\\=[^;]*)?(?:\\1|$)/g, \"\").split(/\\s*(?:\\=[^;]*)?;\\s*/);\r\n        for (var nLen = aKeys.length, nIdx = 0; nIdx < nLen; nIdx++) { aKeys[nIdx] = decodeURIComponent(aKeys[nIdx]); }\r\n        return aKeys;\r\n    }\r\n};\r\n\r\nmodule.exports = docCookies;\r\n"],"sourceRoot":""}