{"version":3,"sources":["webpack:///./app/components/common/chart/chart.js","webpack:///./app/components/user.js","webpack:///(webpack)/buildin/module.js","webpack:///./app/components/common/tick-modal/tick-modal.js"],"names":["_react","__webpack_require__","l","e","__esModule","default","r","_reactBootstrap","Chart","props","t","TypeError","this","__proto__","Object","getPrototypeOf","call","Component","data","map","d","filter","val","gradeNumber","fa","tick","push","grade","sort","a","b","maxValue","Math","max","apply","rows","i","faWidth","tickWidth","style","padding","textAlign","_react2","createElement","key","width","verticalAlign","height","backgroundColor","float","marginLeft","Table","responsive","E","_reactHelmet","_reactRouterDom","s","_reactRouterBootstrap","_reactBootstrapTable","m","f","h","p","_reactFontawesome","User","_this","state","showTickModal","userId","_this2","Request","get","config","getUrl","getRegion","withCredentials","end","err","res","setState","error","user","body","refresh","match","params","nextProps","event","currTick","value","cell","row","Link","to","idProblem","name","visibility","FontAwesomeIcon","icon","comment","length","tooltip","Tooltip","id","OverlayTrigger","placement","overlay","substring","stars","whiteSpace","Popover","title","readOnly","Button","bsSize","bsStyle","onClick","openTickModal","bind","inverse","order","x","date","parseInt","y","localeCompare","spin","size","status","toString","numTicks","ticks","numFas","chart","_chart2","Helmet","metadata","content","description","_tickModal2","idTick","show","onHide","closeTickModal","Breadcrumb","auth","loggedIn","LinkContainer","color","Well","numImagesCreated","numImageTags","numVideosCreated","numVideoTags","BootstrapTable","condensed","hover","columnFilter","TableHeaderColumn","dataField","isKey","hidden","dataSort","sortFunc","sortDate","dataAlign","dataFormat","formatName","sortGrade","sortComment","formatComment","formatStars","formatFa","formatEdit","module","exports","webpackPolyfill","deprecate","paths","children","defineProperty","enumerable","u","TickModal","convertFromDateToString","Date","grades","newDate","target","_this3","post","send","delete","console","log","alert","_this4","_this5","yesterday","setDate","getDate","Modal","Header","closeButton","Title","Body","FormGroup","ControlLabel","_reactInputCalendar2","format","computableFormat","onChange","onDateChanged","ButtonGroup","DropdownButton","g","MenuItem","eventKey","onSelect","onGradeChanged","onStarsChanged","FormControl","componentClass","placeholder","onCommentChanged","Footer","save"],"mappings":"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","file":"23.index.js","sourcesContent":["import React, {Component} from 'react';\r\nimport { Table } from 'react-bootstrap';\r\n\r\nexport default class Chart extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n  }\r\n\r\n  render() {\r\n    var data = [];\r\n    this.props.data.map(t => {\r\n      var d = data.filter(val => {return val.gradeNumber===t.gradeNumber})\r\n      if (!d[0]) {\r\n        data.push({gradeNumber: t.gradeNumber, grade: t.grade, fa: (t.fa? 1 : 0), tick: (t.fa? 0 : 1)});\r\n      } else {\r\n        if (t.fa) {\r\n          d[0].fa++;\r\n        } else {\r\n          d[0].tick++;\r\n        }\r\n      }\r\n    });\r\n    data.sort((a,b) => {return b.gradeNumber-a.gradeNumber});\r\n    const maxValue = Math.max.apply(Math, data.map(d => {return d.fa+d.tick}));\r\n\r\n    const rows = data.map((d, i) => {\r\n      const faWidth = (d.fa/maxValue*100) + '%';\r\n      const tickWidth = (d.tick/maxValue*100) + '%';\r\n      const style = {padding: 0, textAlign: 'center'};\r\n      return (\r\n        <tr key={i}>\r\n          <td style={style}>{d.grade}</td>\r\n          <td style={style}>{d.fa}</td>\r\n          <td style={style}>{d.tick}</td>\r\n          <td style={style}><strong>{d.fa+d.tick}</strong></td>\r\n          <td style={{width: '100%', verticalAlign: 'middle'}}>\r\n            <div style={{width: faWidth, height: '10px', backgroundColor: '#3182bd', float: 'left'}}></div>\r\n            <div style={{width: tickWidth, height: '10px', backgroundColor: '#6baed6', marginLeft: faWidth}}></div>\r\n         </td>\r\n        </tr>\r\n      )\r\n    });\r\n\r\n    return (\r\n      <Table responsive>\r\n        <thead>\r\n          <tr>\r\n            <th>Grade</th>\r\n            <th>FA</th>\r\n            <th>Tick</th>\r\n            <th>Total</th>\r\n            <th></th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {rows}\r\n        </tbody>\r\n      </Table>\r\n    );\r\n  }\r\n}\r\n","import React, {Component} from 'react';\r\nimport { Helmet } from \"react-helmet\";\r\nimport { Link } from 'react-router-dom';\r\nimport Request from 'superagent';\r\nimport { LinkContainer } from 'react-router-bootstrap';\r\nimport { Tabs, Tab, ButtonToolbar, ButtonGroup, Button, OverlayTrigger, Tooltip, Popover, DropdownButton, MenuItem, Well, Breadcrumb } from 'react-bootstrap';\r\nimport { BootstrapTable, TableHeaderColumn } from 'react-bootstrap-table';\r\nimport Chart from './common/chart/chart';\r\nimport TickModal from './common/tick-modal/tick-modal';\r\nimport auth from '../utils/auth.js';\r\nimport config from '../utils/config.js';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\n\r\nexport default class User extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      showTickModal: false\r\n    };\r\n  }\r\n\r\n  refresh(userId) {\r\n    Request.get(config.getUrl(\"users?regionId=\" + config.getRegion() + (userId? \"&id=\" + userId : \"\"))).withCredentials().end((err, res) => {\r\n      if (err) {\r\n        this.setState({error: err});\r\n      } else {\r\n        this.setState({user: res.body});\r\n      }\r\n    });\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.refresh(this.props.match.params.userId);\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n    this.refresh(nextProps.match.params.userId);\r\n  }\r\n\r\n  closeTickModal(event) {\r\n    this.setState({ showTickModal: false });\r\n    this.refresh(this.props.match.params.userId);\r\n  }\r\n\r\n  openTickModal(t, event) {\r\n    this.setState({ currTick: t, showTickModal: true });\r\n  }\r\n\r\n  formatName(cell, row) {\r\n    return <span><Link to={`/problem/${row.idProblem}`}>{row.name}</Link> {row.visibility===1 && <FontAwesomeIcon icon=\"lock\" />}{row.visibility===2 && <FontAwesomeIcon icon=\"user-secret\" />}</span>;\r\n  }\r\n\r\n  formatComment(cell, row) {\r\n    if (row.comment) {\r\n      if (row.comment.length>40) {\r\n        const tooltip = (<Tooltip id={row.idProblem}>{row.comment}</Tooltip>);\r\n        return <OverlayTrigger key={row.idProblem} placement=\"top\" overlay={tooltip}><span>{row.comment.substring(0,40) + \"...\"}</span></OverlayTrigger>;\r\n      } else {\r\n        return row.comment;\r\n      }\r\n    }\r\n    return \"\";\r\n  }\r\n\r\n  formatStars(cell, row) {\r\n    var stars = null;\r\n    if (row.stars===0.5) {\r\n      stars = <FontAwesomeIcon icon=\"star-half\" />;\r\n    } else if (row.stars===1.0) {\r\n      stars = <div style={{whiteSpace: 'nowrap'}} id={2}><FontAwesomeIcon icon=\"star\" /></div>;\r\n    } else if (row.stars===1.5) {\r\n      stars = <div style={{whiteSpace: 'nowrap'}} id={3}><FontAwesomeIcon icon=\"star\" /><FontAwesomeIcon icon=\"star-half\" /></div>;\r\n    } else if (row.stars===2.0) {\r\n      stars = <div style={{whiteSpace: 'nowrap'}} id={4}><FontAwesomeIcon icon=\"star\" /><FontAwesomeIcon icon=\"star\" /></div>;\r\n    } else if (row.stars===2.5) {\r\n      stars = <div style={{whiteSpace: 'nowrap'}} id={5}><FontAwesomeIcon icon=\"star\" /><FontAwesomeIcon icon=\"star\" /><FontAwesomeIcon icon=\"star-half\" /></div>;\r\n    } else if (row.stars===3.0) {\r\n      stars = <div style={{whiteSpace: 'nowrap'}} id={6}><FontAwesomeIcon icon=\"star\" /><FontAwesomeIcon icon=\"star\" /><FontAwesomeIcon icon=\"star\" /></div>;\r\n    } else {\r\n      return \"\";\r\n    }\r\n    return <OverlayTrigger placement=\"top\" overlay={\r\n          <Popover id={0} title=\"Guidelines\">\r\n            <FontAwesomeIcon icon=\"star\" /> Nice<br/>\r\n            <FontAwesomeIcon icon=\"star\" /><FontAwesomeIcon icon=\"star\" /> Very nice<br/>\r\n            <FontAwesomeIcon icon=\"star\" /><FontAwesomeIcon icon=\"star\" /><FontAwesomeIcon icon=\"star\" /> Fantastic!\r\n          </Popover>\r\n        }>{stars}</OverlayTrigger>;\r\n  }\r\n\r\n  formatFa(cell, row) {\r\n    if (cell) {\r\n      return <FontAwesomeIcon icon=\"check\" />;\r\n    }\r\n    return \"\";\r\n  }\r\n\r\n  formatEdit(cell, row) {\r\n    if (this.state.user.readOnly==false && row.id!=0) {\r\n      return <OverlayTrigger placement=\"top\" overlay={<Tooltip id={row.id}>Edit tick</Tooltip>}><Button bsSize=\"xsmall\" bsStyle=\"primary\" onClick={this.openTickModal.bind(this, row)}><FontAwesomeIcon icon=\"edit\" inverse={true} /></Button></OverlayTrigger>\r\n    }\r\n    return \"\";\r\n  }\r\n\r\n  sortDate(a, b, order) {\r\n    const x = a.date? (parseInt(a.date.substring(0,2))<50? \"20\" : \"19\") + a.date : \"\";\r\n    const y = b.date? (parseInt(b.date.substring(0,2))<50? \"20\" : \"19\") + b.date : \"\";\r\n    if (order==='asc') return x.localeCompare(y);\r\n    return y.localeCompare(x);\r\n  }\r\n\r\n  sortGrade(a, b, order) {\r\n    const x = a.gradeNumber? a.gradeNumber : 0;\r\n    const y = b.gradeNumber? b.gradeNumber : 0;\r\n    if (order==='asc') {\r\n      if (x<y) {\r\n        return -1\r\n      } else if (x>y) {\r\n        return 1;\r\n      }\r\n      return 0;\r\n    }\r\n    if (y<x) {\r\n      return -1\r\n    } else if (y>x) {\r\n      return 1;\r\n    }\r\n    return 0;\r\n  }\r\n\r\n  sortComment(a, b, order) {\r\n    const x = a.comment? a.comment : \"\";\r\n    const y = b.comment? b.comment : \"\";\r\n    if (order==='asc') return x.localeCompare(y);\r\n    return y.localeCompare(x);\r\n  }\r\n\r\n  render() {\r\n    if (!this.state.user) {\r\n      return <center><FontAwesomeIcon icon=\"spinner\" spin size=\"3x\" /></center>;\r\n    }\r\n    if (this.state.error) {\r\n      return <span><h3>{this.state.error.status}</h3>{this.state.error.toString()}</span>;\r\n    }\r\n\r\n    var numTicks = this.state.user.ticks.filter(t => !t.fa).length;\r\n    var numFas = this.state.user.ticks.filter(t => t.fa).length;\r\n\r\n    const chart = this.state.user.ticks.length>0? <Chart data={this.state.user.ticks}/> : null;\r\n\r\n    return (\r\n      <span>\r\n        <Helmet>\r\n          <title>{this.state.user.metadata.title}</title>\r\n          <meta name=\"description\" content={this.state.user.metadata.description} />\r\n        </Helmet>\r\n\r\n        {this.state.currTick? <TickModal idTick={this.state.currTick.id} idProblem={this.state.currTick.idProblem} date={this.state.currTick.date} comment={this.state.currTick.comment} grade={this.state.currTick.grade} stars={this.state.currTick.stars} show={this.state.showTickModal} onHide={this.closeTickModal.bind(this)}/> : \"\"}\r\n        <Breadcrumb>\r\n          {auth.loggedIn() && this.state.user.readOnly==false?\r\n            <div style={{float: 'right'}}>\r\n              <OverlayTrigger placement=\"top\" overlay={<Tooltip id={this.state.user.id}>Edit user</Tooltip>}>\r\n                <LinkContainer to={`/user/${this.state.user.id}/edit`}><Button bsStyle=\"primary\" bsSize=\"xsmall\"><FontAwesomeIcon icon=\"edit\" inverse={true} /></Button></LinkContainer>\r\n              </OverlayTrigger>\r\n            </div>:\r\n            null\r\n          }\r\n          <Link to={`/`}>Home</Link> / <font color='#777'>{this.state.user.name}</font>\r\n        </Breadcrumb>\r\n        <Well bsSize=\"small\">First ascents: {numFas}<br/>Public ascents: {numTicks}<br/>Pictures taken: {this.state.user.numImagesCreated}<br/>Appearance in pictures: {this.state.user.numImageTags}<br/>Videos created: {this.state.user.numVideosCreated}<br/>Appearance in videos: {this.state.user.numVideoTags}</Well>\r\n        {chart}\r\n        <BootstrapTable\r\n        \tdata={this.state.user.ticks}\r\n          condensed={true}\r\n        \thover={true}\r\n        \tcolumnFilter={false}>\r\n          <TableHeaderColumn dataField=\"idProblem\" isKey={true} hidden={true}>idProblem</TableHeaderColumn>\r\n          <TableHeaderColumn dataField=\"dateHr\" dataSort={true} sortFunc={this.sortDate.bind(this)} dataAlign=\"center\" width=\"70\">Date</TableHeaderColumn>\r\n          <TableHeaderColumn dataField=\"name\" dataSort={true} dataFormat={this.formatName.bind(this)} width=\"300\">Name</TableHeaderColumn>\r\n          <TableHeaderColumn dataField=\"grade\" dataSort={true} sortFunc={this.sortGrade.bind(this)} dataAlign=\"center\" width=\"70\">Grade</TableHeaderColumn>\r\n          <TableHeaderColumn dataField=\"comment\" dataSort={true} sortFunc={this.sortComment.bind(this)} dataFormat={this.formatComment.bind(this)} width=\"300\">Comment</TableHeaderColumn>\r\n          <TableHeaderColumn dataField=\"stars\" dataSort={true} dataFormat={this.formatStars.bind(this)} dataAlign=\"center\" width=\"70\">Stars</TableHeaderColumn>\r\n          <TableHeaderColumn dataField=\"fa\" dataSort={true} dataFormat={this.formatFa.bind(this)} dataAlign=\"center\" width=\"50\">FA</TableHeaderColumn>\r\n          <TableHeaderColumn dataField=\"edit\" dataFormat={this.formatEdit.bind(this)} dataAlign=\"center\" width=\"30\"> </TableHeaderColumn>\r\n        </BootstrapTable>\r\n      </span>\r\n    );\r\n  }\r\n}\r\n","module.exports = function(module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","import React, {Component} from 'react';\r\nimport { Modal, Button, FormGroup, ControlLabel, FormControl, ButtonGroup, DropdownButton, MenuItem } from 'react-bootstrap';\r\nimport Request from 'superagent';\r\nimport config from '../../../utils/config.js';\r\nimport Calendar from 'react-input-calendar';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\n\r\nexport default class TickModal extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n  }\r\n\r\n  refresh(props) {\r\n    var date = null;\r\n    if (props.date) {\r\n      date = props.date;\r\n    } else if (props.idTick==-1) {\r\n      date = config.convertFromDateToString(new Date());\r\n    }\r\n\r\n    this.setState({\r\n      idTick: props.idTick,\r\n      idProblem: props.idProblem,\r\n      date: date,\r\n      comment: props.comment? props.comment : \"\",\r\n      grade: props.grade,\r\n      stars: props.stars? props.stars : 0\r\n    });\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.refresh(this.props);\r\n    Request.get(config.getUrl(\"grades?regionId=\" + config.getRegion())).end((err, res) => {\r\n      this.setState({\r\n        error: err? err : null,\r\n        grades: err? null : res.body\r\n      });\r\n    });\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n    this.refresh(nextProps);\r\n  }\r\n\r\n  onDateChanged(newDate) {\r\n    this.setState({date: newDate});\r\n  }\r\n\r\n  onCommentChanged(e) {\r\n    this.setState({comment: e.target.value});\r\n  }\r\n\r\n  onStarsChanged(stars, e) {\r\n    this.setState({stars: stars});\r\n  }\r\n\r\n  onGradeChanged(grade, e) {\r\n    this.setState({grade: grade});\r\n  }\r\n\r\n  delete(e) {\r\n    Request.post(config.getUrl(\"ticks?regionId=\" + config.getRegion()))\r\n    .withCredentials()\r\n    .send({delete: true, id: this.state.idTick, idProblem: this.state.idProblem, comment: this.state.comment, date: this.state.date, stars: this.state.stars, grade: this.state.grade})\r\n    .end((err, res) => {\r\n      if (err) {\r\n        console.log(err);\r\n        alert(err);\r\n      } else {\r\n        this.props.onHide();\r\n      }\r\n    });\r\n  }\r\n\r\n  save(e) {\r\n    Request.post(config.getUrl(\"ticks?regionId=\" + config.getRegion()))\r\n    .withCredentials()\r\n    .send({delete: false, id: this.state.idTick, idProblem: this.state.idProblem, comment: this.state.comment, date: this.state.date, stars: this.state.stars, grade: this.state.grade})\r\n    .end((err, res) => {\r\n      if (err) {\r\n        console.log(err);\r\n        alert(err);\r\n      } else {\r\n        this.props.onHide();\r\n      }\r\n    });\r\n  }\r\n\r\n  render() {\r\n    if (!this.state || !this.state.idProblem) {\r\n      return <center><FontAwesomeIcon icon=\"spinner\" spin size=\"3x\" /></center>;\r\n    }\r\n\r\n    const yesterday = new Date();\r\n    yesterday.setDate(yesterday.getDate()-1);\r\n\r\n    var stars = \"No stars\";\r\n    if (this.state.stars===1) {\r\n      stars = <span><FontAwesomeIcon icon=\"star\" /> Nice</span>\r\n    } else if (this.state.stars===2) {\r\n      stars = <span><FontAwesomeIcon icon=\"star\" /><FontAwesomeIcon icon=\"star\" /> Very nice</span>\r\n    } else if (this.state.stars===3) {\r\n      stars = <span><FontAwesomeIcon icon=\"star\" /><FontAwesomeIcon icon=\"star\" /><FontAwesomeIcon icon=\"star\" /> Fantastic!</span>\r\n    }\r\n\r\n    return (\r\n      <Modal show={this.props.show} onHide={this.props.onHide.bind(this)}>\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>Tick</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n          <FormGroup>\r\n            <ControlLabel>Date (yyyy-mm-dd)</ControlLabel><br/>\r\n            <Calendar format='YYYY-MM-DD' computableFormat='YYYY-MM-DD' date={this.state.date} onChange={this.onDateChanged.bind(this)} />\r\n            <ButtonGroup>\r\n              <Button onClick={this.onDateChanged.bind(this, config.convertFromDateToString(yesterday))}>Yesterday</Button>\r\n              <Button onClick={this.onDateChanged.bind(this, config.convertFromDateToString(new Date()))}>Today</Button>\r\n            </ButtonGroup>\r\n          </FormGroup>\r\n          <FormGroup>\r\n            <ControlLabel>Grade</ControlLabel><br/>\r\n            <DropdownButton title={this.state.grade} id=\"bg-nested-dropdown\">\r\n              {this.state && this.state.grades && this.state.grades.map((g, i) => { return <MenuItem key={i} eventKey={i} onSelect={this.onGradeChanged.bind(this, g.grade)}>{g.grade}</MenuItem> })}\r\n            </DropdownButton>\r\n          </FormGroup>\r\n          <FormGroup>\r\n            <ControlLabel>Stars</ControlLabel><br/>\r\n            <DropdownButton title={stars} id=\"bg-nested-dropdown\">\r\n              <MenuItem eventKey=\"0\" onSelect={this.onStarsChanged.bind(this, 0)}>No stars</MenuItem>\r\n              <MenuItem eventKey=\"1\" onSelect={this.onStarsChanged.bind(this, 1)}><FontAwesomeIcon icon=\"star\" /> Nice</MenuItem>\r\n              <MenuItem eventKey=\"2\" onSelect={this.onStarsChanged.bind(this, 2)}><FontAwesomeIcon icon=\"star\" /><FontAwesomeIcon icon=\"star\" /> Very nice</MenuItem>\r\n              <MenuItem eventKey=\"3\" onSelect={this.onStarsChanged.bind(this, 3)}><FontAwesomeIcon icon=\"star\" /><FontAwesomeIcon icon=\"star\" /><FontAwesomeIcon icon=\"star\" /> Fantastic!</MenuItem>\r\n            </DropdownButton>\r\n          </FormGroup>\r\n          <FormGroup>\r\n            <ControlLabel>Comment</ControlLabel>\r\n            <FormControl componentClass=\"textarea\" placeholder=\"textarea\" style={{height: '100px'}} value={this.state.comment} onChange={this.onCommentChanged.bind(this)} placeholder='Comment' />\r\n          </FormGroup>\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <ButtonGroup>\r\n            <Button onClick={this.save.bind(this)} bsStyle=\"success\">Save</Button>\r\n            {this.state.idTick>1? <Button onClick={this.delete.bind(this)} bsStyle=\"warning\">Delete tick</Button> : \"\"}\r\n            <Button onClick={this.props.onHide.bind(this)}>Close</Button>\r\n          </ButtonGroup>\r\n        </Modal.Footer>\r\n      </Modal>\r\n    );\r\n  }\r\n}\r\n"],"sourceRoot":""}