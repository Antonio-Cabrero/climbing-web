{"version":3,"sources":["webpack:///./app/components/area.js","webpack:///./app/components/common/gallery/gallery.js","webpack:///./app/components/common/map/map.js"],"names":["_react","__webpack_require__","r","p","n","_reactRouterDom","s","_reactBootstrap","_reactRouterBootstrap","d","c","h","f","m","e","__esModule","default","g","t","TypeError","y","ReferenceError","b","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","TableRow","comment","this","props","sector","length","tooltip","_react2","createElement","Tooltip","id","OverlayTrigger","key","placement","overlay","substring","Link","to","name","visibility","_reactFontawesome2","icon","numProblems","Area","_classCallCheck","_this2","_possibleConstructorReturn","getPrototypeOf","call","state","tabIndex","_this3","_superagent2","get","_config2","getUrl","match","params","areaId","withCredentials","end","err","res","setState","error","body","media","lat","lng","sectors","document","title","getTitle","idMediaToRemove","allMedia","filter","spin","size","status","toString","rows","map","i","markers","url","scaledSize","google","maps","Size","polygons","polygonCoords","triangleCoords","split","latLng","parseFloat","defaultCenter","getDefaultCenter","defaultZoom","getDefaultZoom","_map2","gallery","_gallery2","showThumbnails","removeMedia","onRemoveMedia","bind","topoContent","Tabs","activeKey","animation","onSelect","handleTabsSelection","unmountOnExit","Tab","eventKey","Breadcrumb","_auth2","isAdmin","style","float","ButtonGroup","LinkContainer","pathname","query","idArea","Button","bsStyle","bsSize","inverse","color","Well","dangerouslySetInnerHTML","__html","Table","striped","condensed","hover","o","u","_svgPathParser","_reactRouter","Gallery","_this","mediaIndex","hoverTrash","hoverEdit","showFullscreenButton","showGalleryFullscreenButton","showPlayButton","showGalleryPlayButton","showVideo","isFullscreen","nextProps","imageGallery","slideToIndex","event","confirm","idMedia","delete","alert","nextMediaIndex","index","resetVideo","fullscreenElement","Boolean","item","className","embedUrl","onClick","toggleShowVideo","_reactPlayer2","ref","player","width","height","onDuration","duration","onStart","seekTo","controls","playing","src","original","pushUrl","svgs","svgProblemId","w","_this4","svg","ixNr","path","parseSVG","makeAbsolute","ixAnchor","maxY","minY","len","x","anchor","hasAnchor","cx","cy","problemId","strokeWidth","strokeDasharray","fontSize","dy","nr","viewBox","preserveAspectRatio","xlinkHref","generateShapes","_this5","_objectFitImages2","watchMQ","Redirect","push","caruselItems","idType","thumbnail","originalClass","thumbnailClass","originalAlt","thumbnailAlt","renderItem","renderImage","Math","floor","renderVideo","button","position","zIndex","background","padding","onMouseEnter","toggleHoverEdit","onMouseLeave","transform","href","toggleHoverTrash","onDeleteImage","_reactImageGallery2","items","onSlide","onScreenChange","showBullets","showIndex","_reactGoogleMaps","Map","navigator","geolocation","getCurrentPosition","currLat","coords","latitude","currLng","longitude","Marker","label","clickable","handleOnClick","Polygon","paths","options","strokeColor","strokeOpacity","strokeWeight","fillColor","fillOpacity","GettingStartedGoogleMap","withGoogleMap","GoogleMap","defaultMapTypeId","MapTypeId","TERRAIN","_MarkerClusterer2","averageCenter","minimumClusterSize","enableRetinaIcons","imagePath","gridSize","containerElement","mapElement"],"mappings":"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","file":"24.index.js","sourcesContent":["import React, {Component} from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport Request from 'superagent';\r\nimport { Tabs, Tab, Well, OverlayTrigger, Tooltip, ButtonGroup, Button, Table, Breadcrumb } from 'react-bootstrap';\r\nimport { LinkContainer } from 'react-router-bootstrap';\r\nimport Map from './common/map/map';\r\nimport Gallery from './common/gallery/gallery';\r\nimport auth from '../utils/auth.js';\r\nimport config from '../utils/config.js';\r\nimport FontAwesomeIcon from '@fortawesome/react-fontawesome';\r\nimport { faSpinner, faLock, faUserSecret, faPlusSquare, faEdit } from '@fortawesome/fontawesome-free-solid';\r\n\r\nclass TableRow extends Component {\r\n  render() {\r\n    var comment = \"\";\r\n    if (this.props.sector.comment) {\r\n      if (this.props.sector.comment.length>100) {\r\n        const tooltip = (<Tooltip id={this.props.sector.id}>{this.props.sector.comment}</Tooltip>);\r\n        comment = <OverlayTrigger key={this.props.sector.id} placement=\"top\" overlay={tooltip}><span>{this.props.sector.comment.substring(0,100) + \"...\"}</span></OverlayTrigger>;\r\n      } else {\r\n        comment = this.props.sector.comment;\r\n      }\r\n    }\r\n    return (\r\n      <tr>\r\n        <td><Link to={`/sector/${this.props.sector.id}`}>{this.props.sector.name}</Link> {this.props.sector.visibility===1 && <FontAwesomeIcon icon=\"lock\" />}{this.props.sector.visibility===2 && <FontAwesomeIcon icon=\"user-secret\" />}</td>\r\n        <td>{comment}</td>\r\n        <td>{this.props.sector.numProblems}</td>\r\n      </tr>\r\n    )\r\n  }\r\n}\r\n\r\nexport default class Area extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      tabIndex: 1\r\n    };\r\n  }\r\n  componentDidMount() {\r\n    Request.get(config.getUrl(\"areas?id=\" + this.props.match.params.areaId)).withCredentials().end((err, res) => {\r\n      if (err) {\r\n        this.setState({error: err});\r\n      } else {\r\n        this.setState({\r\n          id: res.body.id,\r\n          visibility: res.body.visibility,\r\n          name: res.body.name,\r\n          media: res.body.media,\r\n          comment: res.body.comment,\r\n          lat: res.body.lat,\r\n          lng: res.body.lng,\r\n          sectors: res.body.sectors\r\n        });\r\n        document.title=config.getTitle() + \" | \" + this.state.name;\r\n      }\r\n    });\r\n  }\r\n\r\n  handleTabsSelection(key) {\r\n    this.setState({tabIndex: key});\r\n  }\r\n\r\n  onRemoveMedia(idMediaToRemove) {\r\n    const allMedia = this.state.media.filter(m => m.id!=idMediaToRemove);\r\n    this.setState({media: allMedia});\r\n  }\r\n\r\n  render() {\r\n    if (!this.state.id) {\r\n      return <center><FontAwesomeIcon icon=\"spinner\" spin size=\"3x\" /></center>;\r\n    }\r\n    if (this.state.error) {\r\n      return <span><h3>{this.state.error.status}</h3>{this.state.error.toString()}</span>;\r\n    }\r\n    const rows = this.state.sectors.map((sector, i) => {\r\n      return (\r\n        <TableRow sector={sector} key={i} />\r\n      )\r\n    });\r\n    const markers = this.state.sectors.filter(s => s.lat!=0 && s.lng!=0).map(s => {\r\n      return {\r\n          lat: s.lat,\r\n          lng: s.lng,\r\n          title: s.name,\r\n          icon: {\r\n            url: 'https://maps.google.com/mapfiles/kml/shapes/parking_lot_maps.png',\r\n            scaledSize: new google.maps.Size(32, 32)\r\n          },\r\n          url: '/sector/' + s.id\r\n        }\r\n    });\r\n    const polygons = this.state.sectors.filter(s => s.polygonCoords).map(s => {\r\n      const triangleCoords = s.polygonCoords.split(\";\").map((p, i) => {\r\n        const latLng = p.split(\",\");\r\n        return {lat: parseFloat(latLng[0]), lng: parseFloat(latLng[1])};\r\n      });\r\n      return {\r\n        triangleCoords: triangleCoords,\r\n        url: '/sector/' + s.id\r\n      }\r\n    });\r\n    const defaultCenter = this.state.lat && this.state.lat>0? {lat: this.state.lat, lng: this.state.lng} : config.getDefaultCenter();\r\n    const defaultZoom = this.state.lat && this.state.lat>0? 14 : config.getDefaultZoom();\r\n    const map = markers.length>0 || polygons.length>0? <Map markers={markers} polygons={polygons} defaultCenter={defaultCenter} defaultZoom={defaultZoom}/> : null;\r\n    const gallery = this.state.media && this.state.media.length>0? <Gallery media={this.state.media} showThumbnails={this.state.media.length>1} removeMedia={this.onRemoveMedia.bind(this)}/> : null;\r\n    var topoContent = null;\r\n    if (map && gallery) {\r\n      topoContent = (\r\n        <Tabs activeKey={this.state.tabIndex} animation={false} onSelect={this.handleTabsSelection.bind(this)} id=\"area_tab\" unmountOnExit={true}>\r\n          <Tab eventKey={1} title=\"Topo\">{this.state.tabIndex==1? gallery : false}</Tab>\r\n          <Tab eventKey={2} title=\"Map\">{this.state.tabIndex==2? map : false}</Tab>\r\n        </Tabs>\r\n      );\r\n    } else if (map) {\r\n      topoContent = map;\r\n    } else if (gallery) {\r\n      topoContent = gallery;\r\n    }\r\n\r\n    return (\r\n      <span>\r\n        <Breadcrumb>\r\n          {auth.isAdmin()?\r\n            <div style={{float: 'right'}}>\r\n              <ButtonGroup>\r\n                <OverlayTrigger placement=\"top\" overlay={<Tooltip id={-1}>Add sector</Tooltip>}>\r\n                  <LinkContainer to={{ pathname: `/sector/edit/-1`, query: { idArea: this.state.id, lat: this.state.lat, lng: this.state.lng } }}><Button bsStyle=\"primary\" bsSize=\"xsmall\"><FontAwesomeIcon icon=\"plus-square\" inverse /></Button></LinkContainer>\r\n                </OverlayTrigger>\r\n                <OverlayTrigger placement=\"top\" overlay={<Tooltip id={this.state.id}>Edit area</Tooltip>}>\r\n                  <LinkContainer to={{ pathname: `/area/edit/${this.state.id}`, query: { lat: this.state.lat, lng: this.state.lng } }}><Button bsStyle=\"primary\" bsSize=\"xsmall\"><FontAwesomeIcon icon=\"edit\" inverse /></Button></LinkContainer>\r\n                </OverlayTrigger>\r\n              </ButtonGroup>\r\n            </div>:\r\n            null\r\n          }\r\n          <Link to={`/`}>Home</Link> / <Link to={`/browse`}>Browse</Link> / <font color='#777'>{this.state.name}</font> {this.state.visibility===1 && <FontAwesomeIcon icon=\"lock\" />}{this.state.visibility===2 && <FontAwesomeIcon icon=\"user-secret\" />}\r\n        </Breadcrumb>\r\n        {topoContent}\r\n        {this.state.comment? <Well><div dangerouslySetInnerHTML={{ __html: this.state.comment }} /></Well> : null}\r\n        <Table striped condensed hover>\r\n          <thead>\r\n            <tr>\r\n              <th>Name</th>\r\n              <th>Description</th>\r\n              <th>#problems</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {rows}\r\n          </tbody>\r\n        </Table>\r\n      </span>\r\n    );\r\n  }\r\n}\r\n","import React, {Component} from 'react';\r\nimport ImageGallery from 'react-image-gallery';\r\nimport { Well } from 'react-bootstrap';\r\nimport ReactPlayer from 'react-player'\r\nimport auth from '../../../utils/auth.js';\r\nimport Request from 'superagent';\r\nimport {parseSVG, makeAbsolute} from 'svg-path-parser';\r\nimport { Link } from 'react-router-dom';\r\nimport config from '../../../utils/config.js';\r\nimport { Redirect } from 'react-router';\r\nimport objectFitImages from 'object-fit-images'; // objectFit does not work on IE and Edge http://caniuse.com/#search=object-fit\r\nimport FontAwesomeIcon from '@fortawesome/react-fontawesome';\r\nimport { faEdit, faTrash } from '@fortawesome/fontawesome-free-solid';\r\n\r\nexport default class Gallery extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      mediaIndex: 0,\r\n      hoverTrash: false,\r\n      hoverEdit: false,\r\n      showFullscreenButton: true,\r\n      showGalleryFullscreenButton: true,\r\n      showPlayButton: true,\r\n      showGalleryPlayButton: false,\r\n      showVideo: {},\r\n      isFullscreen: false,\r\n    };\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n    this.state = {\r\n      mediaIndex: 0,\r\n      hoverTrash: false,\r\n      hoverEdit: false,\r\n      showFullscreenButton: true,\r\n      showGalleryFullscreenButton: true,\r\n      showPlayButton: true,\r\n      showGalleryPlayButton: false,\r\n      showVideo: {},\r\n      isFullscreen: false,\r\n    };\r\n    if (this.imageGallery) {\r\n      this.imageGallery.slideToIndex(0);\r\n    }\r\n  }\r\n\r\n  toggleHoverTrash() {\r\n    this.setState({hoverTrash: !this.state.hoverTrash});\r\n  }\r\n\r\n  toggleHoverEdit() {\r\n    this.setState({hoverEdit: !this.state.hoverEdit});\r\n  }\r\n\r\n  onDeleteImage(event) {\r\n    if (confirm('Are you sure you want to delete this image?')) {\r\n      const idMedia = this.props.media[this.state.mediaIndex].id;\r\n      Request.delete(config.getUrl(\"media?id=\" + idMedia)).withCredentials().end((err, res) => {\r\n        if (err) {\r\n          alert(err.toString());\r\n        } else {\r\n          if (this.props.media.length>1 && this.state.mediaIndex>=this.props.media.length-1) {\r\n            const nextMediaIndex = this.state.mediaIndex-1;\r\n            this.setState({mediaIndex: nextMediaIndex});\r\n            this.imageGallery.slideToIndex(nextMediaIndex);\r\n          }\r\n          this.props.removeMedia(idMedia);\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  onSlide(index) {\r\n    this.resetVideo();\r\n    this.setState({mediaIndex: index});\r\n  }\r\n\r\n  onScreenChange(fullscreenElement) {\r\n    this.setState({isFullscreen: fullscreenElement});\r\n  }\r\n\r\n  resetVideo() {\r\n    this.setState({showVideo: {}});\r\n\r\n    if (this.state.showPlayButton) {\r\n      this.setState({showGalleryPlayButton: true});\r\n    }\r\n\r\n    if (this.state.showFullscreenButton) {\r\n      this.setState({showGalleryFullscreenButton: true});\r\n    }\r\n  }\r\n\r\n  toggleShowVideo(url) {\r\n    this.state.showVideo[url] = !Boolean(this.state.showVideo[url]);\r\n    this.setState({\r\n      showVideo: this.state.showVideo\r\n    });\r\n\r\n    if (this.state.showVideo[url]) {\r\n      if (this.state.showPlayButton) {\r\n        this.setState({showGalleryPlayButton: false});\r\n      }\r\n\r\n      if (this.state.showFullscreenButton) {\r\n        this.setState({showGalleryFullscreenButton: false});\r\n      }\r\n    }\r\n  }\r\n\r\n  renderVideo(item) {\r\n    return (\r\n      <div className='image-gallery-image'>\r\n        {\r\n          this.state.showVideo[item.embedUrl] ?\r\n            <span>\r\n              <a className='gallery-close-video' onClick={this.toggleShowVideo.bind(this, item.embedUrl)}></a>\r\n              <ReactPlayer\r\n                ref={player => { this.player = player }}\r\n                className='react-player'\r\n                width='100%'\r\n                height='100%'\r\n                url={item.embedUrl}\r\n                onDuration={duration => this.setState({ duration })}\r\n                onStart={() => this.player.seekTo(parseFloat(item.seekTo/this.state.duration))}\r\n                controls={true}\r\n                playing={true} />\r\n            </span>\r\n          :\r\n            <a onClick={this.toggleShowVideo.bind(this, item.embedUrl)}>\r\n              <div className='gallery-play-button'></div>\r\n              <img src={item.original}/>\r\n            </a>\r\n        }\r\n      </div>\r\n    );\r\n  }\r\n\r\n  pushUrl(url) {\r\n    this.setState({pushUrl: url});\r\n  }\r\n\r\n  generateShapes(svgs, svgProblemId, w, h) {\r\n    return svgs.map((svg, key) => {\r\n      const path = parseSVG(svg.path);\r\n      makeAbsolute(path); // Note: mutates the commands in place!\r\n      var ixNr;\r\n      var maxY = 0;\r\n      var ixAnchor;\r\n      var minY = 99999999;\r\n      for (var i=0, len=path.length; i < len; i++) {\r\n        if (path[i].y > maxY) {\r\n          ixNr = i;\r\n          maxY = path[i].y;\r\n        }\r\n        if (path[i].y < minY) {\r\n          ixAnchor = i;\r\n          minY = path[i].y;\r\n        }\r\n      }\r\n      var x = path[ixNr].x;\r\n      var y = path[ixNr].y;\r\n      const r = 0.012*w;\r\n      if (x < r) x = r;\r\n      if (x > (w-r)) x = w-r;\r\n      if (y < r) y = r;\r\n      if (y > (h-r)) y = h-r;\r\n      var anchor = null;\r\n      if (svg.hasAnchor) {\r\n        anchor = <circle className=\"buldreinfo-svg-ring\" cx={path[ixAnchor].x} cy={path[ixAnchor].y} r={0.006*w}/>\r\n      }\r\n      return (\r\n        <g className={\"buldreinfo-svg-pointer buldreinfo-svg-hover\" + ((svgProblemId===0 || svg.problemId===svgProblemId)? \"\" : \" buldreinfo-svg-opacity\")} key={key} onClick={this.pushUrl.bind(this, \"/problem/\" + svg.problemId)}>\r\n          <path d={svg.path} className=\"buldreinfo-svg-route\" strokeWidth={0.003*w} strokeDasharray={0.006*w}/>\r\n          <circle className=\"buldreinfo-svg-ring\" cx={x} cy={y} r={r}/>\r\n          <text className=\"buldreinfo-svg-routenr\" x={x} y={y} fontSize={0.02*w} dy=\".3em\">{svg.nr}</text>\r\n          {anchor}\r\n        </g>\r\n      );\r\n    });\r\n  }\r\n\r\n  renderImage(m) {\r\n    if (m.svgs) {\r\n      return (\r\n        <div className='image-gallery-image'>\r\n          <canvas className=\"buldreinfo-svg-canvas-ie-hack\" width={m.width} height={m.height}></canvas>\r\n          <svg className=\"buldreinfo-svg\" viewBox={\"0 0 \" + m.width + \" \" + m.height} preserveAspectRatio=\"xMidYMid meet\">\r\n            <image xlinkHref={config.getUrl(`images?id=${m.id}`)} width=\"100%\" height=\"100%\"/>\r\n            {this.generateShapes(m.svgs, m.svgProblemId, m.width, m.height)}\r\n          </svg>\r\n        </div>\r\n      );\r\n    }\r\n    return (\r\n      <div className='image-gallery-image'>\r\n        <img src={config.getUrl(`images?id=${m.id}`)} className=\"buldreinfo-scale-img\"/>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    objectFitImages(null, {watchMQ: true});\r\n    if (this.state && this.state.pushUrl) {\r\n      return (<Redirect to={this.state.pushUrl} push />);\r\n    }\r\n    const caruselItems = this.props.media.map((m, i) => {\r\n      if (m.idType==1) {\r\n        return {\r\n          original: config.getUrl(`images?id=${m.id}`),\r\n          thumbnail: config.getUrl(`images?id=${m.id}`),\r\n          originalClass: 'featured-slide',\r\n          thumbnailClass: 'featured-thumb',\r\n          originalAlt: 'original-alt',\r\n          thumbnailAlt: 'thumbnail-alt',\r\n          renderItem: this.renderImage.bind(this, m)\r\n        }\r\n      }\r\n      else {\r\n        return {\r\n          original: config.getUrl(`images?id=${m.id}`),\r\n          thumbnail: config.getUrl(`images?id=${m.id}`),\r\n          originalClass: 'featured-slide',\r\n          thumbnailClass: 'featured-thumb',\r\n          originalAlt: 'original-alt',\r\n          thumbnailAlt: 'thumbnail-alt',\r\n          embedUrl: 'https://buldreinfo.com/buldreinfo_media/mp4/' + (Math.floor(m.id/100)*100) + \"/\" + m.id + '.mp4',\r\n          seekTo: m.t,\r\n          renderItem: this.renderVideo.bind(this)\r\n        }\r\n      }\r\n    });\r\n\r\n    var button = \"\";\r\n    const m = this.props.media[this.state.mediaIndex];\r\n    if (!this.state.isFullscreen && m.idType==1 && auth.isAdmin()) {\r\n      if (m.svgProblemId>0) {\r\n        button = <span style={{position: 'absolute', zIndex: '4', background: 'rgba(0, 0, 0, 0.4)', padding: '8px 20px'}}><Link to={`/problem/svg-edit/${m.svgProblemId}/${m.id}`} onMouseEnter={this.toggleHoverEdit.bind(this)} onMouseLeave={this.toggleHoverEdit.bind(this)}><FontAwesomeIcon icon=\"edit\" style={this.state.hoverEdit? {transform: 'scale(1.1)', color: '#fff'} : {color: '#fff'}}/></Link></span>;\r\n      } else if (!m.svgs) {\r\n        button = <span style={{position: 'absolute', zIndex: '4', background: 'rgba(0, 0, 0, 0.4)', padding: '8px 20px'}}><a href=\"#\" onMouseEnter={this.toggleHoverTrash.bind(this)} onMouseLeave={this.toggleHoverTrash.bind(this)}><FontAwesomeIcon icon=\"trash\" style={this.state.hoverTrash? {transform: 'scale(1.1)', color: '#fff'} : {color: '#fff'}} onClick={this.onDeleteImage.bind(this)}/></a></span>;\r\n      }\r\n    }\r\n\r\n    return (\r\n      <Well className='app'>\r\n        {button}\r\n        <ImageGallery\r\n          ref={i => this.imageGallery = i}\r\n          items={caruselItems}\r\n          onSlide={this.onSlide.bind(this)}\r\n          onScreenChange={this.onScreenChange.bind(this)}\r\n          showThumbnails={this.props.showThumbnails}\r\n          showBullets={this.state.showFullscreenButton && this.state.showGalleryFullscreenButton && this.props.media.length>1}\r\n          showIndex={this.state.showFullscreenButton && this.state.showGalleryFullscreenButton}\r\n          showPlayButton={false}\r\n          showFullscreenButton={this.state.showFullscreenButton && this.state.showGalleryFullscreenButton}/>\r\n      </Well>\r\n    );\r\n  }\r\n}\r\n","import React, {Component} from 'react';\r\nimport { Redirect } from 'react-router';\r\nimport {withGoogleMap, GoogleMap, Marker, Polygon} from \"react-google-maps\";\r\nimport {default as MarkerClusterer} from 'react-google-maps/lib/components/addons/MarkerClusterer';\r\n\r\nexport default class Map extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    navigator.geolocation.getCurrentPosition((position) => {\r\n      this.setState({currLat: position.coords.latitude, currLng: position.coords.longitude});\r\n    });\r\n  }\r\n\r\n  handleOnClick(pushUrl) {\r\n    this.setState({pushUrl: pushUrl});\r\n  }\r\n\r\n  render() {\r\n    if (this.state && this.state.pushUrl) {\r\n      return (<Redirect to={this.state.pushUrl} push />);\r\n    }\r\n\r\n    var markers = null;\r\n    if (this.props.markers) {\r\n      markers = this.props.markers.map((m, i) => {\r\n        return (\r\n          <Marker\r\n            icon={m.icon}\r\n            key={i}\r\n            position={{lat: m.lat, lng: m.lng}}\r\n            label={m.label}\r\n            title={m.title}\r\n            clickable={true}\r\n            onClick={this.handleOnClick.bind(this, m.url)}/>\r\n        );\r\n      });\r\n    }\r\n    if (this.state && this.state.currLat && this.state.currLng && this.state.currLat>0 && this.state.currLng>0) {\r\n      markers.push(<Marker\r\n                    key={-1}\r\n                    icon=\"https://maps.gstatic.com/mapfiles/markers2/measle_blue.png\"\r\n                    position={{lat: this.state.currLat, lng: this.state.currLng}}/>)\r\n    }\r\n    var polygons = null;\r\n    if (this.props.polygons) {\r\n      polygons = this.props.polygons.map((p, i) => {\r\n        return (\r\n          <Polygon\r\n            key={i}\r\n            paths={p.triangleCoords}\r\n            options={{strokeColor: '#FF3300', strokeOpacity: '0.5', strokeWeight: '2', fillColor: '#FF3300', fillOpacity: '0.15'}}\r\n            onClick={this.handleOnClick.bind(this, p.url)}/>\r\n        );\r\n      });\r\n    }\r\n    const GettingStartedGoogleMap = withGoogleMap(props => (\r\n      <GoogleMap\r\n        defaultZoom={this.props.defaultZoom}\r\n        defaultCenter={this.props.defaultCenter}\r\n        defaultMapTypeId={google.maps.MapTypeId.TERRAIN}\r\n      >\r\n        <MarkerClusterer\r\n          averageCenter={ false }\r\n          minimumClusterSize={ 60 }\r\n          enableRetinaIcons={ false }\r\n          imagePath={ \"https://raw.githubusercontent.com/googlemaps/js-marker-clusterer/gh-pages/images/m\" }\r\n          gridSize={ 60 }>\r\n          {markers}\r\n          {polygons}\r\n        </MarkerClusterer>\r\n      </GoogleMap>\r\n    ));\r\n\r\n    return (\r\n      <section style={{height: '600px'}}>\r\n        <GettingStartedGoogleMap\r\n          containerElement={<div style={{ height: `100%` }} />}\r\n          mapElement={<div style={{ height: `100%` }} />}\r\n        />\r\n      </section>\r\n    );\r\n  }\r\n}\r\n"],"sourceRoot":""}