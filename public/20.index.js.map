{"version":3,"sources":["webpack:///./app/components/finder.js","webpack:///./app/components/common/map/map.js"],"names":["_react","__webpack_require__","n","p","l","i","_reactRouterDom","_reactRouterBootstrap","d","s","_reactBootstrap","_reactBootstrapTable","m","h","e","__esModule","default","Finder","props","this","_this","__proto__","Object","getPrototypeOf","call","state","tabIndex","currLat","currLng","Component","value","Math","PI","key","lat1","lon1","lat2","lon2","dLat","toRad","dLon","a","sin","cos","atan2","sqrt","grade","_this2","Request","get","config","getUrl","getRegion","withCredentials","end","err","res","setState","error","problems","body","_this3","refresh","match","params","navigator","geolocation","getCurrentPosition","position","coords","latitude","longitude","nextProps","rowData","rIndex","ticked","cell","row","_react2","createElement","Link","to","areaId","areaName","areaVisibility","_reactFontawesome2","icon","sectorId","sectorName","sectorVisibility","id","name","visibility","typeImg","t","height","src","alt","OverlayTrigger","placement","overlay","Popover","title","type","subType","fa","map","u","tooltip","Tooltip","firstname","surname","LinkContainer","Button","bsStyle","initials","ButtonToolbar","ButtonGroup","bsSize","stars","style","whiteSpace","media","filter","idType","length","lat","lng","calcCrow","toFixed","b","order","x","y","localeCompare","spin","size","status","toString","table","markers","nr","label","charAt","url","labelOrigin","google","maps","Point","_map2","defaultCenter","getDefaultCenter","defaultZoom","isBouldering","BootstrapTable","data","trClassName","trClassFormat","bind","condensed","hover","columnFilter","TableHeaderColumn","dataField","isKey","hidden","dataSort","dataFormat","formatAreaName","width","placeholder","formatSectorName","formatName","dataAlign","formatFa","sortFunc","sortFa","formatStars","formatNumImages","sortNumImages","formatNumMovies","sortNumMovies","formatDistance","sortDistance","formatType","_reactMetaTags2","getTitle","Breadcrumb","color","_reactRouter","_reactGoogleMaps","Map","pushUrl","Redirect","push","Marker","clickable","onClick","handleOnClick","polygons","Polygon","paths","triangleCoords","options","strokeColor","strokeOpacity","strokeWeight","fillColor","fillOpacity","GettingStartedGoogleMap","withGoogleMap","GoogleMap","defaultMapTypeId","MapTypeId","TERRAIN","_MarkerClusterer2","averageCenter","minimumClusterSize","enableRetinaIcons","imagePath","gridSize","containerElement","mapElement"],"mappings":"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","file":"20.index.js","sourcesContent":["import React, {Component} from 'react';\r\nimport MetaTags from 'react-meta-tags';\r\nimport { Link } from 'react-router-dom';\r\nimport { LinkContainer } from 'react-router-bootstrap';\r\nimport Request from 'superagent';\r\nimport Map from './common/map/map';\r\nimport { Tabs, Tab, Panel, ButtonToolbar, ButtonGroup, Button, OverlayTrigger, Tooltip, Popover, DropdownButton, MenuItem, Breadcrumb } from 'react-bootstrap';\r\nimport { BootstrapTable, TableHeaderColumn } from 'react-bootstrap-table';\r\nimport config from '../utils/config.js';\r\nimport FontAwesomeIcon from '@fortawesome/react-fontawesome';\r\nimport { faSpinner, faLock, faUserSecret, faStar, faStarHalf, faCamera, faPlane } from '@fortawesome/fontawesome-free-solid';\r\n\r\nexport default class Finder extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      tabIndex: 1,\r\n      currLat: 0,\r\n      currLng: 0\r\n    };\r\n  }\r\n\r\n  toRad(value) {\r\n    return value * Math.PI / 180;\r\n  }\r\n\r\n  calcCrow(lat1, lon1, lat2, lon2) {\r\n    var R = 6371; // km\r\n    var dLat = this.toRad(lat2-lat1);\r\n    var dLon = this.toRad(lon2-lon1);\r\n    var lat1 = this.toRad(lat1);\r\n    var lat2 = this.toRad(lat2);\r\n\r\n    var a = Math.sin(dLat/2) * Math.sin(dLat/2) +\r\n      Math.sin(dLon/2) * Math.sin(dLon/2) * Math.cos(lat1) * Math.cos(lat2);\r\n    var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));\r\n    var d = R * c;\r\n    return d;\r\n  }\r\n\r\n  refresh(grade) {\r\n    Request.get(config.getUrl(\"problems?regionId=\" + config.getRegion() + \"&grade=\" + grade)).withCredentials().end((err, res) => {\r\n      if (err) {\r\n        this.setState({error: err});\r\n      } else {\r\n        this.setState({problems: res.body});\r\n      }\r\n    });\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.refresh(this.props.match.params.grade);\r\n    navigator.geolocation.getCurrentPosition((position) => {\r\n      this.setState({currLat: position.coords.latitude, currLng: position.coords.longitude});\r\n    });\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n    this.refresh(nextProps.match.params.grade);\r\n  }\r\n\r\n  handleTabsSelection(key) {\r\n    this.setState({tabIndex: key});\r\n  }\r\n\r\n  trClassFormat(rowData, rIndex){\r\n    return rowData.ticked? 'success':'';\r\n  }\r\n\r\n  formatAreaName(cell, row) {\r\n    return <span><Link to={`/area/${row.areaId}`}>{row.areaName}</Link> {row.areaVisibility===1 && <FontAwesomeIcon icon=\"lock\" />}{row.areaVisibility===2 && <FontAwesomeIcon icon=\"user-secret\" />}</span>;\r\n  }\r\n\r\n  formatSectorName(cell, row) {\r\n    return <span><Link to={`/sector/${row.sectorId}`}>{row.sectorName}</Link> {row.sectorVisibility===1 && <FontAwesomeIcon icon=\"lock\" />}{row.sectorVisibility===2 && <FontAwesomeIcon icon=\"user-secret\" />}</span>;\r\n  }\r\n\r\n  formatName(cell, row) {\r\n    return <span><Link to={`/problem/${row.id}`}>{row.name}</Link> {row.visibility===1 && <FontAwesomeIcon icon=\"lock\" />}{row.visibility===2 && <FontAwesomeIcon icon=\"user-secret\" />}</span>\r\n  }\r\n\r\n  formatType(cell, row) {\r\n    var typeImg;\r\n    switch (row.t.id) {\r\n      case 2: typeImg = <img height=\"20\" src=\"/jpg/bolt.jpg\" alt=\"Bolt\"/>; break;\r\n      case 3: typeImg = <img height=\"20\" src=\"/jpg/trad.jpg\" alt=\"Trad\"/>; break;\r\n      case 4: typeImg = <img height=\"20\" src=\"/jpg/mixed.jpg\" alt=\"Mixed\"/>; break;\r\n    }\r\n    return <OverlayTrigger placement=\"top\" overlay={<Popover id={row.t.id} title=\"Type\"> {row.t.type + \" - \" + row.t.subType}</Popover>}>\r\n        {typeImg}\r\n      </OverlayTrigger>;\r\n  }\r\n\r\n  formatFa(cell, row) {\r\n    const fa = row.fa? row.fa.map((u, i) => {\r\n      const tooltip = (<Tooltip id={i}>{u.firstname} {u.surname}</Tooltip>);\r\n      return (<OverlayTrigger key={i} placement=\"top\" overlay={tooltip}><LinkContainer key={i} to={`/user/${u.id}`}><Button key={i} bsStyle=\"default\">{u.initials}</Button></LinkContainer></OverlayTrigger>)\r\n    }) : [];\r\n    return <ButtonToolbar><ButtonGroup bsSize=\"xsmall\">{fa}</ButtonGroup></ButtonToolbar>;\r\n  }\r\n\r\n  formatStars(cell, row) {\r\n    var stars = null;\r\n    if (row.stars===0.5) {\r\n      stars = <FontAwesomeIcon icon=\"star-half\" />;\r\n    } else if (row.stars===1.0) {\r\n      stars = <div style={{whiteSpace: 'nowrap'}} id={2}><FontAwesomeIcon icon=\"star\" /></div>;\r\n    } else if (row.stars===1.5) {\r\n      stars = <div style={{whiteSpace: 'nowrap'}} id={3}><FontAwesomeIcon icon=\"star\" /><FontAwesomeIcon icon=\"star-half\" /></div>;\r\n    } else if (row.stars===2.0) {\r\n      stars = <div style={{whiteSpace: 'nowrap'}} id={4}><FontAwesomeIcon icon=\"star\" /><FontAwesomeIcon icon=\"star\" /></div>;\r\n    } else if (row.stars===2.5) {\r\n      stars = <div style={{whiteSpace: 'nowrap'}} id={5}><FontAwesomeIcon icon=\"star\" /><FontAwesomeIcon icon=\"star\" /><FontAwesomeIcon icon=\"star-half\" /></div>;\r\n    } else if (row.stars===3.0) {\r\n      stars = <div style={{whiteSpace: 'nowrap'}} id={6}><FontAwesomeIcon icon=\"star\" /><FontAwesomeIcon icon=\"star\" /><FontAwesomeIcon icon=\"star\" /></div>;\r\n    } else {\r\n      return \"\";\r\n    }\r\n    return <OverlayTrigger placement=\"top\" overlay={\r\n          <Popover id={0} title=\"Guidelines\">\r\n            <FontAwesomeIcon icon=\"star\" /> Nice<br/>\r\n            <FontAwesomeIcon icon=\"star\" /><FontAwesomeIcon icon=\"star\" /> Very nice<br/>\r\n            <FontAwesomeIcon icon=\"star\" /><FontAwesomeIcon icon=\"star\" /><FontAwesomeIcon icon=\"star\" /> Fantastic!\r\n          </Popover>\r\n        }>{stars}</OverlayTrigger>;\r\n  }\r\n\r\n  formatNumImages(cell, row) {\r\n    return row.media? row.media.filter(m => {return m.idType===1}).length : 0;\r\n  }\r\n\r\n  formatNumMovies(cell, row) {\r\n    return row.media? row.media.filter(m => {return m.idType===2}).length : 0;\r\n  }\r\n\r\n  formatDistance(cell, row) {\r\n    if (this.state.currLat>0 && this.state.currLng>0 && row.lat>0 && row.lng>0) {\r\n      return this.calcCrow(this.state.currLat, this.state.currLng, row.lat, row.lng).toFixed(1) + \" km\";\r\n    }\r\n    return \"\";\r\n  }\r\n\r\n  sortFa(a, b, order) {\r\n    const x = a.fa? a.fa[0].initials : \"\";\r\n    const y = b.fa? b.fa[0].initials : \"\";\r\n    if (order==='asc') return x.localeCompare(y);\r\n    return y.localeCompare(x);\r\n  }\r\n\r\n  sortNumImages(a, b, order) {\r\n    const x = a.media? a.media.filter(m => {return m.idType===1}).length : 0;\r\n    const y = b.media? b.media.filter(m => {return m.idType===1}).length : 0;\r\n    if (order==='asc') {\r\n      if (x<y) return -1;\r\n      else if (x>y) return 1;\r\n      return 0;\r\n    } else {\r\n      if (x<y) return 1;\r\n      else if (x>y) return -1;\r\n      return 0;\r\n    }\r\n  }\r\n\r\n  sortNumMovies(a, b, order) {\r\n    const x = a.media? a.media.filter(m => {return m.idType===2}).length : 0;\r\n    const y = b.media? b.media.filter(m => {return m.idType===2}).length : 0;\r\n    if (order==='asc') {\r\n      if (x<y) return -1;\r\n      else if (x>y) return 1;\r\n      return 0;\r\n    } else {\r\n      if (x<y) return 1;\r\n      else if (x>y) return -1;\r\n      return 0;\r\n    }\r\n  }\r\n\r\n  sortDistance(a, b, order) {\r\n    const x = this.state.currLat>0 && this.state.currLng>0 && a.lat>0 && a.lng>0? this.calcCrow(this.state.currLat, this.state.currLng, a.lat, a.lng) : 0;\r\n    const y = this.state.currLat>0 && this.state.currLng>0 && b.lat>0 && b.lng>0? this.calcCrow(this.state.currLat, this.state.currLng, b.lat, b.lng) : 0;\r\n    if (order==='asc') {\r\n      if (x<y) return -1;\r\n      else if (x>y) return 1;\r\n      return 0;\r\n    } else {\r\n      if (x<y) return 1;\r\n      else if (x>y) return -1;\r\n      return 0;\r\n    }\r\n  }\r\n\r\n  render() {\r\n    if (!this.state.problems) {\r\n      return <center><FontAwesomeIcon icon=\"spinner\" spin size=\"3x\" /></center>;\r\n    }\r\n    if (this.state.error) {\r\n      return <span><h3>{this.state.error.status}</h3>{this.state.error.toString()}</span>;\r\n    }\r\n\r\n    const markers = this.state.problems.filter(p => p.lat!=0 && p.lng!=0).map(p => {\r\n      return {\r\n          lat: p.lat,\r\n          lng: p.lng,\r\n          title: p.nr + \" - \" + p.name + \" [\" + p.grade + \"]\",\r\n          label: p.name.charAt(0),\r\n          url: '/problem/' + p.id,\r\n          icon: {\r\n            url: p.ticked? 'https://mt.google.com/vt/icon?name=icons/spotlight/spotlight-waypoint-a.png' : 'https://mt.google.com/vt/icon?name=icons/spotlight/spotlight-waypoint-b.png',\r\n            labelOrigin: new google.maps.Point(11, 13)\r\n          }\r\n        }\r\n    });\r\n    const map = markers.length>0? <Map markers={markers} defaultCenter={config.getDefaultCenter()} defaultZoom={7}/> : null;\r\n    var table = null;\r\n    if (!config.isBouldering()) {\r\n      table = <BootstrapTable\r\n                data={this.state.problems}\r\n                trClassName={this.trClassFormat.bind(this)}\r\n                condensed={true}\r\n                hover={true}\r\n                columnFilter={false}>\r\n                <TableHeaderColumn dataField=\"id\" isKey={true} hidden={true}>id</TableHeaderColumn>\r\n                <TableHeaderColumn dataField=\"areaName\" dataSort={true} dataFormat={this.formatAreaName.bind(this)} width=\"150\" filter={{type: \"TextFilter\", placeholder: \"Filter\"}}>Area</TableHeaderColumn>\r\n                <TableHeaderColumn dataField=\"sectorName\" dataSort={true} dataFormat={this.formatSectorName.bind(this)} width=\"150\" filter={{type: \"TextFilter\", placeholder: \"Filter\"}}>Sector</TableHeaderColumn>\r\n                <TableHeaderColumn dataField=\"name\" dataSort={true} dataFormat={this.formatName.bind(this)} width=\"150\" filter={{type: \"TextFilter\", placeholder: \"Filter\"}}>Name</TableHeaderColumn>\r\n                <TableHeaderColumn dataField=\"type\" dataFormat={this.formatType.bind(this)} dataAlign=\"center\" width=\"70\">Type</TableHeaderColumn>\r\n                <TableHeaderColumn dataField=\"grade\" dataSort={true} dataAlign=\"center\" width=\"70\">Grade</TableHeaderColumn>\r\n                <TableHeaderColumn dataField=\"fa\" dataSort={true} dataFormat={this.formatFa.bind(this)} sortFunc={this.sortFa.bind(this)} dataAlign=\"center\" width=\"70\">FA</TableHeaderColumn>\r\n                <TableHeaderColumn dataField=\"numTicks\" dataSort={true} dataAlign=\"center\" width=\"50\">Ticks</TableHeaderColumn>\r\n                <TableHeaderColumn dataField=\"stars\" dataSort={true} dataFormat={this.formatStars.bind(this)} dataAlign=\"center\" width=\"70\">Stars</TableHeaderColumn>\r\n                <TableHeaderColumn dataField=\"numImages\" dataSort={true} dataFormat={this.formatNumImages.bind(this)} sortFunc={this.sortNumImages.bind(this)} dataAlign=\"center\" width=\"50\"><FontAwesomeIcon icon=\"camera\" /></TableHeaderColumn>\r\n                <TableHeaderColumn dataField=\"numMovies\" dataSort={true} dataFormat={this.formatNumMovies.bind(this)} sortFunc={this.sortNumMovies.bind(this)} dataAlign=\"center\" width=\"50\"><FontAwesomeIcon icon=\"video\" /></TableHeaderColumn>\r\n              </BootstrapTable>;\r\n    } else {\r\n      table = <BootstrapTable\r\n                data={this.state.problems}\r\n                trClassName={this.trClassFormat.bind(this)}\r\n                condensed={true}\r\n                hover={true}\r\n                columnFilter={false}>\r\n                <TableHeaderColumn dataField=\"id\" isKey={true} hidden={true}>id</TableHeaderColumn>\r\n                <TableHeaderColumn dataField=\"areaName\" dataSort={true} dataFormat={this.formatAreaName.bind(this)} width=\"150\" filter={{type: \"TextFilter\", placeholder: \"Filter\"}}>Area</TableHeaderColumn>\r\n                <TableHeaderColumn dataField=\"sectorName\" dataSort={true} dataFormat={this.formatSectorName.bind(this)} width=\"150\" filter={{type: \"TextFilter\", placeholder: \"Filter\"}}>Sector</TableHeaderColumn>\r\n                <TableHeaderColumn dataField=\"name\" dataSort={true} dataFormat={this.formatName.bind(this)} width=\"150\" filter={{type: \"TextFilter\", placeholder: \"Filter\"}}>Name</TableHeaderColumn>\r\n                <TableHeaderColumn dataField=\"grade\" dataSort={true} dataAlign=\"center\" width=\"70\">Grade</TableHeaderColumn>\r\n                <TableHeaderColumn dataField=\"fa\" dataSort={true} dataFormat={this.formatFa.bind(this)} sortFunc={this.sortFa.bind(this)} dataAlign=\"center\" width=\"70\">FA</TableHeaderColumn>\r\n                <TableHeaderColumn dataField=\"numTicks\" dataSort={true} dataAlign=\"center\" width=\"50\">Ticks</TableHeaderColumn>\r\n                <TableHeaderColumn dataField=\"stars\" dataSort={true} dataFormat={this.formatStars.bind(this)} dataAlign=\"center\" width=\"70\">Stars</TableHeaderColumn>\r\n                <TableHeaderColumn dataField=\"numImages\" dataSort={true} dataFormat={this.formatNumImages.bind(this)} sortFunc={this.sortNumImages.bind(this)} dataAlign=\"center\" width=\"50\"><FontAwesomeIcon icon=\"camera\" /></TableHeaderColumn>\r\n                <TableHeaderColumn dataField=\"numMovies\" dataSort={true} dataFormat={this.formatNumMovies.bind(this)} sortFunc={this.sortNumMovies.bind(this)} dataAlign=\"center\" width=\"50\"><FontAwesomeIcon icon=\"video\" /></TableHeaderColumn>\r\n                <TableHeaderColumn dataField=\"distance\" dataSort={true} dataFormat={this.formatDistance.bind(this)} sortFunc={this.sortDistance.bind(this)} dataAlign=\"center\" width=\"60\"><FontAwesomeIcon icon=\"plane\" /></TableHeaderColumn>\r\n              </BootstrapTable>;\r\n    }\r\n\r\n    return (\r\n      <span>\r\n        <MetaTags>\r\n          <title>{config.getTitle(\"Finder\")}</title>\r\n        </MetaTags>\r\n        <Breadcrumb>\r\n          <Link to={`/`}>Home</Link> / <font color='#777'>Finder (problems: {this.state.problems.length})</font>\r\n        </Breadcrumb>\r\n        {map}\r\n        {table}\r\n      </span>\r\n    );\r\n  }\r\n}\r\n","import React, {Component} from 'react';\r\nimport { Redirect } from 'react-router';\r\nimport {withGoogleMap, GoogleMap, Marker, Polygon} from \"react-google-maps\";\r\nimport {default as MarkerClusterer} from 'react-google-maps/lib/components/addons/MarkerClusterer';\r\n\r\nexport default class Map extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    navigator.geolocation.getCurrentPosition((position) => {\r\n      this.setState({currLat: position.coords.latitude, currLng: position.coords.longitude});\r\n    });\r\n  }\r\n\r\n  handleOnClick(pushUrl) {\r\n    this.setState({pushUrl: pushUrl});\r\n  }\r\n\r\n  render() {\r\n    if (this.state && this.state.pushUrl) {\r\n      return (<Redirect to={this.state.pushUrl} push />);\r\n    }\r\n\r\n    var markers = null;\r\n    if (this.props.markers) {\r\n      markers = this.props.markers.map((m, i) => {\r\n        return (\r\n          <Marker\r\n            icon={m.icon}\r\n            key={i}\r\n            position={{lat: m.lat, lng: m.lng}}\r\n            label={m.label}\r\n            title={m.title}\r\n            clickable={true}\r\n            onClick={this.handleOnClick.bind(this, m.url)}/>\r\n        );\r\n      });\r\n    }\r\n    if (this.state && this.state.currLat && this.state.currLng && this.state.currLat>0 && this.state.currLng>0) {\r\n      markers.push(<Marker\r\n                    key={-1}\r\n                    icon=\"https://maps.gstatic.com/mapfiles/markers2/measle_blue.png\"\r\n                    position={{lat: this.state.currLat, lng: this.state.currLng}}/>)\r\n    }\r\n    var polygons = null;\r\n    if (this.props.polygons) {\r\n      polygons = this.props.polygons.map((p, i) => {\r\n        return (\r\n          <Polygon\r\n            key={i}\r\n            paths={p.triangleCoords}\r\n            options={{strokeColor: '#FF3300', strokeOpacity: '0.5', strokeWeight: '2', fillColor: '#FF3300', fillOpacity: '0.15'}}\r\n            onClick={this.handleOnClick.bind(this, p.url)}/>\r\n        );\r\n      });\r\n    }\r\n    const GettingStartedGoogleMap = withGoogleMap(props => (\r\n      <GoogleMap\r\n        defaultZoom={this.props.defaultZoom}\r\n        defaultCenter={this.props.defaultCenter}\r\n        defaultMapTypeId={google.maps.MapTypeId.TERRAIN}\r\n      >\r\n        <MarkerClusterer\r\n          averageCenter={ false }\r\n          minimumClusterSize={ 60 }\r\n          enableRetinaIcons={ false }\r\n          imagePath={ \"https://raw.githubusercontent.com/googlemaps/js-marker-clusterer/gh-pages/images/m\" }\r\n          gridSize={ 60 }>\r\n          {markers}\r\n          {polygons}\r\n        </MarkerClusterer>\r\n      </GoogleMap>\r\n    ));\r\n\r\n    return (\r\n      <section style={{height: '600px'}}>\r\n        <GettingStartedGoogleMap\r\n          containerElement={<div style={{ height: `100%` }} />}\r\n          mapElement={<div style={{ height: `100%` }} />}\r\n        />\r\n      </section>\r\n    );\r\n  }\r\n}\r\n"],"sourceRoot":""}