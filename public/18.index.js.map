{"version":3,"sources":["webpack:///./app/components/recover.js"],"names":["_react","__webpack_require__","o","f","n","_reactHelmet","_reactRouter","u","_reactBootstrap","d","_reactFontawesome","e","__esModule","default","Recover","props","this","_this","__proto__","Object","getPrototypeOf","call","state","password","password2","Component","setState","token","match","params","event","_this2","preventDefault","validatePassword","validatePassword2","message","_react2","createElement","Panel","bsStyle","Request","get","config","getUrl","withCredentials","end","err","res","error","pushUrl","key","value","target","length","status","toString","Redirect","to","push","Helmet","getTitle","name","content","Well","onSubmit","recover","bind","FormGroup","controlId","validationState","ControlLabel","FormControl","type","placeholder","onChange","onPasswordChanged","Feedback","HelpBlock","onConfirmPasswordChanged","ButtonGroup","Button","FontAwesomeIcon","icon","spin","size","t"],"mappings":"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","file":"18.index.js","sourcesContent":["import React, {Component} from 'react';\r\nimport { Helmet } from \"react-helmet\";\r\nimport { Link } from 'react-router-dom';\r\nimport { Redirect } from 'react-router';\r\nimport Request from 'superagent';\r\nimport { FormGroup, ControlLabel, FormControl, HelpBlock, ButtonGroup, Button, Panel, Well } from 'react-bootstrap';\r\nimport auth from '../utils/auth.js';\r\nimport config from '../utils/config.js';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\n\r\nexport default class Recover extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      password: '',\r\n      password2: ''\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.setState({token: this.props.match.params.token});\r\n  }\r\n\r\n  recover(event) {\r\n    event.preventDefault();\r\n    if (this.validatePassword(null)==='error' || this.validatePassword2(null)==='error') {\r\n      this.setState({message: <Panel bsStyle='danger'>Invalid password.</Panel>});\r\n    } else {\r\n      Request.get(config.getUrl(\"users/password?token=\" + this.state.token + \"&password=\" + this.state.password)).withCredentials().end((err, res) => {\r\n        if (err) {\r\n          this.setState({error: err});\r\n        } else {\r\n          this.setState({error: null, pushUrl: \"/login\"});\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  onPasswordChanged(e) {\r\n    this.setState({password: e.target.value});\r\n  }\r\n\r\n  onConfirmPasswordChanged(e) {\r\n    this.setState({password2: e.target.value});\r\n  }\r\n\r\n  validatePassword() {\r\n    if (this.state.password.length < 8) {\r\n      return 'error';\r\n    }\r\n    return 'success';\r\n  }\r\n\r\n  validatePassword2() {\r\n    if (this.state.password2.length < 8 || this.state.password!=this.state.password2) {\r\n      return 'error';\r\n    }\r\n    return 'success';\r\n  }\r\n\r\n  render() {\r\n    if (!this.state.token) {\r\n      return <center><FontAwesomeIcon icon=\"spinner\" spin size=\"3x\" /></center>;\r\n    }\r\n    else if (this.state.error) {\r\n      return <span><h3>{this.state.error.status}</h3>{this.state.error.toString()}</span>;\r\n    }\r\n    else if (this.state.pushUrl) {\r\n      return (<Redirect to={this.state.pushUrl} push />);\r\n    }\r\n    return (\r\n      <span>\r\n        <Helmet>\r\n          <title>{config.getTitle(\"Reset password\")}</title>\r\n          <meta name=\"description\" content={\"Recover password\"} />\r\n        </Helmet>\r\n        <Well>\r\n          <form onSubmit={this.recover.bind(this)}>\r\n            <FormGroup controlId=\"formControlsPassword\" validationState={this.validatePassword()}>\r\n              <ControlLabel>New password</ControlLabel>\r\n              <FormControl type=\"password\" placeholder=\"Enter new password\" onChange={this.onPasswordChanged.bind(this)} />\r\n              <FormControl.Feedback />\r\n              <HelpBlock>At least 8 characters.</HelpBlock>\r\n            </FormGroup>\r\n            <FormGroup controlId=\"formControlsPassword2\" validationState={this.validatePassword2()}>\r\n              <ControlLabel>Confirm new password</ControlLabel>\r\n              <FormControl type=\"password\" placeholder=\"Confirm new password\" onChange={this.onConfirmPasswordChanged.bind(this)} />\r\n              <FormControl.Feedback />\r\n              <HelpBlock>Must match password field.</HelpBlock>\r\n            </FormGroup>\r\n            <ButtonGroup>\r\n              <Button type=\"submit\" bsStyle=\"success\">Reset password</Button>\r\n            </ButtonGroup>\r\n          </form>\r\n        </Well>\r\n      </span>\r\n    );\r\n  }\r\n}\r\n"],"sourceRoot":""}