{"version":3,"sources":["webpack:///./app/components/problem-edit.js","webpack:///./app/components/common/image-upload/image-upload.js","webpack:///./app/components/common/problem-section/problem-section.js","webpack:///./app/components/common/user-selector/user-selector.js"],"names":["_react","__webpack_require__","l","b","o","r","_reactRouter","s","_reactBootstrap","_reactGoogleMaps","c","h","f","m","p","g","y","e","__esModule","default","GettingStartedGoogleMap","withGoogleMap","props","_react2","createElement","GoogleMap","defaultZoom","defaultCenter","defaultMapTypeId","google","maps","MapTypeId","TERRAIN","onClick","bind","markers","ProblemEdit","Component","_this2","this","Request","get","config","getUrl","getRegion","end","err","res","setState","error","grades","body","types","match","params","problemId","id","visibility","name","comment","originalGrade","fa","faDate","convertFromDateToString","Date","nr","location","query","lat","lng","newMedia","withCredentials","typeId","t","sections","target","value","parseInt","parseFloat","newFaDate","event","_this3","preventDefault","isSaving","state","map","file","replace","photographer","inPhoto","req","post","field","JSON","stringify","sectorId","idSector","find","set","forEach","attach","pushUrl","latLng","newUsers","u","String","firstname","label","surname","window","history","back","_this4","_reactFontawesome2","icon","spin","size","status","toString","Redirect","to","push","yesterday","setDate","getDate","visibilityText","selectedType","getDefaultCenter","getDefaultZoom","isBouldering","FormGroup","controlId","ControlLabel","_problemSection2","onSectionsUpdated","_reactMetaTags2","getTitle","content","Well","onSubmit","save","FormControl","type","placeholder","onChange","onNameChanged","_reactInputCalendar2","format","computableFormat","date","onFaDateChanged","ButtonGroup","Button","DropdownButton","title","subType","i","MenuItem","key","eventKey","onSelect","onTypeIdChanged","onOriginalGradeChanged","grade","_userSelector2","users","onUsersUpdated","onVisibilityChanged","auth","isSuperAdmin","onNrChanged","style","height","componentClass","onCommentChanged","_imageUpload2","onMediaChanged","onNewMediaChanged","containerElement","mapElement","onMapClick","Marker","position","onLatChanged","onLngChanged","bsStyle","onCancel","disabled","d","TypeError","ReferenceError","prototype","Object","create","constructor","enumerable","writable","configurable","setPrototypeOf","__proto__","Text","_classCallCheck","_this","_possibleConstructorReturn","getPrototypeOf","call","searchResults","nextProps","onValueChanged","length","console","log","sr","filter","toUpperCase","user","rows","href","menuItemSelect","className","display","width","inputChange","ImageUpload","media","files","allMedia","toRemove","_this5","_reactDropzone2","onDrop","padding","borderWidth","borderColor","borderStyle","borderRadius","accept","Grid","Row","Col","xs","sm","md","lg","Thumbnail","src","preview","onInPhotoChanged","onPhotographerChanged","onRemove","a","ProblemSection","_createReactClass2","displayName","propTypes","PropTypes","string","getInitialState","onNumberOfSectionsChange","num","description","pop","onGradeChanged","onDescriptionChanged","render","Form","inline","module","exports","UserSelector","options","multiValue","handleOnChange","_reactSelect2","Creatable","multi"],"mappings":"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","file":"16.index.js","sourcesContent":["import React, {Component} from 'react';\r\nimport MetaTags from 'react-meta-tags';\r\nimport { Link } from 'react-router-dom';\r\nimport { Redirect } from 'react-router'\r\nimport Request from 'superagent';\r\nimport { FormGroup, ControlLabel, FormControl, ButtonGroup, Button, DropdownButton, MenuItem, Well } from 'react-bootstrap';\r\nimport {withGoogleMap, GoogleMap, Marker} from \"react-google-maps\";\r\nimport UserSelector from './common/user-selector/user-selector';\r\nimport ProblemSection from './common/problem-section/problem-section';\r\nimport ImageUpload from './common/image-upload/image-upload';\r\nimport config from '../utils/config.js';\r\nimport auth from '../utils/auth.js';\r\nimport Calendar from 'react-input-calendar';\r\nimport FontAwesomeIcon from '@fortawesome/react-fontawesome';\r\nimport { faSpinner } from '@fortawesome/fontawesome-free-solid';\r\n\r\nconst GettingStartedGoogleMap = withGoogleMap(props => (\r\n  <GoogleMap\r\n    defaultZoom={props.defaultZoom}\r\n    defaultCenter={props.defaultCenter}\r\n    defaultMapTypeId={google.maps.MapTypeId.TERRAIN}\r\n    onClick={props.onClick.bind(this)}>\r\n    {props.markers}\r\n  </GoogleMap>\r\n));\r\n\r\nexport default class ProblemEdit extends Component {\r\n  componentDidMount() {\r\n    Request.get(config.getUrl(\"grades?regionId=\" + config.getRegion())).end((err, res) => {\r\n      this.setState({\r\n        error: err? err : null,\r\n        grades: err? null : res.body\r\n      });\r\n    });\r\n    Request.get(config.getUrl(\"types?regionId=\" + config.getRegion())).end((err, res) => {\r\n      this.setState({\r\n        error: err? err : null,\r\n        types: err? null : res.body\r\n      });\r\n    });\r\n    if (this.props.match.params.problemId==-1) {\r\n      this.setState({\r\n        id: -1,\r\n        visibility: 0,\r\n        name: \"\",\r\n        comment: \"\",\r\n        originalGrade: \"n/a\",\r\n        fa: [],\r\n        faDate: config.convertFromDateToString(new Date()),\r\n        nr: this.props.location.query.nr,\r\n        lat: 0,\r\n        lng: 0,\r\n        newMedia: []\r\n      });\r\n    } else {\r\n      Request.get(config.getUrl(\"problems?regionId=\" + config.getRegion() + \"&id=\" + this.props.match.params.problemId)).withCredentials().end((err, res) => {\r\n        if (err) {\r\n          this.setState({error: err});\r\n        } else {\r\n          this.setState({\r\n            id: res.body[0].id,\r\n            visibility: res.body[0].visibility,\r\n            name: res.body[0].name,\r\n            comment: res.body[0].comment,\r\n            originalGrade: res.body[0].originalGrade,\r\n            fa: res.body[0].fa,\r\n            faDate: res.body[0].faDate,\r\n            nr: res.body[0].nr,\r\n            typeId: res.body[0].t.id,\r\n            lat: res.body[0].lat,\r\n            lng: res.body[0].lng,\r\n            sections: res.body[0].sections,\r\n            newMedia: []\r\n          });\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  onNameChanged(e) {\r\n    this.setState({name: e.target.value});\r\n  }\r\n\r\n  onNrChanged(e) {\r\n    this.setState({nr: parseInt(e.target.value)});\r\n  }\r\n\r\n  onLatChanged(e) {\r\n    this.setState({lat: parseFloat(e.target.value)});\r\n  }\r\n\r\n  onLngChanged(e) {\r\n    this.setState({lng: parseFloat(e.target.value)});\r\n  }\r\n\r\n  onVisibilityChanged(visibility, e) {\r\n    this.setState({visibility: visibility});\r\n  }\r\n\r\n  onCommentChanged(e) {\r\n    this.setState({comment: e.target.value});\r\n  }\r\n\r\n  onFaDateChanged(newFaDate) {\r\n    this.setState({faDate: newFaDate});\r\n  }\r\n\r\n  onOriginalGradeChanged(originalGrade, e) {\r\n    this.setState({originalGrade: originalGrade});\r\n  }\r\n\r\n  onTypeIdChanged(typeId, e) {\r\n    this.setState({typeId: typeId});\r\n  }\r\n\r\n  onNewMediaChanged(newMedia) {\r\n    this.setState({newMedia: newMedia});\r\n  }\r\n\r\n  save(event) {\r\n    event.preventDefault();\r\n    this.setState({isSaving: true});\r\n    const newMedia = this.state.newMedia.map(m => {return {name: m.file.name.replace(/[^-a-z0-9.]/ig,'_'), photographer: m.photographer, inPhoto: m.inPhoto}});\r\n    var req = Request.post(config.getUrl(\"problems?regionId=\" + config.getRegion()))\r\n    .withCredentials()\r\n    .field('json', JSON.stringify({sectorId: this.props.location.query.idSector, id: this.state.id, visibility: this.state.visibility, name: this.state.name, comment: this.state.comment, originalGrade: this.state.originalGrade, fa: this.state.fa, faDate: this.state.faDate, nr: this.state.nr, t: this.state.typeId? this.state.types.find(t => t.id === this.state.typeId) : this.state.types[0], lat: this.state.lat, lng: this.state.lng, sections: this.state.sections, newMedia: newMedia}))\r\n    .set('Accept', 'application/json');\r\n    this.state.newMedia.forEach(m => req.attach(m.file.name.replace(/[^-a-z0-9.]/ig,'_'), m.file));\r\n    req.end((err, res) => {\r\n      if (err) {\r\n        this.setState({error: err});\r\n      } else {\r\n        this.setState({pushUrl: \"/problem/\" + res.body.id});\r\n      }\r\n    });\r\n  }\r\n\r\n  onMapClick(event) {\r\n    this.setState({lat: event.latLng.lat(), lng: event.latLng.lng()});\r\n  }\r\n\r\n  onUsersUpdated(newUsers) {\r\n    const fa = newUsers.map(u => {\r\n      return {id: (typeof u.value === 'string' || u.value instanceof String)? -1 : u.value, firstname: u.label, surname: null};\r\n    });\r\n    this.setState({fa: fa});\r\n  }\r\n\r\n  onSectionsUpdated(sections) {\r\n    this.setState({sections});\r\n  }\r\n\r\n  onCancel() {\r\n    window.history.back();\r\n  }\r\n\r\n  render() {\r\n    if (!this.state || !this.state.id || !this.state.types || !this.state.grades) {\r\n      return <center><FontAwesomeIcon icon=\"spinner\" spin size=\"3x\" /></center>;\r\n    }\r\n    else if (this.state.error) {\r\n      return <span><h3>{this.state.error.status}</h3>{this.state.error.toString()}</span>;\r\n    }\r\n    else if (this.state.pushUrl) {\r\n      return (<Redirect to={this.state.pushUrl} push />);\r\n    }\r\n\r\n    const yesterday = new Date();\r\n    yesterday.setDate(yesterday.getDate()-1);\r\n\r\n    var visibilityText = 'Visible for everyone';\r\n    if (this.state.visibility===1) {\r\n      visibilityText = 'Only visible for administrators';\r\n    } else if (this.state.visibility===2) {\r\n      visibilityText = 'Only visible for super administrators';\r\n    }\r\n\r\n    const selectedType = this.state.typeId? this.state.types.find(t => t.id === this.state.typeId) : this.state.types[0];\r\n    var defaultCenter;\r\n    var defaultZoom;\r\n    if (this.state.lat!=0 && this.state.lng!=0) {\r\n      defaultCenter = {lat: this.state.lat, lng: this.state.lng};\r\n      defaultZoom = 15;\r\n    }\r\n    else if (this.props.location.query.lat && parseFloat(this.props.location.query.lat)>0) {\r\n      defaultCenter = {lat: parseFloat(this.props.location.query.lat), lng: parseFloat(this.props.location.query.lng)};\r\n      defaultZoom = 14;\r\n    }\r\n    else {\r\n      defaultCenter = config.getDefaultCenter();\r\n      defaultZoom = config.getDefaultZoom();\r\n    }\r\n\r\n    var sections = null;\r\n    if (!config.isBouldering()) {\r\n      sections = (\r\n        <FormGroup controlId=\"formControlsSections\">\r\n          <ControlLabel>Section(s)</ControlLabel><br/>\r\n          <ProblemSection sections={this.state.sections} grades={this.state.grades} onSectionsUpdated={this.onSectionsUpdated.bind(this)} />\r\n        </FormGroup>\r\n      );\r\n    }\r\n    return (\r\n      <span>\r\n        <MetaTags>\r\n          <title>{config.getTitle(\"Problem edit\")}</title>\r\n          <meta name=\"description\" content={\"Edit \" + this.state.name} />\r\n        </MetaTags>\r\n        <Well>\r\n          <form onSubmit={this.save.bind(this)}>\r\n            <FormGroup controlId=\"formControlsName\">\r\n              <ControlLabel>Problem name</ControlLabel>\r\n              <FormControl type=\"text\" value={this.state.name} placeholder=\"Enter name\" onChange={this.onNameChanged.bind(this)} />\r\n            </FormGroup>\r\n            <FormGroup controlId=\"formControlsFaDate\">\r\n              <ControlLabel>FA date (yyyy-mm-dd)</ControlLabel><br/>\r\n              <Calendar format='YYYY-MM-DD' computableFormat='YYYY-MM-DD' date={this.state.faDate} onChange={this.onFaDateChanged.bind(this)} />\r\n              <ButtonGroup>\r\n                <Button onClick={this.onFaDateChanged.bind(this, config.convertFromDateToString(yesterday))}>Yesterday</Button>\r\n                <Button onClick={this.onFaDateChanged.bind(this, config.convertFromDateToString(new Date()))}>Today</Button>\r\n              </ButtonGroup>\r\n            </FormGroup>\r\n            <FormGroup controlId=\"formControlsTypeId\">\r\n              <ControlLabel>Type</ControlLabel><br/>\r\n              <DropdownButton title={selectedType.type + (selectedType.subType? \" - \" + selectedType.subType : \"\")} id=\"bg-nested-dropdown\">\r\n                {this.state.types.map((t, i) => { return <MenuItem key={i} eventKey={i} onSelect={this.onTypeIdChanged.bind(this, t.id)}>{t.type} {t.subType? \" - \" + t.subType : \"\"}</MenuItem> })}\r\n              </DropdownButton>\r\n            </FormGroup>\r\n            <FormGroup controlId=\"formControlsGrade\">\r\n              <ControlLabel>Grade</ControlLabel><br/>\r\n              <DropdownButton title={this.state.originalGrade} id=\"bg-nested-dropdown\">\r\n                {this.state.grades.map((g, i) => { return <MenuItem key={i} eventKey={i} onSelect={this.onOriginalGradeChanged.bind(this, g.grade)}>{g.grade}</MenuItem> })}\r\n              </DropdownButton>\r\n            </FormGroup>\r\n            <FormGroup controlId=\"formControlsFA\">\r\n              <ControlLabel>FA</ControlLabel><br/>\r\n              <UserSelector users={this.state.fa? this.state.fa.map(u => {return {value: u.id, label: u.firstname + \" \" + u.surname}}) : []} onUsersUpdated={this.onUsersUpdated.bind(this)} />\r\n            </FormGroup>\r\n            <FormGroup controlId=\"formControlsVisibility\">\r\n              <ControlLabel>Visibility</ControlLabel><br/>\r\n              <DropdownButton title={visibilityText} id=\"bg-nested-dropdown\">\r\n                <MenuItem eventKey=\"0\" onSelect={this.onVisibilityChanged.bind(this, 0)}>Visible for everyone</MenuItem>\r\n                <MenuItem eventKey=\"1\" onSelect={this.onVisibilityChanged.bind(this, 1)}>Only visible for administrators</MenuItem>\r\n                {auth.isSuperAdmin() && <MenuItem eventKey=\"2\" onSelect={this.onVisibilityChanged.bind(this, 2)}>Only visible for super administrators</MenuItem>}\r\n              </DropdownButton>\r\n            </FormGroup>\r\n            <FormGroup controlId=\"formControlsSectorNr\">\r\n              <ControlLabel>Sector number</ControlLabel>\r\n              <FormControl type=\"text\" value={this.state.nr} placeholder=\"Enter sector number\" onChange={this.onNrChanged.bind(this)} />\r\n            </FormGroup>\r\n            <FormGroup controlId=\"formControlsComment\">\r\n              <ControlLabel>Comment</ControlLabel>\r\n              <FormControl style={{height: '100px'}} componentClass=\"textarea\" placeholder=\"Enter comment\" value={this.state.comment} onChange={this.onCommentChanged.bind(this)} />\r\n            </FormGroup>\r\n            {sections}\r\n            <FormGroup controlId=\"formControlsMedia\">\r\n              <ImageUpload onMediaChanged={this.onNewMediaChanged.bind(this)} />\r\n            </FormGroup>\r\n            <FormGroup controlId=\"formControlsMap\">\r\n              <ControlLabel>Click to mark problem on map</ControlLabel><br/>\r\n              <section style={{height: '600px'}}>\r\n                <GettingStartedGoogleMap\r\n                  containerElement={<div style={{ height: `100%` }} />}\r\n                  mapElement={<div style={{ height: `100%` }} />}\r\n                  defaultZoom={defaultZoom}\r\n                  defaultCenter={defaultCenter}\r\n                  onClick={this.onMapClick.bind(this)}\r\n                  markers={this.state.lat!=0 && this.state.lng!=0? <Marker position={{lat: this.state.lat, lng: this.state.lng}}/> : \"\"}\r\n                />\r\n              </section>\r\n              <ControlLabel>Latitude</ControlLabel>\r\n              <FormControl type=\"text\" value={this.state.lat} placeholder=\"Latitude\" onChange={this.onLatChanged.bind(this)} />\r\n              <ControlLabel>Longitude</ControlLabel>\r\n              <FormControl type=\"text\" value={this.state.lng} placeholder=\"Longitude\" onChange={this.onLngChanged.bind(this)} />\r\n            </FormGroup>\r\n            <ButtonGroup><Button bsStyle=\"danger\" onClick={this.onCancel.bind(this)}>Cancel</Button><Button type=\"submit\" bsStyle=\"success\" disabled={this.state.isSaving}>{this.state.isSaving? 'Saving...' : 'Save problem'}</Button></ButtonGroup>\r\n          </form>\r\n        </Well>\r\n      </span>\r\n    );\r\n  }\r\n}\r\n","import React, {Component} from 'react';\r\nimport Dropzone from 'react-dropzone';\r\nimport Request from 'superagent';\r\nimport { Grid, Row, Col, Thumbnail, MenuItem, Button, FormControl, FormGroup, ControlLabel } from 'react-bootstrap';\r\nimport config from '../../../utils/config.js';\r\n\r\nclass Text extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {searchResults: [], value: ''};\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n    this.setState({value: nextProps.value});\r\n  }\r\n\r\n  inputChange(e) {\r\n    const value = e.target.value;\r\n    this.props.onValueChanged(this.props.m, value);\r\n    if (value.length>0) {\r\n      Request.get(config.getUrl(\"users/search?value=\" + value)).withCredentials().end((err, res) => {\r\n        if (err) {\r\n          console.log(err);\r\n        }\r\n        const sr = res.body.filter(u => u.name.toUpperCase() !== value.toUpperCase());\r\n        this.setState({searchResults: sr});\r\n      });\r\n    }\r\n    else {\r\n      this.setState({searchResults: []});\r\n    }\r\n  }\r\n\r\n  menuItemSelect(user, event) {\r\n    this.setState({searchResults: []});\r\n    this.props.onValueChanged(this.props.m, user.name);\r\n  }\r\n\r\n  render() {\r\n    var searchResults = null;\r\n    if (this.state.searchResults.length>0) {\r\n      const rows = this.state.searchResults.map((u, i) => <MenuItem key={i} href=\"#\" onSelect={this.menuItemSelect.bind(this, u)}>{u.name}</MenuItem>);\r\n      searchResults=(\r\n        <div>\r\n          <ul className=\"dropdown-menu open\" style={{position: 'absolute', display: 'inline'}}>\r\n            {rows}\r\n          </ul>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <div style={{position: 'relative', width: '100%'}}>\r\n        <div style={{width: '100%'}}>\r\n          <FormControl style={{display: 'inline-block'}} type=\"text\" placeholder={this.props.placeholder} value={this.state.value} onChange={this.inputChange.bind(this)} />\r\n        </div>\r\n        {searchResults}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default class ImageUpload extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {media: []};\r\n  }\r\n\r\n  onDrop(files) {\r\n    const allMedia = this.state.media;\r\n    files.forEach(f => allMedia.push({file: f}));\r\n    this.setState({media: allMedia});\r\n    this.props.onMediaChanged(allMedia);\r\n  }\r\n\r\n  onPhotographerChanged(m, name) {\r\n    m.photographer=name;\r\n    this.props.onMediaChanged(this.state.media);\r\n  }\r\n\r\n  onInPhotoChanged(m, name) {\r\n    m.inPhoto=name;\r\n    this.props.onMediaChanged(this.state.media);\r\n  }\r\n\r\n  onRemove(toRemove) {\r\n    const allMedia = this.state.media.filter(m => m!=toRemove);\r\n    this.setState({media: allMedia});\r\n    this.props.onMediaChanged(allMedia);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <FormGroup>\r\n        <ControlLabel>Upload image(s)</ControlLabel><br/>\r\n        <Dropzone\r\n          onDrop={this.onDrop.bind(this)}\r\n          style={{width: '220px', height: '75px', padding: '15px', borderWidth: '1px', borderColor: '#666', borderStyle: 'dashed', borderRadius: '5px'}}\r\n          accept={'image/*'}>\r\n          <i>Drop JPG-image(s) here or click to select files to upload.</i>\r\n        </Dropzone>\r\n        {this.state.media.length > 0 ?\r\n          <Grid>\r\n            <Row>\r\n              {this.state.media.map((m, i) =>\r\n                <Col key={i} xs={8} sm={6} md={4} lg={2}>\r\n                  <Thumbnail src={m.file.preview}>\r\n                    <Text m={m} placeholder='In photo' value={m? m.inPhoto : ''}  onValueChanged={this.onInPhotoChanged.bind(this)} />\r\n                    <Text m={m} placeholder='Photographer' value={m? m.photographer : ''} onValueChanged={this.onPhotographerChanged.bind(this)} />\r\n                    <Button style={{width: '100%'}} bsStyle='danger' onClick={this.onRemove.bind(this, m)}>Remove</Button>\r\n                  </Thumbnail>\r\n                </Col>\r\n              )}\r\n            </Row>\r\n          </Grid>\r\n          : null}\r\n      </FormGroup>\r\n    );\r\n  }\r\n}\r\n","import React from 'react';\r\nimport createClass from 'create-react-class';\r\nimport PropTypes from 'prop-types';\r\nimport { Form, FormGroup, FormControl, DropdownButton, MenuItem, Well } from 'react-bootstrap';\r\n\r\nvar ProblemSection = createClass({\r\n\tdisplayName: 'ProblemSection',\r\n\tpropTypes: {\r\n\t\tlabel: PropTypes.string\r\n\t},\r\n\tgetInitialState() {\r\n    return {\r\n      sections: this.props.sections,\r\n      grades: this.props.grades\r\n    };\r\n\t},\r\n  onNumberOfSectionsChange(num) {\r\n    var sections = null;\r\n    if (num > 1) {\r\n      sections = this.state.sections? this.state.sections : [];\r\n      while (num > sections.length) {\r\n        sections.push({id: sections.length*-1, nr: sections.length+1, grade: 'n/a', description: null});\r\n      }\r\n      while (num < sections.length) {\r\n        sections.pop();\r\n      }\r\n    }\r\n    this.props.onSectionsUpdated(sections);\r\n    this.setState({sections});\r\n  },\r\n  onNrChanged(id, e) {\r\n    const sections = this.state.sections;\r\n    const section = sections.find(s => s.id === id);\r\n    section.nr = e.target.value;\r\n    this.props.onSectionsUpdated(sections);\r\n    this.setState({sections});\r\n  },\r\n  onGradeChanged(id, grade) {\r\n    const sections = this.state.sections;\r\n    const section = sections.find(s => s.id === id);\r\n    section.grade = grade;\r\n    this.props.onSectionsUpdated(sections);\r\n    this.setState({sections});\r\n  },\r\n  onDescriptionChanged(id, e) {\r\n    const sections = this.state.sections;\r\n    const section = sections.find(s => s.id === id);\r\n    section.description = e.target.value;\r\n    this.props.onSectionsUpdated(sections);\r\n    this.setState({sections});\r\n  },\r\n\trender() {\r\n    const sections = this.state.sections && this.state.sections.length > 1 && this.state.sections.map((s, i) => {\r\n      return (\r\n        <Form componentClass=\"fieldset\" inline key={i}>\r\n          <FormGroup controlId=\"formNr\">\r\n            <FormControl type=\"number\" value={s.nr} onChange={this.onNrChanged.bind(this, s.id)} style={{width: '50px'}} />\r\n          </FormGroup>{' '}\r\n          <FormGroup controlId=\"formGrade\">\r\n            <DropdownButton title={s.grade} id=\"bg-nested-dropdown\">\r\n              {this.state.grades.map((g, i) => { return <MenuItem key={i} eventKey={i} onSelect={this.onGradeChanged.bind(this, s.id, g.grade)}>{g.grade}</MenuItem> })}\r\n            </DropdownButton>\r\n          </FormGroup>{' '}\r\n          <FormGroup controlId=\"formDescription\">\r\n            <FormControl type=\"text\" value={s.description? s.description : \"\"} onChange={this.onDescriptionChanged.bind(this, s.id)} style={{width: '500px'}} />\r\n          </FormGroup>\r\n        </Form>\r\n      )\r\n    });\r\n\r\n\t\treturn (\r\n      <Well>\r\n        <FormGroup controlId=\"formControlsNumSections\">\r\n          <DropdownButton title={this.state.sections? this.state.sections.length : 1} id=\"bg-nested-dropdown\">\r\n            <MenuItem key={1} eventKey={1} onSelect={this.onNumberOfSectionsChange.bind(this, 1)}>1</MenuItem>\r\n            <MenuItem key={2} eventKey={2} onSelect={this.onNumberOfSectionsChange.bind(this, 2)}>2</MenuItem>\r\n            <MenuItem key={3} eventKey={3} onSelect={this.onNumberOfSectionsChange.bind(this, 3)}>3</MenuItem>\r\n            <MenuItem key={4} eventKey={4} onSelect={this.onNumberOfSectionsChange.bind(this, 4)}>4</MenuItem>\r\n            <MenuItem key={5} eventKey={5} onSelect={this.onNumberOfSectionsChange.bind(this, 5)}>5</MenuItem>\r\n            <MenuItem key={6} eventKey={6} onSelect={this.onNumberOfSectionsChange.bind(this, 6)}>6</MenuItem>\r\n            <MenuItem key={7} eventKey={7} onSelect={this.onNumberOfSectionsChange.bind(this, 7)}>7</MenuItem>\r\n            <MenuItem key={8} eventKey={8} onSelect={this.onNumberOfSectionsChange.bind(this, 8)}>8</MenuItem>\r\n            <MenuItem key={9} eventKey={9} onSelect={this.onNumberOfSectionsChange.bind(this, 9)}>9</MenuItem>\r\n            <MenuItem key={10} eventKey={10} onSelect={this.onNumberOfSectionsChange.bind(this, 10)}>10</MenuItem>\r\n            <MenuItem key={11} eventKey={11} onSelect={this.onNumberOfSectionsChange.bind(this, 11)}>11</MenuItem>\r\n            <MenuItem key={12} eventKey={12} onSelect={this.onNumberOfSectionsChange.bind(this, 12)}>12</MenuItem>\r\n            <MenuItem key={13} eventKey={13} onSelect={this.onNumberOfSectionsChange.bind(this, 13)}>13</MenuItem>\r\n            <MenuItem key={14} eventKey={14} onSelect={this.onNumberOfSectionsChange.bind(this, 14)}>14</MenuItem>\r\n            <MenuItem key={15} eventKey={15} onSelect={this.onNumberOfSectionsChange.bind(this, 15)}>15</MenuItem>\r\n            <MenuItem key={16} eventKey={16} onSelect={this.onNumberOfSectionsChange.bind(this, 16)}>16</MenuItem>\r\n            <MenuItem key={17} eventKey={17} onSelect={this.onNumberOfSectionsChange.bind(this, 17)}>17</MenuItem>\r\n            <MenuItem key={18} eventKey={18} onSelect={this.onNumberOfSectionsChange.bind(this, 18)}>18</MenuItem>\r\n            <MenuItem key={19} eventKey={19} onSelect={this.onNumberOfSectionsChange.bind(this, 19)}>19</MenuItem>\r\n            <MenuItem key={20} eventKey={20} onSelect={this.onNumberOfSectionsChange.bind(this, 20)}>20</MenuItem>\r\n          </DropdownButton>\r\n        </FormGroup>\r\n        {sections}\r\n      </Well>\r\n\t\t);\r\n\t}\r\n});\r\n\r\nmodule.exports = ProblemSection;\r\n","import React from 'react';\r\nimport createClass from 'create-react-class';\r\nimport PropTypes from 'prop-types';\r\nimport Select from 'react-select';\r\nimport Request from 'superagent';\r\nimport config from '../../../utils/config.js';\r\n\r\nvar UserSelector = createClass({\r\n\tdisplayName: 'UserSelector',\r\n\tpropTypes: {\r\n\t\tlabel: PropTypes.string\r\n\t},\r\n\tgetInitialState() {\r\n    Request.get(config.getUrl(\"users/search?value=\")).withCredentials().end((err, res) => {\r\n      if (err) {\r\n        console.log(err);\r\n      } else {\r\n        this.setState({options: res.body.map(u => {return {value: u.id, label: u.name}})});\r\n      }\r\n    });\r\n    return {\r\n      multiValue: this.props.users,\r\n      options: []\r\n    };\r\n\t},\r\n\thandleOnChange(value) {\r\n    this.props.onUsersUpdated(value);\r\n\t\tthis.setState({multiValue: value});\r\n\t},\r\n\trender() {\r\n\t\treturn (\r\n      <div style={{position: 'relative', width: '100%'}}>\r\n        <div style={{width: '100%'}}>\r\n  \t\t\t\t<Select.Creatable\r\n  \t\t\t\t\tmulti={true}\r\n  \t\t\t\t\toptions={this.state.options}\r\n  \t\t\t\t\tonChange={this.handleOnChange}\r\n  \t\t\t\t\tvalue={this.state.multiValue}\r\n  \t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n});\r\n\r\nmodule.exports = UserSelector;\r\n"],"sourceRoot":""}