<IfModule mod_rewrite.c>
  RewriteEngine On

  # allow social media crawlers to work by redirecting them to a server-rendered static version on the page
  RewriteCond %{HTTP_USER_AGENT} !(Facebot|facebookexternalhit/[0-9])
  RewriteRule ^ - [S=4] # Skip following lines if NOT crawler
  RewriteRule area/(\d*)$ http://45.56.87.57:8080/com.buldreinfo.jersey.jaxb/v1/static/areas?id=$1&base=%{HTTP_HOST} [P]
  RewriteRule sector/(\d*)$ http://45.56.87.57:8080/com.buldreinfo.jersey.jaxb/v1/static/sectors?id=$1&base=%{HTTP_HOST} [P]
  RewriteRule problem/(\d*)$ http://45.56.87.57:8080/com.buldreinfo.jersey.jaxb/v1/static/problems?id=$1&base=%{HTTP_HOST} [P]
  RewriteRule ^ http://45.56.87.57:8080/com.buldreinfo.jersey.jaxb/v1/static/frontpage?base=%{HTTP_HOST} [P]

  # sitemap.txt
  RewriteCond %{REQUEST_URI} sitemap.txt [NC]
  RewriteRule ^ http://45.56.87.57:8080/com.buldreinfo.jersey.jaxb/v1/static/sitemap.txt?base=%{HTTP_HOST} [P]

  # robots.txt
  RewriteCond %{REQUEST_URI} robots.txt [NC]
  RewriteRule ^ http://45.56.87.57:8080/com.buldreinfo.jersey.jaxb/v1/static/robots.txt?base=%{HTTP_HOST} [P]

  # React.JS redirect to index.html, google1588c034b4869b96.html used to authenticate https://buldring.fredrikstadklatreklubb.org in google search console
  RewriteCond %{REQUEST_URI} (\.txt|\.css|\.js|\.jpg|\.jpeg|\.bmp|\.png|\.webm|\.webp|\.mp4)$ [OR,NC]
  RewriteCond %{REQUEST_URI} google1588c034b4869b96.html [NC]
  RewriteRule ^ - [S=4] # Skip following lines if NOT .txt/.css/.js/...
  RewriteCond %{DOCUMENT_ROOT}%{REQUEST_URI} -f [OR]
  RewriteCond %{DOCUMENT_ROOT}%{REQUEST_URI} -d
  RewriteRule ^ - [L]
  RewriteRule ^ /index.html [L]

</IfModule>

# Add Proper MIME-Type for Favicon
AddType image/x-icon .ico

<IfModule mod_expires.c>
  ExpiresActive on

  ExpiresByType image/x-icon "access plus 1 month"

  ExpiresByType text/html "access plus 12 hours"
  ExpiresByType application/javascript "access plus 12 hours"
  ExpiresByType text/css "access plus 12 hours"
  ExpiresByType application/json "access 0 seconds"

  ExpiresByType audio/ogg "access plus 1 month"
  ExpiresByType image/gif "access plus 1 month"
  ExpiresByType image/jpg "access plus 1 month"
  ExpiresByType image/jpeg "access plus 1 month"
  ExpiresByType image/png "access plus 1 month"
  ExpiresByType image/webp "access plus 1 month"
  ExpiresByType video/mp4 "access plus 1 month"
  ExpiresByType video/ogg "access plus 1 month"
  ExpiresByType video/webm "access plus 1 month"

</IfModule>
